import{a as $n,b as Oi,c as Vl}from"./chunk-IPIZ24PA.js";import{a as Zs}from"./chunk-LNOKARBD.js";import{a as eo,b as to,c as ql}from"./chunk-WROJD62Z.js";import{C as Za,I as es,t as Js,u as Ks}from"./chunk-SOYNARJ7.js";import{A as mi,E as Gt,F as Qa,G as Mi,H as Un,I as Ys,J as Ja,S as Ka,U as Xs,a as gr,aa as Wn,b as Yi,ba as Qs,ca as Xi,d as It,e as Xa,f as Et,g as Ne,k as zs,m as Fn,n as In,o as Mn,p as pi,q as Gs,t as On,w as Vs,x as qs,y as Nn,z as Mt}from"./chunk-QWAF5HSH.js";import{c as qi,d as qa,e as Ya}from"./chunk-KT7KMEQC.js";var rs=qa((ro,ts)=>{(function(l){if(typeof ro=="object"&&typeof ts!="undefined")ts.exports=l();else if(typeof define=="function"&&define.amd)define([],l);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=l()}})(function(){var l,t,r;return(function n(u,d,m){function y(W,K){if(!d[W]){if(!u[W]){var H=typeof qi=="function"&&qi;if(!K&&H)return H(W,!0);if(b)return b(W,!0);var N=new Error("Cannot find module '"+W+"'");throw N.code="MODULE_NOT_FOUND",N}var B=d[W]={exports:{}};u[W][0].call(B.exports,function(ue){var Q=u[W][1][ue];return y(Q||ue)},B,B.exports,n,u,d,m)}return d[W].exports}for(var b=typeof qi=="function"&&qi,P=0;P<m.length;P++)y(m[P]);return y})({1:[function(n,u,d){(function(m){"use strict";var y=m.MutationObserver||m.WebKitMutationObserver,b;if(y){var P=0,W=new y(ue),K=m.document.createTextNode("");W.observe(K,{characterData:!0}),b=function(){K.data=P=++P%2}}else if(!m.setImmediate&&typeof m.MessageChannel!="undefined"){var H=new m.MessageChannel;H.port1.onmessage=ue,b=function(){H.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?b=function(){var xe=m.document.createElement("script");xe.onreadystatechange=function(){ue(),xe.onreadystatechange=null,xe.parentNode.removeChild(xe),xe=null},m.document.documentElement.appendChild(xe)}:b=function(){setTimeout(ue,0)};var N,B=[];function ue(){N=!0;for(var xe,ke,fe=B.length;fe;){for(ke=B,B=[],xe=-1;++xe<fe;)ke[xe]();fe=B.length}N=!1}u.exports=Q;function Q(xe){B.push(xe)===1&&!N&&b()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(n,u,d){"use strict";var m=n(1);function y(){}var b={},P=["REJECTED"],W=["FULFILLED"],K=["PENDING"];u.exports=H;function H(s){if(typeof s!="function")throw new TypeError("resolver must be a function");this.state=K,this.queue=[],this.outcome=void 0,s!==y&&Q(this,s)}H.prototype.catch=function(s){return this.then(null,s)},H.prototype.then=function(s,le){if(typeof s!="function"&&this.state===W||typeof le!="function"&&this.state===P)return this;var J=new this.constructor(y);if(this.state!==K){var De=this.state===W?s:le;B(J,De,this.outcome)}else this.queue.push(new N(J,s,le));return J};function N(s,le,J){this.promise=s,typeof le=="function"&&(this.onFulfilled=le,this.callFulfilled=this.otherCallFulfilled),typeof J=="function"&&(this.onRejected=J,this.callRejected=this.otherCallRejected)}N.prototype.callFulfilled=function(s){b.resolve(this.promise,s)},N.prototype.otherCallFulfilled=function(s){B(this.promise,this.onFulfilled,s)},N.prototype.callRejected=function(s){b.reject(this.promise,s)},N.prototype.otherCallRejected=function(s){B(this.promise,this.onRejected,s)};function B(s,le,J){m(function(){var De;try{De=le(J)}catch(Ze){return b.reject(s,Ze)}De===s?b.reject(s,new TypeError("Cannot resolve promise with itself")):b.resolve(s,De)})}b.resolve=function(s,le){var J=xe(ue,le);if(J.status==="error")return b.reject(s,J.value);var De=J.value;if(De)Q(s,De);else{s.state=W,s.outcome=le;for(var Ze=-1,Me=s.queue.length;++Ze<Me;)s.queue[Ze].callFulfilled(le)}return s},b.reject=function(s,le){s.state=P,s.outcome=le;for(var J=-1,De=s.queue.length;++J<De;)s.queue[J].callRejected(le);return s};function ue(s){var le=s&&s.then;if(s&&(typeof s=="object"||typeof s=="function")&&typeof le=="function")return function(){le.apply(s,arguments)}}function Q(s,le){var J=!1;function De(Qe){J||(J=!0,b.reject(s,Qe))}function Ze(Qe){J||(J=!0,b.resolve(s,Qe))}function Me(){le(Ze,De)}var ge=xe(Me);ge.status==="error"&&De(ge.value)}function xe(s,le){var J={};try{J.value=s(le),J.status="success"}catch(De){J.status="error",J.value=De}return J}H.resolve=ke;function ke(s){return s instanceof this?s:b.resolve(new this(y),s)}H.reject=fe;function fe(s){var le=new this(y);return b.reject(le,s)}H.all=de;function de(s){var le=this;if(Object.prototype.toString.call(s)!=="[object Array]")return this.reject(new TypeError("must be an array"));var J=s.length,De=!1;if(!J)return this.resolve([]);for(var Ze=new Array(J),Me=0,ge=-1,Qe=new this(y);++ge<J;)_t(s[ge],ge);return Qe;function _t(xr,ht){le.resolve(xr).then(wr,function(pt){De||(De=!0,b.reject(Qe,pt))});function wr(pt){Ze[ht]=pt,++Me===J&&!De&&(De=!0,b.resolve(Qe,Ze))}}}H.race=He;function He(s){var le=this;if(Object.prototype.toString.call(s)!=="[object Array]")return this.reject(new TypeError("must be an array"));var J=s.length,De=!1;if(!J)return this.resolve([]);for(var Ze=-1,Me=new this(y);++Ze<J;)ge(s[Ze]);return Me;function ge(Qe){le.resolve(Qe).then(function(_t){De||(De=!0,b.resolve(Me,_t))},function(_t){De||(De=!0,b.reject(Me,_t))})}}},{1:1}],3:[function(n,u,d){(function(m){"use strict";typeof m.Promise!="function"&&(m.Promise=n(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{2:2}],4:[function(n,u,d){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p};function y(p,E){if(!(p instanceof E))throw new TypeError("Cannot call a class as a function")}function b(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(p){return}}var P=b();function W(){try{if(!P||!P.open)return!1;var p=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),E=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!p||E)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(g){return!1}}function K(p,E){p=p||[],E=E||{};try{return new Blob(p,E)}catch(S){if(S.name!=="TypeError")throw S;for(var g=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,A=new g,D=0;D<p.length;D+=1)A.append(p[D]);return A.getBlob(E.type)}}typeof Promise=="undefined"&&n(3);var H=Promise;function N(p,E){E&&p.then(function(g){E(null,g)},function(g){E(g)})}function B(p,E,g){typeof E=="function"&&p.then(E),typeof g=="function"&&p.catch(g)}function ue(p){return typeof p!="string"&&(console.warn(p+" used as a key, but it is not a string."),p=String(p)),p}function Q(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var xe="local-forage-detect-blob-support",ke=void 0,fe={},de=Object.prototype.toString,He="readonly",s="readwrite";function le(p){for(var E=p.length,g=new ArrayBuffer(E),A=new Uint8Array(g),D=0;D<E;D++)A[D]=p.charCodeAt(D);return g}function J(p){return new H(function(E){var g=p.transaction(xe,s),A=K([""]);g.objectStore(xe).put(A,"key"),g.onabort=function(D){D.preventDefault(),D.stopPropagation(),E(!1)},g.oncomplete=function(){var D=navigator.userAgent.match(/Chrome\/(\d+)/),S=navigator.userAgent.match(/Edge\//);E(S||!D||parseInt(D[1],10)>=43)}}).catch(function(){return!1})}function De(p){return typeof ke=="boolean"?H.resolve(ke):J(p).then(function(E){return ke=E,ke})}function Ze(p){var E=fe[p.name],g={};g.promise=new H(function(A,D){g.resolve=A,g.reject=D}),E.deferredOperations.push(g),E.dbReady?E.dbReady=E.dbReady.then(function(){return g.promise}):E.dbReady=g.promise}function Me(p){var E=fe[p.name],g=E.deferredOperations.pop();if(g)return g.resolve(),g.promise}function ge(p,E){var g=fe[p.name],A=g.deferredOperations.pop();if(A)return A.reject(E),A.promise}function Qe(p,E){return new H(function(g,A){if(fe[p.name]=fe[p.name]||qe(),p.db)if(E)Ze(p),p.db.close();else return g(p.db);var D=[p.name];E&&D.push(p.version);var S=P.open.apply(P,D);E&&(S.onupgradeneeded=function(M){var j=S.result;try{j.createObjectStore(p.storeName),M.oldVersion<=1&&j.createObjectStore(xe)}catch(q){if(q.name==="ConstraintError")console.warn('The database "'+p.name+'" has been upgraded from version '+M.oldVersion+" to version "+M.newVersion+', but the storage "'+p.storeName+'" already exists.');else throw q}}),S.onerror=function(M){M.preventDefault(),A(S.error)},S.onsuccess=function(){var M=S.result;M.onversionchange=function(j){j.target.close()},g(M),Me(p)}})}function _t(p){return Qe(p,!1)}function xr(p){return Qe(p,!0)}function ht(p,E){if(!p.db)return!0;var g=!p.db.objectStoreNames.contains(p.storeName),A=p.version<p.db.version,D=p.version>p.db.version;if(A&&(p.version!==E&&console.warn('The database "'+p.name+`" can't be downgraded from version `+p.db.version+" to version "+p.version+"."),p.version=p.db.version),D||g){if(g){var S=p.db.version+1;S>p.version&&(p.version=S)}return!0}return!1}function wr(p){return new H(function(E,g){var A=new FileReader;A.onerror=g,A.onloadend=function(D){var S=btoa(D.target.result||"");E({__local_forage_encoded_blob:!0,data:S,type:p.type})},A.readAsBinaryString(p)})}function pt(p){var E=le(atob(p.data));return K([E],{type:p.type})}function Jr(p){return p&&p.__local_forage_encoded_blob}function Kr(p){var E=this,g=E._initReady().then(function(){var A=fe[E._dbInfo.name];if(A&&A.dbReady)return A.dbReady});return B(g,p,p),g}function Ve(p){Ze(p);for(var E=fe[p.name],g=E.forages,A=0;A<g.length;A++){var D=g[A];D._dbInfo.db&&(D._dbInfo.db.close(),D._dbInfo.db=null)}return p.db=null,_t(p).then(function(S){return p.db=S,ht(p)?xr(p):S}).then(function(S){p.db=E.db=S;for(var M=0;M<g.length;M++)g[M]._dbInfo.db=S}).catch(function(S){throw ge(p,S),S})}function mt(p,E,g,A){A===void 0&&(A=1);try{var D=p.db.transaction(p.storeName,E);g(null,D)}catch(S){if(A>0&&(!p.db||S.name==="InvalidStateError"||S.name==="NotFoundError"))return H.resolve().then(function(){if(!p.db||S.name==="NotFoundError"&&!p.db.objectStoreNames.contains(p.storeName)&&p.version<=p.db.version)return p.db&&(p.version=p.db.version+1),xr(p)}).then(function(){return Ve(p).then(function(){mt(p,E,g,A-1)})}).catch(g);g(S)}}function qe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ci(p){var E=this,g={db:null};if(p)for(var A in p)g[A]=p[A];var D=fe[g.name];D||(D=qe(),fe[g.name]=D),D.forages.push(E),E._initReady||(E._initReady=E.ready,E.ready=Kr);var S=[];function M(){return H.resolve()}for(var j=0;j<D.forages.length;j++){var q=D.forages[j];q!==E&&S.push(q._initReady().catch(M))}var Y=D.forages.slice(0);return H.all(S).then(function(){return g.db=D.db,_t(g)}).then(function(z){return g.db=z,ht(g,E._defaultConfig.version)?xr(g):z}).then(function(z){g.db=D.db=z,E._dbInfo=g;for(var ne=0;ne<Y.length;ne++){var ye=Y[ne];ye!==E&&(ye._dbInfo.db=g.db,ye._dbInfo.version=g.version)}})}function ze(p,E){var g=this;p=ue(p);var A=new H(function(D,S){g.ready().then(function(){mt(g._dbInfo,He,function(M,j){if(M)return S(M);try{var q=j.objectStore(g._dbInfo.storeName),Y=q.get(p);Y.onsuccess=function(){var z=Y.result;z===void 0&&(z=null),Jr(z)&&(z=pt(z)),D(z)},Y.onerror=function(){S(Y.error)}}catch(z){S(z)}})}).catch(S)});return N(A,E),A}function Er(p,E){var g=this,A=new H(function(D,S){g.ready().then(function(){mt(g._dbInfo,He,function(M,j){if(M)return S(M);try{var q=j.objectStore(g._dbInfo.storeName),Y=q.openCursor(),z=1;Y.onsuccess=function(){var ne=Y.result;if(ne){var ye=ne.value;Jr(ye)&&(ye=pt(ye));var Ie=p(ye,ne.key,z++);Ie!==void 0?D(Ie):ne.continue()}else D()},Y.onerror=function(){S(Y.error)}}catch(ne){S(ne)}})}).catch(S)});return N(A,E),A}function Zr(p,E,g){var A=this;p=ue(p);var D=new H(function(S,M){var j;A.ready().then(function(){return j=A._dbInfo,de.call(E)==="[object Blob]"?De(j.db).then(function(q){return q?E:wr(E)}):E}).then(function(q){mt(A._dbInfo,s,function(Y,z){if(Y)return M(Y);try{var ne=z.objectStore(A._dbInfo.storeName);q===null&&(q=void 0);var ye=ne.put(q,p);z.oncomplete=function(){q===void 0&&(q=null),S(q)},z.onabort=z.onerror=function(){var Ie=ye.error?ye.error:ye.transaction.error;M(Ie)}}catch(Ie){M(Ie)}})}).catch(M)});return N(D,g),D}function ei(p,E){var g=this;p=ue(p);var A=new H(function(D,S){g.ready().then(function(){mt(g._dbInfo,s,function(M,j){if(M)return S(M);try{var q=j.objectStore(g._dbInfo.storeName),Y=q.delete(p);j.oncomplete=function(){D()},j.onerror=function(){S(Y.error)},j.onabort=function(){var z=Y.error?Y.error:Y.transaction.error;S(z)}}catch(z){S(z)}})}).catch(S)});return N(A,E),A}function gt(p){var E=this,g=new H(function(A,D){E.ready().then(function(){mt(E._dbInfo,s,function(S,M){if(S)return D(S);try{var j=M.objectStore(E._dbInfo.storeName),q=j.clear();M.oncomplete=function(){A()},M.onabort=M.onerror=function(){var Y=q.error?q.error:q.transaction.error;D(Y)}}catch(Y){D(Y)}})}).catch(D)});return N(g,p),g}function Pi(p){var E=this,g=new H(function(A,D){E.ready().then(function(){mt(E._dbInfo,He,function(S,M){if(S)return D(S);try{var j=M.objectStore(E._dbInfo.storeName),q=j.count();q.onsuccess=function(){A(q.result)},q.onerror=function(){D(q.error)}}catch(Y){D(Y)}})}).catch(D)});return N(g,p),g}function Xt(p,E){var g=this,A=new H(function(D,S){if(p<0){D(null);return}g.ready().then(function(){mt(g._dbInfo,He,function(M,j){if(M)return S(M);try{var q=j.objectStore(g._dbInfo.storeName),Y=!1,z=q.openKeyCursor();z.onsuccess=function(){var ne=z.result;if(!ne){D(null);return}p===0||Y?D(ne.key):(Y=!0,ne.advance(p))},z.onerror=function(){S(z.error)}}catch(ne){S(ne)}})}).catch(S)});return N(A,E),A}function Ot(p){var E=this,g=new H(function(A,D){E.ready().then(function(){mt(E._dbInfo,He,function(S,M){if(S)return D(S);try{var j=M.objectStore(E._dbInfo.storeName),q=j.openKeyCursor(),Y=[];q.onsuccess=function(){var z=q.result;if(!z){A(Y);return}Y.push(z.key),z.continue()},q.onerror=function(){D(q.error)}}catch(z){D(z)}})}).catch(D)});return N(g,p),g}function Mr(p,E){E=Q.apply(this,arguments);var g=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||g.name,p.storeName=p.storeName||g.storeName);var A=this,D;if(!p.name)D=H.reject("Invalid arguments");else{var S=p.name===g.name&&A._dbInfo.db,M=S?H.resolve(A._dbInfo.db):_t(p).then(function(j){var q=fe[p.name],Y=q.forages;q.db=j;for(var z=0;z<Y.length;z++)Y[z]._dbInfo.db=j;return j});p.storeName?D=M.then(function(j){if(j.objectStoreNames.contains(p.storeName)){var q=j.version+1;Ze(p);var Y=fe[p.name],z=Y.forages;j.close();for(var ne=0;ne<z.length;ne++){var ye=z[ne];ye._dbInfo.db=null,ye._dbInfo.version=q}var Ie=new H(function(Oe,$e){var Ue=P.open(p.name,q);Ue.onerror=function(xt){var ci=Ue.result;ci.close(),$e(xt)},Ue.onupgradeneeded=function(){var xt=Ue.result;xt.deleteObjectStore(p.storeName)},Ue.onsuccess=function(){var xt=Ue.result;xt.close(),Oe(xt)}});return Ie.then(function(Oe){Y.db=Oe;for(var $e=0;$e<z.length;$e++){var Ue=z[$e];Ue._dbInfo.db=Oe,Me(Ue._dbInfo)}}).catch(function(Oe){throw(ge(p,Oe)||H.resolve()).catch(function(){}),Oe})}}):D=M.then(function(j){Ze(p);var q=fe[p.name],Y=q.forages;j.close();for(var z=0;z<Y.length;z++){var ne=Y[z];ne._dbInfo.db=null}var ye=new H(function(Ie,Oe){var $e=P.deleteDatabase(p.name);$e.onerror=function(){var Ue=$e.result;Ue&&Ue.close(),Oe($e.error)},$e.onblocked=function(){console.warn('dropInstance blocked for database "'+p.name+'" until all open connections are closed')},$e.onsuccess=function(){var Ue=$e.result;Ue&&Ue.close(),Ie(Ue)}});return ye.then(function(Ie){q.db=Ie;for(var Oe=0;Oe<Y.length;Oe++){var $e=Y[Oe];Me($e._dbInfo)}}).catch(function(Ie){throw(ge(p,Ie)||H.resolve()).catch(function(){}),Ie})})}return N(D,E),D}var Qt={_driver:"asyncStorage",_initStorage:Ci,_support:W(),iterate:Er,getItem:ze,setItem:Zr,removeItem:ei,clear:gt,length:Pi,key:Xt,keys:Ot,dropInstance:Mr};function _r(){return typeof openDatabase=="function"}var ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",at="~~local_forage_type~",Tr=/^~~local_forage_type~([^~]+)~/,Jt="__lfsc__:",Or=Jt.length,lt="arbf",Kt="blob",$t="si08",te="ui08",Ge="uic8",Zt="si16",ti="si32",ri="ur16",Nr="ui32",Sr="fl32",er="fl64",ut=Or+lt.length,Tt=Object.prototype.toString;function rt(p){var E=p.length*.75,g=p.length,A,D=0,S,M,j,q;p[p.length-1]==="="&&(E--,p[p.length-2]==="="&&E--);var Y=new ArrayBuffer(E),z=new Uint8Array(Y);for(A=0;A<g;A+=4)S=ot.indexOf(p[A]),M=ot.indexOf(p[A+1]),j=ot.indexOf(p[A+2]),q=ot.indexOf(p[A+3]),z[D++]=S<<2|M>>4,z[D++]=(M&15)<<4|j>>2,z[D++]=(j&3)<<6|q&63;return Y}function Ht(p){var E=new Uint8Array(p),g="",A;for(A=0;A<E.length;A+=3)g+=ot[E[A]>>2],g+=ot[(E[A]&3)<<4|E[A+1]>>4],g+=ot[(E[A+1]&15)<<2|E[A+2]>>6],g+=ot[E[A+2]&63];return E.length%3===2?g=g.substring(0,g.length-1)+"=":E.length%3===1&&(g=g.substring(0,g.length-2)+"=="),g}function ur(p,E){var g="";if(p&&(g=Tt.call(p)),p&&(g==="[object ArrayBuffer]"||p.buffer&&Tt.call(p.buffer)==="[object ArrayBuffer]")){var A,D=Jt;p instanceof ArrayBuffer?(A=p,D+=lt):(A=p.buffer,g==="[object Int8Array]"?D+=$t:g==="[object Uint8Array]"?D+=te:g==="[object Uint8ClampedArray]"?D+=Ge:g==="[object Int16Array]"?D+=Zt:g==="[object Uint16Array]"?D+=ri:g==="[object Int32Array]"?D+=ti:g==="[object Uint32Array]"?D+=Nr:g==="[object Float32Array]"?D+=Sr:g==="[object Float64Array]"?D+=er:E(new Error("Failed to get type for BinaryArray"))),E(D+Ht(A))}else if(g==="[object Blob]"){var S=new FileReader;S.onload=function(){var M=at+p.type+"~"+Ht(this.result);E(Jt+Kt+M)},S.readAsArrayBuffer(p)}else try{E(JSON.stringify(p))}catch(M){console.error("Couldn't convert value into a JSON string: ",p),E(null,M)}}function Ur(p){if(p.substring(0,Or)!==Jt)return JSON.parse(p);var E=p.substring(ut),g=p.substring(Or,ut),A;if(g===Kt&&Tr.test(E)){var D=E.match(Tr);A=D[1],E=E.substring(D[0].length)}var S=rt(E);switch(g){case lt:return S;case Kt:return K([S],{type:A});case $t:return new Int8Array(S);case te:return new Uint8Array(S);case Ge:return new Uint8ClampedArray(S);case Zt:return new Int16Array(S);case ri:return new Uint16Array(S);case ti:return new Int32Array(S);case Nr:return new Uint32Array(S);case Sr:return new Float32Array(S);case er:return new Float64Array(S);default:throw new Error("Unkown type: "+g)}}var Wr={serialize:ur,deserialize:Ur,stringToBuffer:rt,bufferToString:Ht};function Ar(p,E,g,A){p.executeSql("CREATE TABLE IF NOT EXISTS "+E.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],g,A)}function Nt(p){var E=this,g={db:null};if(p)for(var A in p)g[A]=typeof p[A]!="string"?p[A].toString():p[A];var D=new H(function(S,M){try{g.db=openDatabase(g.name,String(g.version),g.description,g.size)}catch(j){return M(j)}g.db.transaction(function(j){Ar(j,g,function(){E._dbInfo=g,S()},function(q,Y){M(Y)})},M)});return g.serializer=Wr,D}function vt(p,E,g,A,D,S){p.executeSql(g,A,D,function(M,j){j.code===j.SYNTAX_ERR?M.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[E.storeName],function(q,Y){Y.rows.length?S(q,j):Ar(q,E,function(){q.executeSql(g,A,D,S)},S)},S):S(M,j)},S)}function cr(p,E){var g=this;p=ue(p);var A=new H(function(D,S){g.ready().then(function(){var M=g._dbInfo;M.db.transaction(function(j){vt(j,M,"SELECT * FROM "+M.storeName+" WHERE key = ? LIMIT 1",[p],function(q,Y){var z=Y.rows.length?Y.rows.item(0).value:null;z&&(z=M.serializer.deserialize(z)),D(z)},function(q,Y){S(Y)})})}).catch(S)});return N(A,E),A}function ki(p,E){var g=this,A=new H(function(D,S){g.ready().then(function(){var M=g._dbInfo;M.db.transaction(function(j){vt(j,M,"SELECT * FROM "+M.storeName,[],function(q,Y){for(var z=Y.rows,ne=z.length,ye=0;ye<ne;ye++){var Ie=z.item(ye),Oe=Ie.value;if(Oe&&(Oe=M.serializer.deserialize(Oe)),Oe=p(Oe,Ie.key,ye+1),Oe!==void 0){D(Oe);return}}D()},function(q,Y){S(Y)})})}).catch(S)});return N(A,E),A}function ct(p,E,g,A){var D=this;p=ue(p);var S=new H(function(M,j){D.ready().then(function(){E===void 0&&(E=null);var q=E,Y=D._dbInfo;Y.serializer.serialize(E,function(z,ne){ne?j(ne):Y.db.transaction(function(ye){vt(ye,Y,"INSERT OR REPLACE INTO "+Y.storeName+" (key, value) VALUES (?, ?)",[p,z],function(){M(q)},function(Ie,Oe){j(Oe)})},function(ye){if(ye.code===ye.QUOTA_ERR){if(A>0){M(ct.apply(D,[p,q,g,A-1]));return}j(ye)}})})}).catch(j)});return N(S,g),S}function Pe(p,E,g){return ct.apply(this,[p,E,g,1])}function Bt(p,E){var g=this;p=ue(p);var A=new H(function(D,S){g.ready().then(function(){var M=g._dbInfo;M.db.transaction(function(j){vt(j,M,"DELETE FROM "+M.storeName+" WHERE key = ?",[p],function(){D()},function(q,Y){S(Y)})})}).catch(S)});return N(A,E),A}function Hi(p){var E=this,g=new H(function(A,D){E.ready().then(function(){var S=E._dbInfo;S.db.transaction(function(M){vt(M,S,"DELETE FROM "+S.storeName,[],function(){A()},function(j,q){D(q)})})}).catch(D)});return N(g,p),g}function ii(p){var E=this,g=new H(function(A,D){E.ready().then(function(){var S=E._dbInfo;S.db.transaction(function(M){vt(M,S,"SELECT COUNT(key) as c FROM "+S.storeName,[],function(j,q){var Y=q.rows.item(0).c;A(Y)},function(j,q){D(q)})})}).catch(D)});return N(g,p),g}function $r(p,E){var g=this,A=new H(function(D,S){g.ready().then(function(){var M=g._dbInfo;M.db.transaction(function(j){vt(j,M,"SELECT key FROM "+M.storeName+" WHERE id = ? LIMIT 1",[p+1],function(q,Y){var z=Y.rows.length?Y.rows.item(0).key:null;D(z)},function(q,Y){S(Y)})})}).catch(S)});return N(A,E),A}function tr(p){var E=this,g=new H(function(A,D){E.ready().then(function(){var S=E._dbInfo;S.db.transaction(function(M){vt(M,S,"SELECT key FROM "+S.storeName,[],function(j,q){for(var Y=[],z=0;z<q.rows.length;z++)Y.push(q.rows.item(z).key);A(Y)},function(j,q){D(q)})})}).catch(D)});return N(g,p),g}function rr(p){return new H(function(E,g){p.transaction(function(A){A.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(D,S){for(var M=[],j=0;j<S.rows.length;j++)M.push(S.rows.item(j).name);E({db:p,storeNames:M})},function(D,S){g(S)})},function(A){g(A)})})}function ni(p,E){E=Q.apply(this,arguments);var g=this.config();p=typeof p!="function"&&p||{},p.name||(p.name=p.name||g.name,p.storeName=p.storeName||g.storeName);var A=this,D;return p.name?D=new H(function(S){var M;p.name===g.name?M=A._dbInfo.db:M=openDatabase(p.name,"","",0),p.storeName?S({db:M,storeNames:[p.storeName]}):S(rr(M))}).then(function(S){return new H(function(M,j){S.db.transaction(function(q){function Y(Ie){return new H(function(Oe,$e){q.executeSql("DROP TABLE IF EXISTS "+Ie,[],function(){Oe()},function(Ue,xt){$e(xt)})})}for(var z=[],ne=0,ye=S.storeNames.length;ne<ye;ne++)z.push(Y(S.storeNames[ne]));H.all(z).then(function(){M()}).catch(function(Ie){j(Ie)})},function(q){j(q)})})}):D=H.reject("Invalid arguments"),N(D,E),D}var ft={_driver:"webSQLStorage",_initStorage:Nt,_support:_r(),iterate:ki,getItem:cr,setItem:Pe,removeItem:Bt,clear:Hi,length:ii,key:$r,keys:tr,dropInstance:ni};function Hr(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(p){return!1}}function ai(p,E){var g=p.name+"/";return p.storeName!==E.storeName&&(g+=p.storeName+"/"),g}function Di(){var p="_localforage_support_test";try{return localStorage.setItem(p,!0),localStorage.removeItem(p),!1}catch(E){return!0}}function Br(){return!Di()||localStorage.length>0}function Ri(p){var E=this,g={};if(p)for(var A in p)g[A]=p[A];return g.keyPrefix=ai(p,E._defaultConfig),Br()?(E._dbInfo=g,g.serializer=Wr,H.resolve()):H.reject()}function Ut(p){var E=this,g=E.ready().then(function(){for(var A=E._dbInfo.keyPrefix,D=localStorage.length-1;D>=0;D--){var S=localStorage.key(D);S.indexOf(A)===0&&localStorage.removeItem(S)}});return N(g,p),g}function si(p,E){var g=this;p=ue(p);var A=g.ready().then(function(){var D=g._dbInfo,S=localStorage.getItem(D.keyPrefix+p);return S&&(S=D.serializer.deserialize(S)),S});return N(A,E),A}function Li(p,E){var g=this,A=g.ready().then(function(){for(var D=g._dbInfo,S=D.keyPrefix,M=S.length,j=localStorage.length,q=1,Y=0;Y<j;Y++){var z=localStorage.key(Y);if(z.indexOf(S)===0){var ne=localStorage.getItem(z);if(ne&&(ne=D.serializer.deserialize(ne)),ne=p(ne,z.substring(M),q++),ne!==void 0)return ne}}});return N(A,E),A}function ir(p,E){var g=this,A=g.ready().then(function(){var D=g._dbInfo,S;try{S=localStorage.key(p)}catch(M){S=null}return S&&(S=S.substring(D.keyPrefix.length)),S});return N(A,E),A}function oi(p){var E=this,g=E.ready().then(function(){for(var A=E._dbInfo,D=localStorage.length,S=[],M=0;M<D;M++){var j=localStorage.key(M);j.indexOf(A.keyPrefix)===0&&S.push(j.substring(A.keyPrefix.length))}return S});return N(g,p),g}function li(p){var E=this,g=E.keys().then(function(A){return A.length});return N(g,p),g}function ae(p,E){var g=this;p=ue(p);var A=g.ready().then(function(){var D=g._dbInfo;localStorage.removeItem(D.keyPrefix+p)});return N(A,E),A}function T(p,E,g){var A=this;p=ue(p);var D=A.ready().then(function(){E===void 0&&(E=null);var S=E;return new H(function(M,j){var q=A._dbInfo;q.serializer.serialize(E,function(Y,z){if(z)j(z);else try{localStorage.setItem(q.keyPrefix+p,Y),M(S)}catch(ne){(ne.name==="QuotaExceededError"||ne.name==="NS_ERROR_DOM_QUOTA_REACHED")&&j(ne),j(ne)}})})});return N(D,g),D}function V(p,E){if(E=Q.apply(this,arguments),p=typeof p!="function"&&p||{},!p.name){var g=this.config();p.name=p.name||g.name,p.storeName=p.storeName||g.storeName}var A=this,D;return p.name?D=new H(function(S){p.storeName?S(ai(p,A._defaultConfig)):S(p.name+"/")}).then(function(S){for(var M=localStorage.length-1;M>=0;M--){var j=localStorage.key(M);j.indexOf(S)===0&&localStorage.removeItem(j)}}):D=H.reject("Invalid arguments"),N(D,E),D}var ie={_driver:"localStorageWrapper",_initStorage:Ri,_support:Hr(),iterate:Li,getItem:si,setItem:T,removeItem:ae,clear:Ut,length:li,key:ir,keys:oi,dropInstance:V},Fe=function(E,g){return E===g||typeof E=="number"&&typeof g=="number"&&isNaN(E)&&isNaN(g)},et=function(E,g){for(var A=E.length,D=0;D<A;){if(Fe(E[D],g))return!0;D++}return!1},Ye=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"},Xe={},bt={},Lt={INDEXEDDB:Qt,WEBSQL:ft,LOCALSTORAGE:ie},tt=[Lt.INDEXEDDB._driver,Lt.WEBSQL._driver,Lt.LOCALSTORAGE._driver],Cr=["dropInstance"],jr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Cr),Tn={description:"",driver:tt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Sn(p,E){p[E]=function(){var g=arguments;return p.ready().then(function(){return p[E].apply(p,g)})}}function ui(){for(var p=1;p<arguments.length;p++){var E=arguments[p];if(E)for(var g in E)E.hasOwnProperty(g)&&(Ye(E[g])?arguments[0][g]=E[g].slice():arguments[0][g]=E[g])}return arguments[0]}var An=(function(){function p(E){y(this,p);for(var g in Lt)if(Lt.hasOwnProperty(g)){var A=Lt[g],D=A._driver;this[g]=D,Xe[D]||this.defineDriver(A)}this._defaultConfig=ui({},Tn),this._config=ui({},this._defaultConfig,E),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return p.prototype.config=function(g){if((typeof g=="undefined"?"undefined":m(g))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var A in g){if(A==="storeName"&&(g[A]=g[A].replace(/\W/g,"_")),A==="version"&&typeof g[A]!="number")return new Error("Database version must be a number.");this._config[A]=g[A]}return"driver"in g&&g.driver?this.setDriver(this._config.driver):!0}else return typeof g=="string"?this._config[g]:this._config},p.prototype.defineDriver=function(g,A,D){var S=new H(function(M,j){try{var q=g._driver,Y=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!g._driver){j(Y);return}for(var z=jr.concat("_initStorage"),ne=0,ye=z.length;ne<ye;ne++){var Ie=z[ne],Oe=!et(Cr,Ie);if((Oe||g[Ie])&&typeof g[Ie]!="function"){j(Y);return}}var $e=function(){for(var ci=function(Pn){return function(){var Ia=new Error("Method "+Pn+" is not implemented by the current driver"),Bi=H.reject(Ia);return N(Bi,arguments[arguments.length-1]),Bi}},Pr=0,Cn=Cr.length;Pr<Cn;Pr++){var fi=Cr[Pr];g[fi]||(g[fi]=ci(fi))}};$e();var Ue=function(ci){Xe[q]&&console.info("Redefining LocalForage driver: "+q),Xe[q]=g,bt[q]=ci,M()};"_support"in g?g._support&&typeof g._support=="function"?g._support().then(Ue,j):Ue(!!g._support):Ue(!0)}catch(xt){j(xt)}});return B(S,A,D),S},p.prototype.driver=function(){return this._driver||null},p.prototype.getDriver=function(g,A,D){var S=Xe[g]?H.resolve(Xe[g]):H.reject(new Error("Driver not found."));return B(S,A,D),S},p.prototype.getSerializer=function(g){var A=H.resolve(Wr);return B(A,g),A},p.prototype.ready=function(g){var A=this,D=A._driverSet.then(function(){return A._ready===null&&(A._ready=A._initDriver()),A._ready});return B(D,g,g),D},p.prototype.setDriver=function(g,A,D){var S=this;Ye(g)||(g=[g]);var M=this._getSupportedDrivers(g);function j(){S._config.driver=S.driver()}function q(ne){return S._extend(ne),j(),S._ready=S._initStorage(S._config),S._ready}function Y(ne){return function(){var ye=0;function Ie(){for(;ye<ne.length;){var Oe=ne[ye];return ye++,S._dbInfo=null,S._ready=null,S.getDriver(Oe).then(q).catch(Ie)}j();var $e=new Error("No available storage method found.");return S._driverSet=H.reject($e),S._driverSet}return Ie()}}var z=this._driverSet!==null?this._driverSet.catch(function(){return H.resolve()}):H.resolve();return this._driverSet=z.then(function(){var ne=M[0];return S._dbInfo=null,S._ready=null,S.getDriver(ne).then(function(ye){S._driver=ye._driver,j(),S._wrapLibraryMethodsWithReady(),S._initDriver=Y(M)})}).catch(function(){j();var ne=new Error("No available storage method found.");return S._driverSet=H.reject(ne),S._driverSet}),B(this._driverSet,A,D),this._driverSet},p.prototype.supports=function(g){return!!bt[g]},p.prototype._extend=function(g){ui(this,g)},p.prototype._getSupportedDrivers=function(g){for(var A=[],D=0,S=g.length;D<S;D++){var M=g[D];this.supports(M)&&A.push(M)}return A},p.prototype._wrapLibraryMethodsWithReady=function(){for(var g=0,A=jr.length;g<A;g++)Sn(this,jr[g])},p.prototype.createInstance=function(g){return new p(g)},p})(),yt=new An;u.exports=yt},{3:3}]},{},[4])(4)})});var oo=qa((so,Gn)=>{(function(l,t){"use strict";typeof Gn=="object"&&typeof Gn.exports=="object"?Gn.exports=l.document?t(l,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return t(r)}:t(l)})(typeof window!="undefined"?window:so,function(l,t){"use strict";var r=[],n=Object.getPrototypeOf,u=r.slice,d=r.flat?function(e){return r.flat.call(e)}:function(e){return r.concat.apply([],e)},m=r.push,y=r.indexOf,b={},P=b.toString,W=b.hasOwnProperty,K=W.toString,H=K.call(Object),N={},B=function(i){return typeof i=="function"&&typeof i.nodeType!="number"&&typeof i.item!="function"},ue=function(i){return i!=null&&i===i.window},Q=l.document,xe={type:!0,src:!0,nonce:!0,noModule:!0};function ke(e,i,a){a=a||Q;var o,c,f=a.createElement("script");if(f.text=e,i)for(o in xe)c=i[o]||i.getAttribute&&i.getAttribute(o),c&&f.setAttribute(o,c);a.head.appendChild(f).parentNode.removeChild(f)}function fe(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?b[P.call(e)]||"object":typeof e}var de="3.7.1",He=/HTML$/i,s=function(e,i){return new s.fn.init(e,i)};s.fn=s.prototype={jquery:de,constructor:s,length:0,toArray:function(){return u.call(this)},get:function(e){return e==null?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var i=s.merge(this.constructor(),e);return i.prevObject=this,i},each:function(e){return s.each(this,e)},map:function(e){return this.pushStack(s.map(this,function(i,a){return e.call(i,a,i)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(s.grep(this,function(e,i){return(i+1)%2}))},odd:function(){return this.pushStack(s.grep(this,function(e,i){return i%2}))},eq:function(e){var i=this.length,a=+e+(e<0?i:0);return this.pushStack(a>=0&&a<i?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:m,sort:r.sort,splice:r.splice},s.extend=s.fn.extend=function(){var e,i,a,o,c,f,h=arguments[0]||{},w=1,x=arguments.length,C=!1;for(typeof h=="boolean"&&(C=h,h=arguments[w]||{},w++),typeof h!="object"&&!B(h)&&(h={}),w===x&&(h=this,w--);w<x;w++)if((e=arguments[w])!=null)for(i in e)o=e[i],!(i==="__proto__"||h===o)&&(C&&o&&(s.isPlainObject(o)||(c=Array.isArray(o)))?(a=h[i],c&&!Array.isArray(a)?f=[]:!c&&!s.isPlainObject(a)?f={}:f=a,c=!1,h[i]=s.extend(C,f,o)):o!==void 0&&(h[i]=o));return h},s.extend({expando:"jQuery"+(de+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var i,a;return!e||P.call(e)!=="[object Object]"?!1:(i=n(e),i?(a=W.call(i,"constructor")&&i.constructor,typeof a=="function"&&K.call(a)===H):!0)},isEmptyObject:function(e){var i;for(i in e)return!1;return!0},globalEval:function(e,i,a){ke(e,{nonce:i&&i.nonce},a)},each:function(e,i){var a,o=0;if(le(e))for(a=e.length;o<a&&i.call(e[o],o,e[o])!==!1;o++);else for(o in e)if(i.call(e[o],o,e[o])===!1)break;return e},text:function(e){var i,a="",o=0,c=e.nodeType;if(!c)for(;i=e[o++];)a+=s.text(i);return c===1||c===11?e.textContent:c===9?e.documentElement.textContent:c===3||c===4?e.nodeValue:a},makeArray:function(e,i){var a=i||[];return e!=null&&(le(Object(e))?s.merge(a,typeof e=="string"?[e]:e):m.call(a,e)),a},inArray:function(e,i,a){return i==null?-1:y.call(i,e,a)},isXMLDoc:function(e){var i=e&&e.namespaceURI,a=e&&(e.ownerDocument||e).documentElement;return!He.test(i||a&&a.nodeName||"HTML")},merge:function(e,i){for(var a=+i.length,o=0,c=e.length;o<a;o++)e[c++]=i[o];return e.length=c,e},grep:function(e,i,a){for(var o,c=[],f=0,h=e.length,w=!a;f<h;f++)o=!i(e[f],f),o!==w&&c.push(e[f]);return c},map:function(e,i,a){var o,c,f=0,h=[];if(le(e))for(o=e.length;f<o;f++)c=i(e[f],f,a),c!=null&&h.push(c);else for(f in e)c=i(e[f],f,a),c!=null&&h.push(c);return d(h)},guid:1,support:N}),typeof Symbol=="function"&&(s.fn[Symbol.iterator]=r[Symbol.iterator]),s.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,i){b["[object "+i+"]"]=i.toLowerCase()});function le(e){var i=!!e&&"length"in e&&e.length,a=fe(e);return B(e)||ue(e)?!1:a==="array"||i===0||typeof i=="number"&&i>0&&i-1 in e}function J(e,i){return e.nodeName&&e.nodeName.toLowerCase()===i.toLowerCase()}var De=r.pop,Ze=r.sort,Me=r.splice,ge="[\\x20\\t\\r\\n\\f]",Qe=new RegExp("^"+ge+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ge+"+$","g");s.contains=function(e,i){var a=i&&i.parentNode;return e===a||!!(a&&a.nodeType===1&&(e.contains?e.contains(a):e.compareDocumentPosition&&e.compareDocumentPosition(a)&16))};var _t=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function xr(e,i){return i?e==="\0"?"\uFFFD":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}s.escapeSelector=function(e){return(e+"").replace(_t,xr)};var ht=Q,wr=m;(function(){var e,i,a,o,c,f=wr,h,w,x,C,I,U=s.expando,L=0,G=0,me=kn(),Re=kn(),we=kn(),dt=kn(),it=function(v,_){return v===_&&(c=!0),0},fr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",dr="(?:\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ce="\\["+ge+"*("+dr+")(?:"+ge+"*([*^$|!~]?=)"+ge+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+dr+"))|)"+ge+"*\\]",di=":("+dr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ce+")*)|.*)\\)|)",Le=new RegExp(ge+"+","g"),Je=new RegExp("^"+ge+"*,"+ge+"*"),zi=new RegExp("^"+ge+"*([>+~]|"+ge+")"+ge+"*"),$a=new RegExp(ge+"|>"),hr=new RegExp(di),Gi=new RegExp("^"+dr+"$"),pr={ID:new RegExp("^#("+dr+")"),CLASS:new RegExp("^\\.("+dr+")"),TAG:new RegExp("^("+dr+"|[*])"),ATTR:new RegExp("^"+Ce),PSEUDO:new RegExp("^"+di),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ge+"*(even|odd|(([+-]|)(\\d*)n|)"+ge+"*(?:([+-]|)"+ge+"*(\\d+)|))"+ge+"*\\)|)","i"),bool:new RegExp("^(?:"+fr+")$","i"),needsContext:new RegExp("^"+ge+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ge+"*((?:-\\d)?\\d*)"+ge+"*\\)|)(?=[^-]|$)","i")},zr=/^(?:input|select|textarea|button)$/i,Gr=/^h\d$/i,jt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ha=/[+~]/,kr=new RegExp("\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\([^\\r\\n\\f])","g"),Dr=function(v,_){var R="0x"+v.slice(1)-65536;return _||(R<0?String.fromCharCode(R+65536):String.fromCharCode(R>>10|55296,R&1023|56320))},Wl=function(){Vr()},$l=Rn(function(v){return v.disabled===!0&&J(v,"fieldset")},{dir:"parentNode",next:"legend"});function Hl(){try{return h.activeElement}catch(v){}}try{f.apply(r=u.call(ht.childNodes),ht.childNodes),r[ht.childNodes.length].nodeType}catch(v){f={apply:function(_,R){wr.apply(_,u.call(R))},call:function(_){wr.apply(_,u.call(arguments,1))}}}function We(v,_,R,F){var O,X,Z,se,ee,_e,he,ve=_&&_.ownerDocument,Te=_?_.nodeType:9;if(R=R||[],typeof v!="string"||!v||Te!==1&&Te!==9&&Te!==11)return R;if(!F&&(Vr(_),_=_||h,x)){if(Te!==11&&(ee=jt.exec(v)))if(O=ee[1]){if(Te===9)if(Z=_.getElementById(O)){if(Z.id===O)return f.call(R,Z),R}else return R;else if(ve&&(Z=ve.getElementById(O))&&We.contains(_,Z)&&Z.id===O)return f.call(R,Z),R}else{if(ee[2])return f.apply(R,_.getElementsByTagName(v)),R;if((O=ee[3])&&_.getElementsByClassName)return f.apply(R,_.getElementsByClassName(O)),R}if(!dt[v+" "]&&(!C||!C.test(v))){if(he=v,ve=_,Te===1&&($a.test(v)||zi.test(v))){for(ve=Ha.test(v)&&Ba(_.parentNode)||_,(ve!=_||!N.scope)&&((se=_.getAttribute("id"))?se=s.escapeSelector(se):_.setAttribute("id",se=U)),_e=Vi(v),X=_e.length;X--;)_e[X]=(se?"#"+se:":scope")+" "+Dn(_e[X]);he=_e.join(",")}try{return f.apply(R,ve.querySelectorAll(he)),R}catch(ce){dt(v,!0)}finally{se===U&&_.removeAttribute("id")}}}return js(v.replace(Qe,"$1"),_,R,F)}function kn(){var v=[];function _(R,F){return v.push(R+" ")>i.cacheLength&&delete _[v.shift()],_[R+" "]=F}return _}function nr(v){return v[U]=!0,v}function Fi(v){var _=h.createElement("fieldset");try{return!!v(_)}catch(R){return!1}finally{_.parentNode&&_.parentNode.removeChild(_),_=null}}function Bl(v){return function(_){return J(_,"input")&&_.type===v}}function jl(v){return function(_){return(J(_,"input")||J(_,"button"))&&_.type===v}}function Hs(v){return function(_){return"form"in _?_.parentNode&&_.disabled===!1?"label"in _?"label"in _.parentNode?_.parentNode.disabled===v:_.disabled===v:_.isDisabled===v||_.isDisabled!==!v&&$l(_)===v:_.disabled===v:"label"in _?_.disabled===v:!1}}function hi(v){return nr(function(_){return _=+_,nr(function(R,F){for(var O,X=v([],R.length,_),Z=X.length;Z--;)R[O=X[Z]]&&(R[O]=!(F[O]=R[O]))})})}function Ba(v){return v&&typeof v.getElementsByTagName!="undefined"&&v}function Vr(v){var _,R=v?v.ownerDocument||v:ht;return R==h||R.nodeType!==9||!R.documentElement||(h=R,w=h.documentElement,x=!s.isXMLDoc(h),I=w.matches||w.webkitMatchesSelector||w.msMatchesSelector,w.msMatchesSelector&&ht!=h&&(_=h.defaultView)&&_.top!==_&&_.addEventListener("unload",Wl),N.getById=Fi(function(F){return w.appendChild(F).id=s.expando,!h.getElementsByName||!h.getElementsByName(s.expando).length}),N.disconnectedMatch=Fi(function(F){return I.call(F,"*")}),N.scope=Fi(function(){return h.querySelectorAll(":scope")}),N.cssHas=Fi(function(){try{return h.querySelector(":has(*,:jqfake)"),!1}catch(F){return!0}}),N.getById?(i.filter.ID=function(F){var O=F.replace(kr,Dr);return function(X){return X.getAttribute("id")===O}},i.find.ID=function(F,O){if(typeof O.getElementById!="undefined"&&x){var X=O.getElementById(F);return X?[X]:[]}}):(i.filter.ID=function(F){var O=F.replace(kr,Dr);return function(X){var Z=typeof X.getAttributeNode!="undefined"&&X.getAttributeNode("id");return Z&&Z.value===O}},i.find.ID=function(F,O){if(typeof O.getElementById!="undefined"&&x){var X,Z,se,ee=O.getElementById(F);if(ee){if(X=ee.getAttributeNode("id"),X&&X.value===F)return[ee];for(se=O.getElementsByName(F),Z=0;ee=se[Z++];)if(X=ee.getAttributeNode("id"),X&&X.value===F)return[ee]}return[]}}),i.find.TAG=function(F,O){return typeof O.getElementsByTagName!="undefined"?O.getElementsByTagName(F):O.querySelectorAll(F)},i.find.CLASS=function(F,O){if(typeof O.getElementsByClassName!="undefined"&&x)return O.getElementsByClassName(F)},C=[],Fi(function(F){var O;w.appendChild(F).innerHTML="<a id='"+U+"' href='' disabled='disabled'></a><select id='"+U+"-\r\\' disabled='disabled'><option selected=''></option></select>",F.querySelectorAll("[selected]").length||C.push("\\["+ge+"*(?:value|"+fr+")"),F.querySelectorAll("[id~="+U+"-]").length||C.push("~="),F.querySelectorAll("a#"+U+"+*").length||C.push(".#.+[+~]"),F.querySelectorAll(":checked").length||C.push(":checked"),O=h.createElement("input"),O.setAttribute("type","hidden"),F.appendChild(O).setAttribute("name","D"),w.appendChild(F).disabled=!0,F.querySelectorAll(":disabled").length!==2&&C.push(":enabled",":disabled"),O=h.createElement("input"),O.setAttribute("name",""),F.appendChild(O),F.querySelectorAll("[name='']").length||C.push("\\["+ge+"*name"+ge+"*="+ge+`*(?:''|"")`)}),N.cssHas||C.push(":has"),C=C.length&&new RegExp(C.join("|")),it=function(F,O){if(F===O)return c=!0,0;var X=!F.compareDocumentPosition-!O.compareDocumentPosition;return X||(X=(F.ownerDocument||F)==(O.ownerDocument||O)?F.compareDocumentPosition(O):1,X&1||!N.sortDetached&&O.compareDocumentPosition(F)===X?F===h||F.ownerDocument==ht&&We.contains(ht,F)?-1:O===h||O.ownerDocument==ht&&We.contains(ht,O)?1:o?y.call(o,F)-y.call(o,O):0:X&4?-1:1)}),h}We.matches=function(v,_){return We(v,null,null,_)},We.matchesSelector=function(v,_){if(Vr(v),x&&!dt[_+" "]&&(!C||!C.test(_)))try{var R=I.call(v,_);if(R||N.disconnectedMatch||v.document&&v.document.nodeType!==11)return R}catch(F){dt(_,!0)}return We(_,h,null,[v]).length>0},We.contains=function(v,_){return(v.ownerDocument||v)!=h&&Vr(v),s.contains(v,_)},We.attr=function(v,_){(v.ownerDocument||v)!=h&&Vr(v);var R=i.attrHandle[_.toLowerCase()],F=R&&W.call(i.attrHandle,_.toLowerCase())?R(v,_,!x):void 0;return F!==void 0?F:v.getAttribute(_)},We.error=function(v){throw new Error("Syntax error, unrecognized expression: "+v)},s.uniqueSort=function(v){var _,R=[],F=0,O=0;if(c=!N.sortStable,o=!N.sortStable&&u.call(v,0),Ze.call(v,it),c){for(;_=v[O++];)_===v[O]&&(F=R.push(O));for(;F--;)Me.call(v,R[F],1)}return o=null,v},s.fn.uniqueSort=function(){return this.pushStack(s.uniqueSort(u.apply(this)))},i=s.expr={cacheLength:50,createPseudo:nr,match:pr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(v){return v[1]=v[1].replace(kr,Dr),v[3]=(v[3]||v[4]||v[5]||"").replace(kr,Dr),v[2]==="~="&&(v[3]=" "+v[3]+" "),v.slice(0,4)},CHILD:function(v){return v[1]=v[1].toLowerCase(),v[1].slice(0,3)==="nth"?(v[3]||We.error(v[0]),v[4]=+(v[4]?v[5]+(v[6]||1):2*(v[3]==="even"||v[3]==="odd")),v[5]=+(v[7]+v[8]||v[3]==="odd")):v[3]&&We.error(v[0]),v},PSEUDO:function(v){var _,R=!v[6]&&v[2];return pr.CHILD.test(v[0])?null:(v[3]?v[2]=v[4]||v[5]||"":R&&hr.test(R)&&(_=Vi(R,!0))&&(_=R.indexOf(")",R.length-_)-R.length)&&(v[0]=v[0].slice(0,_),v[2]=R.slice(0,_)),v.slice(0,3))}},filter:{TAG:function(v){var _=v.replace(kr,Dr).toLowerCase();return v==="*"?function(){return!0}:function(R){return J(R,_)}},CLASS:function(v){var _=me[v+" "];return _||(_=new RegExp("(^|"+ge+")"+v+"("+ge+"|$)"))&&me(v,function(R){return _.test(typeof R.className=="string"&&R.className||typeof R.getAttribute!="undefined"&&R.getAttribute("class")||"")})},ATTR:function(v,_,R){return function(F){var O=We.attr(F,v);return O==null?_==="!=":_?(O+="",_==="="?O===R:_==="!="?O!==R:_==="^="?R&&O.indexOf(R)===0:_==="*="?R&&O.indexOf(R)>-1:_==="$="?R&&O.slice(-R.length)===R:_==="~="?(" "+O.replace(Le," ")+" ").indexOf(R)>-1:_==="|="?O===R||O.slice(0,R.length+1)===R+"-":!1):!0}},CHILD:function(v,_,R,F,O){var X=v.slice(0,3)!=="nth",Z=v.slice(-4)!=="last",se=_==="of-type";return F===1&&O===0?function(ee){return!!ee.parentNode}:function(ee,_e,he){var ve,Te,ce,je,Ft,wt=X!==Z?"nextSibling":"previousSibling",zt=ee.parentNode,mr=se&&ee.nodeName.toLowerCase(),Ii=!he&&!se,St=!1;if(zt){if(X){for(;wt;){for(ce=ee;ce=ce[wt];)if(se?J(ce,mr):ce.nodeType===1)return!1;Ft=wt=v==="only"&&!Ft&&"nextSibling"}return!0}if(Ft=[Z?zt.firstChild:zt.lastChild],Z&&Ii){for(Te=zt[U]||(zt[U]={}),ve=Te[v]||[],je=ve[0]===L&&ve[1],St=je&&ve[2],ce=je&&zt.childNodes[je];ce=++je&&ce&&ce[wt]||(St=je=0)||Ft.pop();)if(ce.nodeType===1&&++St&&ce===ee){Te[v]=[L,je,St];break}}else if(Ii&&(Te=ee[U]||(ee[U]={}),ve=Te[v]||[],je=ve[0]===L&&ve[1],St=je),St===!1)for(;(ce=++je&&ce&&ce[wt]||(St=je=0)||Ft.pop())&&!((se?J(ce,mr):ce.nodeType===1)&&++St&&(Ii&&(Te=ce[U]||(ce[U]={}),Te[v]=[L,St]),ce===ee)););return St-=O,St===F||St%F===0&&St/F>=0}}},PSEUDO:function(v,_){var R,F=i.pseudos[v]||i.setFilters[v.toLowerCase()]||We.error("unsupported pseudo: "+v);return F[U]?F(_):F.length>1?(R=[v,v,"",_],i.setFilters.hasOwnProperty(v.toLowerCase())?nr(function(O,X){for(var Z,se=F(O,_),ee=se.length;ee--;)Z=y.call(O,se[ee]),O[Z]=!(X[Z]=se[ee])}):function(O){return F(O,0,R)}):F}},pseudos:{not:nr(function(v){var _=[],R=[],F=Va(v.replace(Qe,"$1"));return F[U]?nr(function(O,X,Z,se){for(var ee,_e=F(O,null,se,[]),he=O.length;he--;)(ee=_e[he])&&(O[he]=!(X[he]=ee))}):function(O,X,Z){return _[0]=O,F(_,null,Z,R),_[0]=null,!R.pop()}}),has:nr(function(v){return function(_){return We(v,_).length>0}}),contains:nr(function(v){return v=v.replace(kr,Dr),function(_){return(_.textContent||s.text(_)).indexOf(v)>-1}}),lang:nr(function(v){return Gi.test(v||"")||We.error("unsupported lang: "+v),v=v.replace(kr,Dr).toLowerCase(),function(_){var R;do if(R=x?_.lang:_.getAttribute("xml:lang")||_.getAttribute("lang"))return R=R.toLowerCase(),R===v||R.indexOf(v+"-")===0;while((_=_.parentNode)&&_.nodeType===1);return!1}}),target:function(v){var _=l.location&&l.location.hash;return _&&_.slice(1)===v.id},root:function(v){return v===w},focus:function(v){return v===Hl()&&h.hasFocus()&&!!(v.type||v.href||~v.tabIndex)},enabled:Hs(!1),disabled:Hs(!0),checked:function(v){return J(v,"input")&&!!v.checked||J(v,"option")&&!!v.selected},selected:function(v){return v.parentNode&&v.parentNode.selectedIndex,v.selected===!0},empty:function(v){for(v=v.firstChild;v;v=v.nextSibling)if(v.nodeType<6)return!1;return!0},parent:function(v){return!i.pseudos.empty(v)},header:function(v){return Gr.test(v.nodeName)},input:function(v){return zr.test(v.nodeName)},button:function(v){return J(v,"input")&&v.type==="button"||J(v,"button")},text:function(v){var _;return J(v,"input")&&v.type==="text"&&((_=v.getAttribute("type"))==null||_.toLowerCase()==="text")},first:hi(function(){return[0]}),last:hi(function(v,_){return[_-1]}),eq:hi(function(v,_,R){return[R<0?R+_:R]}),even:hi(function(v,_){for(var R=0;R<_;R+=2)v.push(R);return v}),odd:hi(function(v,_){for(var R=1;R<_;R+=2)v.push(R);return v}),lt:hi(function(v,_,R){var F;for(R<0?F=R+_:R>_?F=_:F=R;--F>=0;)v.push(F);return v}),gt:hi(function(v,_,R){for(var F=R<0?R+_:R;++F<_;)v.push(F);return v})}},i.pseudos.nth=i.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=Bl(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=jl(e);function Bs(){}Bs.prototype=i.filters=i.pseudos,i.setFilters=new Bs;function Vi(v,_){var R,F,O,X,Z,se,ee,_e=Re[v+" "];if(_e)return _?0:_e.slice(0);for(Z=v,se=[],ee=i.preFilter;Z;){(!R||(F=Je.exec(Z)))&&(F&&(Z=Z.slice(F[0].length)||Z),se.push(O=[])),R=!1,(F=zi.exec(Z))&&(R=F.shift(),O.push({value:R,type:F[0].replace(Qe," ")}),Z=Z.slice(R.length));for(X in i.filter)(F=pr[X].exec(Z))&&(!ee[X]||(F=ee[X](F)))&&(R=F.shift(),O.push({value:R,type:X,matches:F}),Z=Z.slice(R.length));if(!R)break}return _?Z.length:Z?We.error(v):Re(v,se).slice(0)}function Dn(v){for(var _=0,R=v.length,F="";_<R;_++)F+=v[_].value;return F}function Rn(v,_,R){var F=_.dir,O=_.next,X=O||F,Z=R&&X==="parentNode",se=G++;return _.first?function(ee,_e,he){for(;ee=ee[F];)if(ee.nodeType===1||Z)return v(ee,_e,he);return!1}:function(ee,_e,he){var ve,Te,ce=[L,se];if(he){for(;ee=ee[F];)if((ee.nodeType===1||Z)&&v(ee,_e,he))return!0}else for(;ee=ee[F];)if(ee.nodeType===1||Z)if(Te=ee[U]||(ee[U]={}),O&&J(ee,O))ee=ee[F]||ee;else{if((ve=Te[X])&&ve[0]===L&&ve[1]===se)return ce[2]=ve[2];if(Te[X]=ce,ce[2]=v(ee,_e,he))return!0}return!1}}function ja(v){return v.length>1?function(_,R,F){for(var O=v.length;O--;)if(!v[O](_,R,F))return!1;return!0}:v[0]}function zl(v,_,R){for(var F=0,O=_.length;F<O;F++)We(v,_[F],R);return R}function Ln(v,_,R,F,O){for(var X,Z=[],se=0,ee=v.length,_e=_!=null;se<ee;se++)(X=v[se])&&(!R||R(X,F,O))&&(Z.push(X),_e&&_.push(se));return Z}function za(v,_,R,F,O,X){return F&&!F[U]&&(F=za(F)),O&&!O[U]&&(O=za(O,X)),nr(function(Z,se,ee,_e){var he,ve,Te,ce,je=[],Ft=[],wt=se.length,zt=Z||zl(_||"*",ee.nodeType?[ee]:ee,[]),mr=v&&(Z||!_)?Ln(zt,je,v,ee,_e):zt;if(R?(ce=O||(Z?v:wt||F)?[]:se,R(mr,ce,ee,_e)):ce=mr,F)for(he=Ln(ce,Ft),F(he,[],ee,_e),ve=he.length;ve--;)(Te=he[ve])&&(ce[Ft[ve]]=!(mr[Ft[ve]]=Te));if(Z){if(O||v){if(O){for(he=[],ve=ce.length;ve--;)(Te=ce[ve])&&he.push(mr[ve]=Te);O(null,ce=[],he,_e)}for(ve=ce.length;ve--;)(Te=ce[ve])&&(he=O?y.call(Z,Te):je[ve])>-1&&(Z[he]=!(se[he]=Te))}}else ce=Ln(ce===se?ce.splice(wt,ce.length):ce),O?O(null,se,ce,_e):f.apply(se,ce)})}function Ga(v){for(var _,R,F,O=v.length,X=i.relative[v[0].type],Z=X||i.relative[" "],se=X?1:0,ee=Rn(function(ve){return ve===_},Z,!0),_e=Rn(function(ve){return y.call(_,ve)>-1},Z,!0),he=[function(ve,Te,ce){var je=!X&&(ce||Te!=a)||((_=Te).nodeType?ee(ve,Te,ce):_e(ve,Te,ce));return _=null,je}];se<O;se++)if(R=i.relative[v[se].type])he=[Rn(ja(he),R)];else{if(R=i.filter[v[se].type].apply(null,v[se].matches),R[U]){for(F=++se;F<O&&!i.relative[v[F].type];F++);return za(se>1&&ja(he),se>1&&Dn(v.slice(0,se-1).concat({value:v[se-2].type===" "?"*":""})).replace(Qe,"$1"),R,se<F&&Ga(v.slice(se,F)),F<O&&Ga(v=v.slice(F)),F<O&&Dn(v))}he.push(R)}return ja(he)}function Gl(v,_){var R=_.length>0,F=v.length>0,O=function(X,Z,se,ee,_e){var he,ve,Te,ce=0,je="0",Ft=X&&[],wt=[],zt=a,mr=X||F&&i.find.TAG("*",_e),Ii=L+=zt==null?1:Math.random()||.1,St=mr.length;for(_e&&(a=Z==h||Z||_e);je!==St&&(he=mr[je])!=null;je++){if(F&&he){for(ve=0,!Z&&he.ownerDocument!=h&&(Vr(he),se=!x);Te=v[ve++];)if(Te(he,Z||h,se)){f.call(ee,he);break}_e&&(L=Ii)}R&&((he=!Te&&he)&&ce--,X&&Ft.push(he))}if(ce+=je,R&&je!==ce){for(ve=0;Te=_[ve++];)Te(Ft,wt,Z,se);if(X){if(ce>0)for(;je--;)Ft[je]||wt[je]||(wt[je]=De.call(ee));wt=Ln(wt)}f.apply(ee,wt),_e&&!X&&wt.length>0&&ce+_.length>1&&s.uniqueSort(ee)}return _e&&(L=Ii,a=zt),Ft};return R?nr(O):O}function Va(v,_){var R,F=[],O=[],X=we[v+" "];if(!X){for(_||(_=Vi(v)),R=_.length;R--;)X=Ga(_[R]),X[U]?F.push(X):O.push(X);X=we(v,Gl(O,F)),X.selector=v}return X}function js(v,_,R,F){var O,X,Z,se,ee,_e=typeof v=="function"&&v,he=!F&&Vi(v=_e.selector||v);if(R=R||[],he.length===1){if(X=he[0]=he[0].slice(0),X.length>2&&(Z=X[0]).type==="ID"&&_.nodeType===9&&x&&i.relative[X[1].type]){if(_=(i.find.ID(Z.matches[0].replace(kr,Dr),_)||[])[0],_)_e&&(_=_.parentNode);else return R;v=v.slice(X.shift().value.length)}for(O=pr.needsContext.test(v)?0:X.length;O--&&(Z=X[O],!i.relative[se=Z.type]);)if((ee=i.find[se])&&(F=ee(Z.matches[0].replace(kr,Dr),Ha.test(X[0].type)&&Ba(_.parentNode)||_))){if(X.splice(O,1),v=F.length&&Dn(X),!v)return f.apply(R,F),R;break}}return(_e||Va(v,he))(F,_,!x,R,!_||Ha.test(v)&&Ba(_.parentNode)||_),R}N.sortStable=U.split("").sort(it).join("")===U,Vr(),N.sortDetached=Fi(function(v){return v.compareDocumentPosition(h.createElement("fieldset"))&1}),s.find=We,s.expr[":"]=s.expr.pseudos,s.unique=s.uniqueSort,We.compile=Va,We.select=js,We.setDocument=Vr,We.tokenize=Vi,We.escape=s.escapeSelector,We.getText=s.text,We.isXML=s.isXMLDoc,We.selectors=s.expr,We.support=s.support,We.uniqueSort=s.uniqueSort})();var pt=function(e,i,a){for(var o=[],c=a!==void 0;(e=e[i])&&e.nodeType!==9;)if(e.nodeType===1){if(c&&s(e).is(a))break;o.push(e)}return o},Jr=function(e,i){for(var a=[];e;e=e.nextSibling)e.nodeType===1&&e!==i&&a.push(e);return a},Kr=s.expr.match.needsContext,Ve=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function mt(e,i,a){return B(i)?s.grep(e,function(o,c){return!!i.call(o,c,o)!==a}):i.nodeType?s.grep(e,function(o){return o===i!==a}):typeof i!="string"?s.grep(e,function(o){return y.call(i,o)>-1!==a}):s.filter(i,e,a)}s.filter=function(e,i,a){var o=i[0];return a&&(e=":not("+e+")"),i.length===1&&o.nodeType===1?s.find.matchesSelector(o,e)?[o]:[]:s.find.matches(e,s.grep(i,function(c){return c.nodeType===1}))},s.fn.extend({find:function(e){var i,a,o=this.length,c=this;if(typeof e!="string")return this.pushStack(s(e).filter(function(){for(i=0;i<o;i++)if(s.contains(c[i],this))return!0}));for(a=this.pushStack([]),i=0;i<o;i++)s.find(e,c[i],a);return o>1?s.uniqueSort(a):a},filter:function(e){return this.pushStack(mt(this,e||[],!1))},not:function(e){return this.pushStack(mt(this,e||[],!0))},is:function(e){return!!mt(this,typeof e=="string"&&Kr.test(e)?s(e):e||[],!1).length}});var qe,Ci=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ze=s.fn.init=function(e,i,a){var o,c;if(!e)return this;if(a=a||qe,typeof e=="string")if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?o=[null,e,null]:o=Ci.exec(e),o&&(o[1]||!i))if(o[1]){if(i=i instanceof s?i[0]:i,s.merge(this,s.parseHTML(o[1],i&&i.nodeType?i.ownerDocument||i:Q,!0)),Ve.test(o[1])&&s.isPlainObject(i))for(o in i)B(this[o])?this[o](i[o]):this.attr(o,i[o]);return this}else return c=Q.getElementById(o[2]),c&&(this[0]=c,this.length=1),this;else return!i||i.jquery?(i||a).find(e):this.constructor(i).find(e);else{if(e.nodeType)return this[0]=e,this.length=1,this;if(B(e))return a.ready!==void 0?a.ready(e):e(s)}return s.makeArray(e,this)};ze.prototype=s.fn,qe=s(Q);var Er=/^(?:parents|prev(?:Until|All))/,Zr={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({has:function(e){var i=s(e,this),a=i.length;return this.filter(function(){for(var o=0;o<a;o++)if(s.contains(this,i[o]))return!0})},closest:function(e,i){var a,o=0,c=this.length,f=[],h=typeof e!="string"&&s(e);if(!Kr.test(e)){for(;o<c;o++)for(a=this[o];a&&a!==i;a=a.parentNode)if(a.nodeType<11&&(h?h.index(a)>-1:a.nodeType===1&&s.find.matchesSelector(a,e))){f.push(a);break}}return this.pushStack(f.length>1?s.uniqueSort(f):f)},index:function(e){return e?typeof e=="string"?y.call(s(e),this[0]):y.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,i){return this.pushStack(s.uniqueSort(s.merge(this.get(),s(e,i))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function ei(e,i){for(;(e=e[i])&&e.nodeType!==1;);return e}s.each({parent:function(e){var i=e.parentNode;return i&&i.nodeType!==11?i:null},parents:function(e){return pt(e,"parentNode")},parentsUntil:function(e,i,a){return pt(e,"parentNode",a)},next:function(e){return ei(e,"nextSibling")},prev:function(e){return ei(e,"previousSibling")},nextAll:function(e){return pt(e,"nextSibling")},prevAll:function(e){return pt(e,"previousSibling")},nextUntil:function(e,i,a){return pt(e,"nextSibling",a)},prevUntil:function(e,i,a){return pt(e,"previousSibling",a)},siblings:function(e){return Jr((e.parentNode||{}).firstChild,e)},children:function(e){return Jr(e.firstChild)},contents:function(e){return e.contentDocument!=null&&n(e.contentDocument)?e.contentDocument:(J(e,"template")&&(e=e.content||e),s.merge([],e.childNodes))}},function(e,i){s.fn[e]=function(a,o){var c=s.map(this,i,a);return e.slice(-5)!=="Until"&&(o=a),o&&typeof o=="string"&&(c=s.filter(o,c)),this.length>1&&(Zr[e]||s.uniqueSort(c),Er.test(e)&&c.reverse()),this.pushStack(c)}});var gt=/[^\x20\t\r\n\f]+/g;function Pi(e){var i={};return s.each(e.match(gt)||[],function(a,o){i[o]=!0}),i}s.Callbacks=function(e){e=typeof e=="string"?Pi(e):s.extend({},e);var i,a,o,c,f=[],h=[],w=-1,x=function(){for(c=c||e.once,o=i=!0;h.length;w=-1)for(a=h.shift();++w<f.length;)f[w].apply(a[0],a[1])===!1&&e.stopOnFalse&&(w=f.length,a=!1);e.memory||(a=!1),i=!1,c&&(a?f=[]:f="")},C={add:function(){return f&&(a&&!i&&(w=f.length-1,h.push(a)),(function I(U){s.each(U,function(L,G){B(G)?(!e.unique||!C.has(G))&&f.push(G):G&&G.length&&fe(G)!=="string"&&I(G)})})(arguments),a&&!i&&x()),this},remove:function(){return s.each(arguments,function(I,U){for(var L;(L=s.inArray(U,f,L))>-1;)f.splice(L,1),L<=w&&w--}),this},has:function(I){return I?s.inArray(I,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return c=h=[],f=a="",this},disabled:function(){return!f},lock:function(){return c=h=[],!a&&!i&&(f=a=""),this},locked:function(){return!!c},fireWith:function(I,U){return c||(U=U||[],U=[I,U.slice?U.slice():U],h.push(U),i||x()),this},fire:function(){return C.fireWith(this,arguments),this},fired:function(){return!!o}};return C};function Xt(e){return e}function Ot(e){throw e}function Mr(e,i,a,o){var c;try{e&&B(c=e.promise)?c.call(e).done(i).fail(a):e&&B(c=e.then)?c.call(e,i,a):i.apply(void 0,[e].slice(o))}catch(f){a.apply(void 0,[f])}}s.extend({Deferred:function(e){var i=[["notify","progress",s.Callbacks("memory"),s.Callbacks("memory"),2],["resolve","done",s.Callbacks("once memory"),s.Callbacks("once memory"),0,"resolved"],["reject","fail",s.Callbacks("once memory"),s.Callbacks("once memory"),1,"rejected"]],a="pending",o={state:function(){return a},always:function(){return c.done(arguments).fail(arguments),this},catch:function(f){return o.then(null,f)},pipe:function(){var f=arguments;return s.Deferred(function(h){s.each(i,function(w,x){var C=B(f[x[4]])&&f[x[4]];c[x[1]](function(){var I=C&&C.apply(this,arguments);I&&B(I.promise)?I.promise().progress(h.notify).done(h.resolve).fail(h.reject):h[x[0]+"With"](this,C?[I]:arguments)})}),f=null}).promise()},then:function(f,h,w){var x=0;function C(I,U,L,G){return function(){var me=this,Re=arguments,we=function(){var it,fr;if(!(I<x)){if(it=L.apply(me,Re),it===U.promise())throw new TypeError("Thenable self-resolution");fr=it&&(typeof it=="object"||typeof it=="function")&&it.then,B(fr)?G?fr.call(it,C(x,U,Xt,G),C(x,U,Ot,G)):(x++,fr.call(it,C(x,U,Xt,G),C(x,U,Ot,G),C(x,U,Xt,U.notifyWith))):(L!==Xt&&(me=void 0,Re=[it]),(G||U.resolveWith)(me,Re))}},dt=G?we:function(){try{we()}catch(it){s.Deferred.exceptionHook&&s.Deferred.exceptionHook(it,dt.error),I+1>=x&&(L!==Ot&&(me=void 0,Re=[it]),U.rejectWith(me,Re))}};I?dt():(s.Deferred.getErrorHook?dt.error=s.Deferred.getErrorHook():s.Deferred.getStackHook&&(dt.error=s.Deferred.getStackHook()),l.setTimeout(dt))}}return s.Deferred(function(I){i[0][3].add(C(0,I,B(w)?w:Xt,I.notifyWith)),i[1][3].add(C(0,I,B(f)?f:Xt)),i[2][3].add(C(0,I,B(h)?h:Ot))}).promise()},promise:function(f){return f!=null?s.extend(f,o):o}},c={};return s.each(i,function(f,h){var w=h[2],x=h[5];o[h[1]]=w.add,x&&w.add(function(){a=x},i[3-f][2].disable,i[3-f][3].disable,i[0][2].lock,i[0][3].lock),w.add(h[3].fire),c[h[0]]=function(){return c[h[0]+"With"](this===c?void 0:this,arguments),this},c[h[0]+"With"]=w.fireWith}),o.promise(c),e&&e.call(c,c),c},when:function(e){var i=arguments.length,a=i,o=Array(a),c=u.call(arguments),f=s.Deferred(),h=function(w){return function(x){o[w]=this,c[w]=arguments.length>1?u.call(arguments):x,--i||f.resolveWith(o,c)}};if(i<=1&&(Mr(e,f.done(h(a)).resolve,f.reject,!i),f.state()==="pending"||B(c[a]&&c[a].then)))return f.then();for(;a--;)Mr(c[a],h(a),f.reject);return f.promise()}});var Qt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;s.Deferred.exceptionHook=function(e,i){l.console&&l.console.warn&&e&&Qt.test(e.name)&&l.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},s.readyException=function(e){l.setTimeout(function(){throw e})};var _r=s.Deferred();s.fn.ready=function(e){return _r.then(e).catch(function(i){s.readyException(i)}),this},s.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--s.readyWait:s.isReady)||(s.isReady=!0,!(e!==!0&&--s.readyWait>0)&&_r.resolveWith(Q,[s]))}}),s.ready.then=_r.then;function ot(){Q.removeEventListener("DOMContentLoaded",ot),l.removeEventListener("load",ot),s.ready()}Q.readyState==="complete"||Q.readyState!=="loading"&&!Q.documentElement.doScroll?l.setTimeout(s.ready):(Q.addEventListener("DOMContentLoaded",ot),l.addEventListener("load",ot));var at=function(e,i,a,o,c,f,h){var w=0,x=e.length,C=a==null;if(fe(a)==="object"){c=!0;for(w in a)at(e,i,w,a[w],!0,f,h)}else if(o!==void 0&&(c=!0,B(o)||(h=!0),C&&(h?(i.call(e,o),i=null):(C=i,i=function(I,U,L){return C.call(s(I),L)})),i))for(;w<x;w++)i(e[w],a,h?o:o.call(e[w],w,i(e[w],a)));return c?e:C?i.call(e):x?i(e[0],a):f},Tr=/^-ms-/,Jt=/-([a-z])/g;function Or(e,i){return i.toUpperCase()}function lt(e){return e.replace(Tr,"ms-").replace(Jt,Or)}var Kt=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function $t(){this.expando=s.expando+$t.uid++}$t.uid=1,$t.prototype={cache:function(e){var i=e[this.expando];return i||(i={},Kt(e)&&(e.nodeType?e[this.expando]=i:Object.defineProperty(e,this.expando,{value:i,configurable:!0}))),i},set:function(e,i,a){var o,c=this.cache(e);if(typeof i=="string")c[lt(i)]=a;else for(o in i)c[lt(o)]=i[o];return c},get:function(e,i){return i===void 0?this.cache(e):e[this.expando]&&e[this.expando][lt(i)]},access:function(e,i,a){return i===void 0||i&&typeof i=="string"&&a===void 0?this.get(e,i):(this.set(e,i,a),a!==void 0?a:i)},remove:function(e,i){var a,o=e[this.expando];if(o!==void 0){if(i!==void 0)for(Array.isArray(i)?i=i.map(lt):(i=lt(i),i=i in o?[i]:i.match(gt)||[]),a=i.length;a--;)delete o[i[a]];(i===void 0||s.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var i=e[this.expando];return i!==void 0&&!s.isEmptyObject(i)}};var te=new $t,Ge=new $t,Zt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ti=/[A-Z]/g;function ri(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:Zt.test(e)?JSON.parse(e):e}function Nr(e,i,a){var o;if(a===void 0&&e.nodeType===1)if(o="data-"+i.replace(ti,"-$&").toLowerCase(),a=e.getAttribute(o),typeof a=="string"){try{a=ri(a)}catch(c){}Ge.set(e,i,a)}else a=void 0;return a}s.extend({hasData:function(e){return Ge.hasData(e)||te.hasData(e)},data:function(e,i,a){return Ge.access(e,i,a)},removeData:function(e,i){Ge.remove(e,i)},_data:function(e,i,a){return te.access(e,i,a)},_removeData:function(e,i){te.remove(e,i)}}),s.fn.extend({data:function(e,i){var a,o,c,f=this[0],h=f&&f.attributes;if(e===void 0){if(this.length&&(c=Ge.get(f),f.nodeType===1&&!te.get(f,"hasDataAttrs"))){for(a=h.length;a--;)h[a]&&(o=h[a].name,o.indexOf("data-")===0&&(o=lt(o.slice(5)),Nr(f,o,c[o])));te.set(f,"hasDataAttrs",!0)}return c}return typeof e=="object"?this.each(function(){Ge.set(this,e)}):at(this,function(w){var x;if(f&&w===void 0)return x=Ge.get(f,e),x!==void 0||(x=Nr(f,e),x!==void 0)?x:void 0;this.each(function(){Ge.set(this,e,w)})},null,i,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ge.remove(this,e)})}}),s.extend({queue:function(e,i,a){var o;if(e)return i=(i||"fx")+"queue",o=te.get(e,i),a&&(!o||Array.isArray(a)?o=te.access(e,i,s.makeArray(a)):o.push(a)),o||[]},dequeue:function(e,i){i=i||"fx";var a=s.queue(e,i),o=a.length,c=a.shift(),f=s._queueHooks(e,i),h=function(){s.dequeue(e,i)};c==="inprogress"&&(c=a.shift(),o--),c&&(i==="fx"&&a.unshift("inprogress"),delete f.stop,c.call(e,h,f)),!o&&f&&f.empty.fire()},_queueHooks:function(e,i){var a=i+"queueHooks";return te.get(e,a)||te.access(e,a,{empty:s.Callbacks("once memory").add(function(){te.remove(e,[i+"queue",a])})})}}),s.fn.extend({queue:function(e,i){var a=2;return typeof e!="string"&&(i=e,e="fx",a--),arguments.length<a?s.queue(this[0],e):i===void 0?this:this.each(function(){var o=s.queue(this,e,i);s._queueHooks(this,e),e==="fx"&&o[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var a,o=1,c=s.Deferred(),f=this,h=this.length,w=function(){--o||c.resolveWith(f,[f])};for(typeof e!="string"&&(i=e,e=void 0),e=e||"fx";h--;)a=te.get(f[h],e+"queueHooks"),a&&a.empty&&(o++,a.empty.add(w));return w(),c.promise(i)}});var Sr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,er=new RegExp("^(?:([+-])=|)("+Sr+")([a-z%]*)$","i"),ut=["Top","Right","Bottom","Left"],Tt=Q.documentElement,rt=function(e){return s.contains(e.ownerDocument,e)},Ht={composed:!0};Tt.getRootNode&&(rt=function(e){return s.contains(e.ownerDocument,e)||e.getRootNode(Ht)===e.ownerDocument});var ur=function(e,i){return e=i||e,e.style.display==="none"||e.style.display===""&&rt(e)&&s.css(e,"display")==="none"};function Ur(e,i,a,o){var c,f,h=20,w=o?function(){return o.cur()}:function(){return s.css(e,i,"")},x=w(),C=a&&a[3]||(s.cssNumber[i]?"":"px"),I=e.nodeType&&(s.cssNumber[i]||C!=="px"&&+x)&&er.exec(s.css(e,i));if(I&&I[3]!==C){for(x=x/2,C=C||I[3],I=+x||1;h--;)s.style(e,i,I+C),(1-f)*(1-(f=w()/x||.5))<=0&&(h=0),I=I/f;I=I*2,s.style(e,i,I+C),a=a||[]}return a&&(I=+I||+x||0,c=a[1]?I+(a[1]+1)*a[2]:+a[2],o&&(o.unit=C,o.start=I,o.end=c)),c}var Wr={};function Ar(e){var i,a=e.ownerDocument,o=e.nodeName,c=Wr[o];return c||(i=a.body.appendChild(a.createElement(o)),c=s.css(i,"display"),i.parentNode.removeChild(i),c==="none"&&(c="block"),Wr[o]=c,c)}function Nt(e,i){for(var a,o,c=[],f=0,h=e.length;f<h;f++)o=e[f],o.style&&(a=o.style.display,i?(a==="none"&&(c[f]=te.get(o,"display")||null,c[f]||(o.style.display="")),o.style.display===""&&ur(o)&&(c[f]=Ar(o))):a!=="none"&&(c[f]="none",te.set(o,"display",a)));for(f=0;f<h;f++)c[f]!=null&&(e[f].style.display=c[f]);return e}s.fn.extend({show:function(){return Nt(this,!0)},hide:function(){return Nt(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){ur(this)?s(this).show():s(this).hide()})}});var vt=/^(?:checkbox|radio)$/i,cr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ki=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=Q.createDocumentFragment(),i=e.appendChild(Q.createElement("div")),a=Q.createElement("input");a.setAttribute("type","radio"),a.setAttribute("checked","checked"),a.setAttribute("name","t"),i.appendChild(a),N.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,i.innerHTML="<textarea>x</textarea>",N.noCloneChecked=!!i.cloneNode(!0).lastChild.defaultValue,i.innerHTML="<option></option>",N.option=!!i.lastChild})();var ct={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td,N.option||(ct.optgroup=ct.option=[1,"<select multiple='multiple'>","</select>"]);function Pe(e,i){var a;return typeof e.getElementsByTagName!="undefined"?a=e.getElementsByTagName(i||"*"):typeof e.querySelectorAll!="undefined"?a=e.querySelectorAll(i||"*"):a=[],i===void 0||i&&J(e,i)?s.merge([e],a):a}function Bt(e,i){for(var a=0,o=e.length;a<o;a++)te.set(e[a],"globalEval",!i||te.get(i[a],"globalEval"))}var Hi=/<|&#?\w+;/;function ii(e,i,a,o,c){for(var f,h,w,x,C,I,U=i.createDocumentFragment(),L=[],G=0,me=e.length;G<me;G++)if(f=e[G],f||f===0)if(fe(f)==="object")s.merge(L,f.nodeType?[f]:f);else if(!Hi.test(f))L.push(i.createTextNode(f));else{for(h=h||U.appendChild(i.createElement("div")),w=(cr.exec(f)||["",""])[1].toLowerCase(),x=ct[w]||ct._default,h.innerHTML=x[1]+s.htmlPrefilter(f)+x[2],I=x[0];I--;)h=h.lastChild;s.merge(L,h.childNodes),h=U.firstChild,h.textContent=""}for(U.textContent="",G=0;f=L[G++];){if(o&&s.inArray(f,o)>-1){c&&c.push(f);continue}if(C=rt(f),h=Pe(U.appendChild(f),"script"),C&&Bt(h),a)for(I=0;f=h[I++];)ki.test(f.type||"")&&a.push(f)}return U}var $r=/^([^.]*)(?:\.(.+)|)/;function tr(){return!0}function rr(){return!1}function ni(e,i,a,o,c,f){var h,w;if(typeof i=="object"){typeof a!="string"&&(o=o||a,a=void 0);for(w in i)ni(e,w,a,o,i[w],f);return e}if(o==null&&c==null?(c=a,o=a=void 0):c==null&&(typeof a=="string"?(c=o,o=void 0):(c=o,o=a,a=void 0)),c===!1)c=rr;else if(!c)return e;return f===1&&(h=c,c=function(x){return s().off(x),h.apply(this,arguments)},c.guid=h.guid||(h.guid=s.guid++)),e.each(function(){s.event.add(this,i,c,o,a)})}s.event={global:{},add:function(e,i,a,o,c){var f,h,w,x,C,I,U,L,G,me,Re,we=te.get(e);if(Kt(e))for(a.handler&&(f=a,a=f.handler,c=f.selector),c&&s.find.matchesSelector(Tt,c),a.guid||(a.guid=s.guid++),(x=we.events)||(x=we.events=Object.create(null)),(h=we.handle)||(h=we.handle=function(dt){return typeof s!="undefined"&&s.event.triggered!==dt.type?s.event.dispatch.apply(e,arguments):void 0}),i=(i||"").match(gt)||[""],C=i.length;C--;)w=$r.exec(i[C])||[],G=Re=w[1],me=(w[2]||"").split(".").sort(),G&&(U=s.event.special[G]||{},G=(c?U.delegateType:U.bindType)||G,U=s.event.special[G]||{},I=s.extend({type:G,origType:Re,data:o,handler:a,guid:a.guid,selector:c,needsContext:c&&s.expr.match.needsContext.test(c),namespace:me.join(".")},f),(L=x[G])||(L=x[G]=[],L.delegateCount=0,(!U.setup||U.setup.call(e,o,me,h)===!1)&&e.addEventListener&&e.addEventListener(G,h)),U.add&&(U.add.call(e,I),I.handler.guid||(I.handler.guid=a.guid)),c?L.splice(L.delegateCount++,0,I):L.push(I),s.event.global[G]=!0)},remove:function(e,i,a,o,c){var f,h,w,x,C,I,U,L,G,me,Re,we=te.hasData(e)&&te.get(e);if(!(!we||!(x=we.events))){for(i=(i||"").match(gt)||[""],C=i.length;C--;){if(w=$r.exec(i[C])||[],G=Re=w[1],me=(w[2]||"").split(".").sort(),!G){for(G in x)s.event.remove(e,G+i[C],a,o,!0);continue}for(U=s.event.special[G]||{},G=(o?U.delegateType:U.bindType)||G,L=x[G]||[],w=w[2]&&new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"),h=f=L.length;f--;)I=L[f],(c||Re===I.origType)&&(!a||a.guid===I.guid)&&(!w||w.test(I.namespace))&&(!o||o===I.selector||o==="**"&&I.selector)&&(L.splice(f,1),I.selector&&L.delegateCount--,U.remove&&U.remove.call(e,I));h&&!L.length&&((!U.teardown||U.teardown.call(e,me,we.handle)===!1)&&s.removeEvent(e,G,we.handle),delete x[G])}s.isEmptyObject(x)&&te.remove(e,"handle events")}},dispatch:function(e){var i,a,o,c,f,h,w=new Array(arguments.length),x=s.event.fix(e),C=(te.get(this,"events")||Object.create(null))[x.type]||[],I=s.event.special[x.type]||{};for(w[0]=x,i=1;i<arguments.length;i++)w[i]=arguments[i];if(x.delegateTarget=this,!(I.preDispatch&&I.preDispatch.call(this,x)===!1)){for(h=s.event.handlers.call(this,x,C),i=0;(c=h[i++])&&!x.isPropagationStopped();)for(x.currentTarget=c.elem,a=0;(f=c.handlers[a++])&&!x.isImmediatePropagationStopped();)(!x.rnamespace||f.namespace===!1||x.rnamespace.test(f.namespace))&&(x.handleObj=f,x.data=f.data,o=((s.event.special[f.origType]||{}).handle||f.handler).apply(c.elem,w),o!==void 0&&(x.result=o)===!1&&(x.preventDefault(),x.stopPropagation()));return I.postDispatch&&I.postDispatch.call(this,x),x.result}},handlers:function(e,i){var a,o,c,f,h,w=[],x=i.delegateCount,C=e.target;if(x&&C.nodeType&&!(e.type==="click"&&e.button>=1)){for(;C!==this;C=C.parentNode||this)if(C.nodeType===1&&!(e.type==="click"&&C.disabled===!0)){for(f=[],h={},a=0;a<x;a++)o=i[a],c=o.selector+" ",h[c]===void 0&&(h[c]=o.needsContext?s(c,this).index(C)>-1:s.find(c,this,null,[C]).length),h[c]&&f.push(o);f.length&&w.push({elem:C,handlers:f})}}return C=this,x<i.length&&w.push({elem:C,handlers:i.slice(x)}),w},addProp:function(e,i){Object.defineProperty(s.Event.prototype,e,{enumerable:!0,configurable:!0,get:B(i)?function(){if(this.originalEvent)return i(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(a){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:a})}})},fix:function(e){return e[s.expando]?e:new s.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var i=this||e;return vt.test(i.type)&&i.click&&J(i,"input")&&ft(i,"click",!0),!1},trigger:function(e){var i=this||e;return vt.test(i.type)&&i.click&&J(i,"input")&&ft(i,"click"),!0},_default:function(e){var i=e.target;return vt.test(i.type)&&i.click&&J(i,"input")&&te.get(i,"click")||J(i,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};function ft(e,i,a){if(!a){te.get(e,i)===void 0&&s.event.add(e,i,tr);return}te.set(e,i,!1),s.event.add(e,i,{namespace:!1,handler:function(o){var c,f=te.get(this,i);if(o.isTrigger&1&&this[i]){if(f)(s.event.special[i]||{}).delegateType&&o.stopPropagation();else if(f=u.call(arguments),te.set(this,i,f),this[i](),c=te.get(this,i),te.set(this,i,!1),f!==c)return o.stopImmediatePropagation(),o.preventDefault(),c}else f&&(te.set(this,i,s.event.trigger(f[0],f.slice(1),this)),o.stopPropagation(),o.isImmediatePropagationStopped=tr)}})}s.removeEvent=function(e,i,a){e.removeEventListener&&e.removeEventListener(i,a)},s.Event=function(e,i){if(!(this instanceof s.Event))return new s.Event(e,i);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?tr:rr,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,i&&s.extend(this,i),this.timeStamp=e&&e.timeStamp||Date.now(),this[s.expando]=!0},s.Event.prototype={constructor:s.Event,isDefaultPrevented:rr,isPropagationStopped:rr,isImmediatePropagationStopped:rr,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=tr,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=tr,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=tr,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},s.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},s.event.addProp),s.each({focus:"focusin",blur:"focusout"},function(e,i){function a(o){if(Q.documentMode){var c=te.get(this,"handle"),f=s.event.fix(o);f.type=o.type==="focusin"?"focus":"blur",f.isSimulated=!0,c(o),f.target===f.currentTarget&&c(f)}else s.event.simulate(i,o.target,s.event.fix(o))}s.event.special[e]={setup:function(){var o;if(ft(this,e,!0),Q.documentMode)o=te.get(this,i),o||this.addEventListener(i,a),te.set(this,i,(o||0)+1);else return!1},trigger:function(){return ft(this,e),!0},teardown:function(){var o;if(Q.documentMode)o=te.get(this,i)-1,o?te.set(this,i,o):(this.removeEventListener(i,a),te.remove(this,i));else return!1},_default:function(o){return te.get(o.target,e)},delegateType:i},s.event.special[i]={setup:function(){var o=this.ownerDocument||this.document||this,c=Q.documentMode?this:o,f=te.get(c,i);f||(Q.documentMode?this.addEventListener(i,a):o.addEventListener(e,a,!0)),te.set(c,i,(f||0)+1)},teardown:function(){var o=this.ownerDocument||this.document||this,c=Q.documentMode?this:o,f=te.get(c,i)-1;f?te.set(c,i,f):(Q.documentMode?this.removeEventListener(i,a):o.removeEventListener(e,a,!0),te.remove(c,i))}}}),s.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){s.event.special[e]={delegateType:i,bindType:i,handle:function(a){var o,c=this,f=a.relatedTarget,h=a.handleObj;return(!f||f!==c&&!s.contains(c,f))&&(a.type=h.origType,o=h.handler.apply(this,arguments),a.type=i),o}}}),s.fn.extend({on:function(e,i,a,o){return ni(this,e,i,a,o)},one:function(e,i,a,o){return ni(this,e,i,a,o,1)},off:function(e,i,a){var o,c;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,s(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if(typeof e=="object"){for(c in e)this.off(c,i,e[c]);return this}return(i===!1||typeof i=="function")&&(a=i,i=void 0),a===!1&&(a=rr),this.each(function(){s.event.remove(this,e,a,i)})}});var Hr=/<script|<style|<link/i,ai=/checked\s*(?:[^=]|=\s*.checked.)/i,Di=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Br(e,i){return J(e,"table")&&J(i.nodeType!==11?i:i.firstChild,"tr")&&s(e).children("tbody")[0]||e}function Ri(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function Ut(e){return(e.type||"").slice(0,5)==="true/"?e.type=e.type.slice(5):e.removeAttribute("type"),e}function si(e,i){var a,o,c,f,h,w,x;if(i.nodeType===1){if(te.hasData(e)&&(f=te.get(e),x=f.events,x)){te.remove(i,"handle events");for(c in x)for(a=0,o=x[c].length;a<o;a++)s.event.add(i,c,x[c][a])}Ge.hasData(e)&&(h=Ge.access(e),w=s.extend({},h),Ge.set(i,w))}}function Li(e,i){var a=i.nodeName.toLowerCase();a==="input"&&vt.test(e.type)?i.checked=e.checked:(a==="input"||a==="textarea")&&(i.defaultValue=e.defaultValue)}function ir(e,i,a,o){i=d(i);var c,f,h,w,x,C,I=0,U=e.length,L=U-1,G=i[0],me=B(G);if(me||U>1&&typeof G=="string"&&!N.checkClone&&ai.test(G))return e.each(function(Re){var we=e.eq(Re);me&&(i[0]=G.call(this,Re,we.html())),ir(we,i,a,o)});if(U&&(c=ii(i,e[0].ownerDocument,!1,e,o),f=c.firstChild,c.childNodes.length===1&&(c=f),f||o)){for(h=s.map(Pe(c,"script"),Ri),w=h.length;I<U;I++)x=c,I!==L&&(x=s.clone(x,!0,!0),w&&s.merge(h,Pe(x,"script"))),a.call(e[I],x,I);if(w)for(C=h[h.length-1].ownerDocument,s.map(h,Ut),I=0;I<w;I++)x=h[I],ki.test(x.type||"")&&!te.access(x,"globalEval")&&s.contains(C,x)&&(x.src&&(x.type||"").toLowerCase()!=="module"?s._evalUrl&&!x.noModule&&s._evalUrl(x.src,{nonce:x.nonce||x.getAttribute("nonce")},C):ke(x.textContent.replace(Di,""),x,C))}return e}function oi(e,i,a){for(var o,c=i?s.filter(i,e):e,f=0;(o=c[f])!=null;f++)!a&&o.nodeType===1&&s.cleanData(Pe(o)),o.parentNode&&(a&&rt(o)&&Bt(Pe(o,"script")),o.parentNode.removeChild(o));return e}s.extend({htmlPrefilter:function(e){return e},clone:function(e,i,a){var o,c,f,h,w=e.cloneNode(!0),x=rt(e);if(!N.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e))for(h=Pe(w),f=Pe(e),o=0,c=f.length;o<c;o++)Li(f[o],h[o]);if(i)if(a)for(f=f||Pe(e),h=h||Pe(w),o=0,c=f.length;o<c;o++)si(f[o],h[o]);else si(e,w);return h=Pe(w,"script"),h.length>0&&Bt(h,!x&&Pe(e,"script")),w},cleanData:function(e){for(var i,a,o,c=s.event.special,f=0;(a=e[f])!==void 0;f++)if(Kt(a)){if(i=a[te.expando]){if(i.events)for(o in i.events)c[o]?s.event.remove(a,o):s.removeEvent(a,o,i.handle);a[te.expando]=void 0}a[Ge.expando]&&(a[Ge.expando]=void 0)}}}),s.fn.extend({detach:function(e){return oi(this,e,!0)},remove:function(e){return oi(this,e)},text:function(e){return at(this,function(i){return i===void 0?s.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=i)})},null,e,arguments.length)},append:function(){return ir(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var i=Br(this,e);i.appendChild(e)}})},prepend:function(){return ir(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var i=Br(this,e);i.insertBefore(e,i.firstChild)}})},before:function(){return ir(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return ir(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,i=0;(e=this[i])!=null;i++)e.nodeType===1&&(s.cleanData(Pe(e,!1)),e.textContent="");return this},clone:function(e,i){return e=e==null?!1:e,i=i==null?e:i,this.map(function(){return s.clone(this,e,i)})},html:function(e){return at(this,function(i){var a=this[0]||{},o=0,c=this.length;if(i===void 0&&a.nodeType===1)return a.innerHTML;if(typeof i=="string"&&!Hr.test(i)&&!ct[(cr.exec(i)||["",""])[1].toLowerCase()]){i=s.htmlPrefilter(i);try{for(;o<c;o++)a=this[o]||{},a.nodeType===1&&(s.cleanData(Pe(a,!1)),a.innerHTML=i);a=0}catch(f){}}a&&this.empty().append(i)},null,e,arguments.length)},replaceWith:function(){var e=[];return ir(this,arguments,function(i){var a=this.parentNode;s.inArray(this,e)<0&&(s.cleanData(Pe(this)),a&&a.replaceChild(i,this))},e)}}),s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,i){s.fn[e]=function(a){for(var o,c=[],f=s(a),h=f.length-1,w=0;w<=h;w++)o=w===h?this:this.clone(!0),s(f[w])[i](o),m.apply(c,o.get());return this.pushStack(c)}});var li=new RegExp("^("+Sr+")(?!px)[a-z%]+$","i"),ae=/^--/,T=function(e){var i=e.ownerDocument.defaultView;return(!i||!i.opener)&&(i=l),i.getComputedStyle(e)},V=function(e,i,a){var o,c,f={};for(c in i)f[c]=e.style[c],e.style[c]=i[c];o=a.call(e);for(c in i)e.style[c]=f[c];return o},ie=new RegExp(ut.join("|"),"i");(function(){function e(){if(C){x.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",C.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Tt.appendChild(x).appendChild(C);var I=l.getComputedStyle(C);a=I.top!=="1%",w=i(I.marginLeft)===12,C.style.right="60%",f=i(I.right)===36,o=i(I.width)===36,C.style.position="absolute",c=i(C.offsetWidth/3)===12,Tt.removeChild(x),C=null}}function i(I){return Math.round(parseFloat(I))}var a,o,c,f,h,w,x=Q.createElement("div"),C=Q.createElement("div");C.style&&(C.style.backgroundClip="content-box",C.cloneNode(!0).style.backgroundClip="",N.clearCloneStyle=C.style.backgroundClip==="content-box",s.extend(N,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),f},pixelPosition:function(){return e(),a},reliableMarginLeft:function(){return e(),w},scrollboxSize:function(){return e(),c},reliableTrDimensions:function(){var I,U,L,G;return h==null&&(I=Q.createElement("table"),U=Q.createElement("tr"),L=Q.createElement("div"),I.style.cssText="position:absolute;left:-11111px;border-collapse:separate",U.style.cssText="box-sizing:content-box;border:1px solid",U.style.height="1px",L.style.height="9px",L.style.display="block",Tt.appendChild(I).appendChild(U).appendChild(L),G=l.getComputedStyle(U),h=parseInt(G.height,10)+parseInt(G.borderTopWidth,10)+parseInt(G.borderBottomWidth,10)===U.offsetHeight,Tt.removeChild(I)),h}}))})();function Fe(e,i,a){var o,c,f,h,w=ae.test(i),x=e.style;return a=a||T(e),a&&(h=a.getPropertyValue(i)||a[i],w&&h&&(h=h.replace(Qe,"$1")||void 0),h===""&&!rt(e)&&(h=s.style(e,i)),!N.pixelBoxStyles()&&li.test(h)&&ie.test(i)&&(o=x.width,c=x.minWidth,f=x.maxWidth,x.minWidth=x.maxWidth=x.width=h,h=a.width,x.width=o,x.minWidth=c,x.maxWidth=f)),h!==void 0?h+"":h}function et(e,i){return{get:function(){if(e()){delete this.get;return}return(this.get=i).apply(this,arguments)}}}var Ye=["Webkit","Moz","ms"],Xe=Q.createElement("div").style,bt={};function Lt(e){for(var i=e[0].toUpperCase()+e.slice(1),a=Ye.length;a--;)if(e=Ye[a]+i,e in Xe)return e}function tt(e){var i=s.cssProps[e]||bt[e];return i||(e in Xe?e:bt[e]=Lt(e)||e)}var Cr=/^(none|table(?!-c[ea]).+)/,jr={position:"absolute",visibility:"hidden",display:"block"},Tn={letterSpacing:"0",fontWeight:"400"};function Sn(e,i,a){var o=er.exec(i);return o?Math.max(0,o[2]-(a||0))+(o[3]||"px"):i}function ui(e,i,a,o,c,f){var h=i==="width"?1:0,w=0,x=0,C=0;if(a===(o?"border":"content"))return 0;for(;h<4;h+=2)a==="margin"&&(C+=s.css(e,a+ut[h],!0,c)),o?(a==="content"&&(x-=s.css(e,"padding"+ut[h],!0,c)),a!=="margin"&&(x-=s.css(e,"border"+ut[h]+"Width",!0,c))):(x+=s.css(e,"padding"+ut[h],!0,c),a!=="padding"?x+=s.css(e,"border"+ut[h]+"Width",!0,c):w+=s.css(e,"border"+ut[h]+"Width",!0,c));return!o&&f>=0&&(x+=Math.max(0,Math.ceil(e["offset"+i[0].toUpperCase()+i.slice(1)]-f-x-w-.5))||0),x+C}function An(e,i,a){var o=T(e),c=!N.boxSizingReliable()||a,f=c&&s.css(e,"boxSizing",!1,o)==="border-box",h=f,w=Fe(e,i,o),x="offset"+i[0].toUpperCase()+i.slice(1);if(li.test(w)){if(!a)return w;w="auto"}return(!N.boxSizingReliable()&&f||!N.reliableTrDimensions()&&J(e,"tr")||w==="auto"||!parseFloat(w)&&s.css(e,"display",!1,o)==="inline")&&e.getClientRects().length&&(f=s.css(e,"boxSizing",!1,o)==="border-box",h=x in e,h&&(w=e[x])),w=parseFloat(w)||0,w+ui(e,i,a||(f?"border":"content"),h,o,w)+"px"}s.extend({cssHooks:{opacity:{get:function(e,i){if(i){var a=Fe(e,"opacity");return a===""?"1":a}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,i,a,o){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var c,f,h,w=lt(i),x=ae.test(i),C=e.style;if(x||(i=tt(w)),h=s.cssHooks[i]||s.cssHooks[w],a!==void 0){if(f=typeof a,f==="string"&&(c=er.exec(a))&&c[1]&&(a=Ur(e,i,c),f="number"),a==null||a!==a)return;f==="number"&&!x&&(a+=c&&c[3]||(s.cssNumber[w]?"":"px")),!N.clearCloneStyle&&a===""&&i.indexOf("background")===0&&(C[i]="inherit"),(!h||!("set"in h)||(a=h.set(e,a,o))!==void 0)&&(x?C.setProperty(i,a):C[i]=a)}else return h&&"get"in h&&(c=h.get(e,!1,o))!==void 0?c:C[i]}},css:function(e,i,a,o){var c,f,h,w=lt(i),x=ae.test(i);return x||(i=tt(w)),h=s.cssHooks[i]||s.cssHooks[w],h&&"get"in h&&(c=h.get(e,!0,a)),c===void 0&&(c=Fe(e,i,o)),c==="normal"&&i in Tn&&(c=Tn[i]),a===""||a?(f=parseFloat(c),a===!0||isFinite(f)?f||0:c):c}}),s.each(["height","width"],function(e,i){s.cssHooks[i]={get:function(a,o,c){if(o)return Cr.test(s.css(a,"display"))&&(!a.getClientRects().length||!a.getBoundingClientRect().width)?V(a,jr,function(){return An(a,i,c)}):An(a,i,c)},set:function(a,o,c){var f,h=T(a),w=!N.scrollboxSize()&&h.position==="absolute",x=w||c,C=x&&s.css(a,"boxSizing",!1,h)==="border-box",I=c?ui(a,i,c,C,h):0;return C&&w&&(I-=Math.ceil(a["offset"+i[0].toUpperCase()+i.slice(1)]-parseFloat(h[i])-ui(a,i,"border",!1,h)-.5)),I&&(f=er.exec(o))&&(f[3]||"px")!=="px"&&(a.style[i]=o,o=s.css(a,i)),Sn(a,o,I)}}}),s.cssHooks.marginLeft=et(N.reliableMarginLeft,function(e,i){if(i)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-V(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),s.each({margin:"",padding:"",border:"Width"},function(e,i){s.cssHooks[e+i]={expand:function(a){for(var o=0,c={},f=typeof a=="string"?a.split(" "):[a];o<4;o++)c[e+ut[o]+i]=f[o]||f[o-2]||f[0];return c}},e!=="margin"&&(s.cssHooks[e+i].set=Sn)}),s.fn.extend({css:function(e,i){return at(this,function(a,o,c){var f,h,w={},x=0;if(Array.isArray(o)){for(f=T(a),h=o.length;x<h;x++)w[o[x]]=s.css(a,o[x],!1,f);return w}return c!==void 0?s.style(a,o,c):s.css(a,o)},e,i,arguments.length>1)}});function yt(e,i,a,o,c){return new yt.prototype.init(e,i,a,o,c)}s.Tween=yt,yt.prototype={constructor:yt,init:function(e,i,a,o,c,f){this.elem=e,this.prop=a,this.easing=c||s.easing._default,this.options=i,this.start=this.now=this.cur(),this.end=o,this.unit=f||(s.cssNumber[a]?"":"px")},cur:function(){var e=yt.propHooks[this.prop];return e&&e.get?e.get(this):yt.propHooks._default.get(this)},run:function(e){var i,a=yt.propHooks[this.prop];return this.options.duration?this.pos=i=s.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=i=e,this.now=(this.end-this.start)*i+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),a&&a.set?a.set(this):yt.propHooks._default.set(this),this}},yt.prototype.init.prototype=yt.prototype,yt.propHooks={_default:{get:function(e){var i;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(i=s.css(e.elem,e.prop,""),!i||i==="auto"?0:i)},set:function(e){s.fx.step[e.prop]?s.fx.step[e.prop](e):e.elem.nodeType===1&&(s.cssHooks[e.prop]||e.elem.style[tt(e.prop)]!=null)?s.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},yt.propHooks.scrollTop=yt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},s.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},s.fx=yt.prototype.init,s.fx.step={};var p,E,g=/^(?:toggle|show|hide)$/,A=/queueHooks$/;function D(){E&&(Q.hidden===!1&&l.requestAnimationFrame?l.requestAnimationFrame(D):l.setTimeout(D,s.fx.interval),s.fx.tick())}function S(){return l.setTimeout(function(){p=void 0}),p=Date.now()}function M(e,i){var a,o=0,c={height:e};for(i=i?1:0;o<4;o+=2-i)a=ut[o],c["margin"+a]=c["padding"+a]=e;return i&&(c.opacity=c.width=e),c}function j(e,i,a){for(var o,c=(z.tweeners[i]||[]).concat(z.tweeners["*"]),f=0,h=c.length;f<h;f++)if(o=c[f].call(a,i,e))return o}function q(e,i,a){var o,c,f,h,w,x,C,I,U="width"in i||"height"in i,L=this,G={},me=e.style,Re=e.nodeType&&ur(e),we=te.get(e,"fxshow");a.queue||(h=s._queueHooks(e,"fx"),h.unqueued==null&&(h.unqueued=0,w=h.empty.fire,h.empty.fire=function(){h.unqueued||w()}),h.unqueued++,L.always(function(){L.always(function(){h.unqueued--,s.queue(e,"fx").length||h.empty.fire()})}));for(o in i)if(c=i[o],g.test(c)){if(delete i[o],f=f||c==="toggle",c===(Re?"hide":"show"))if(c==="show"&&we&&we[o]!==void 0)Re=!0;else continue;G[o]=we&&we[o]||s.style(e,o)}if(x=!s.isEmptyObject(i),!(!x&&s.isEmptyObject(G))){U&&e.nodeType===1&&(a.overflow=[me.overflow,me.overflowX,me.overflowY],C=we&&we.display,C==null&&(C=te.get(e,"display")),I=s.css(e,"display"),I==="none"&&(C?I=C:(Nt([e],!0),C=e.style.display||C,I=s.css(e,"display"),Nt([e]))),(I==="inline"||I==="inline-block"&&C!=null)&&s.css(e,"float")==="none"&&(x||(L.done(function(){me.display=C}),C==null&&(I=me.display,C=I==="none"?"":I)),me.display="inline-block")),a.overflow&&(me.overflow="hidden",L.always(function(){me.overflow=a.overflow[0],me.overflowX=a.overflow[1],me.overflowY=a.overflow[2]})),x=!1;for(o in G)x||(we?"hidden"in we&&(Re=we.hidden):we=te.access(e,"fxshow",{display:C}),f&&(we.hidden=!Re),Re&&Nt([e],!0),L.done(function(){Re||Nt([e]),te.remove(e,"fxshow");for(o in G)s.style(e,o,G[o])})),x=j(Re?we[o]:0,o,L),o in we||(we[o]=x.start,Re&&(x.end=x.start,x.start=0))}}function Y(e,i){var a,o,c,f,h;for(a in e)if(o=lt(a),c=i[o],f=e[a],Array.isArray(f)&&(c=f[1],f=e[a]=f[0]),a!==o&&(e[o]=f,delete e[a]),h=s.cssHooks[o],h&&"expand"in h){f=h.expand(f),delete e[o];for(a in f)a in e||(e[a]=f[a],i[a]=c)}else i[o]=c}function z(e,i,a){var o,c,f=0,h=z.prefilters.length,w=s.Deferred().always(function(){delete x.elem}),x=function(){if(c)return!1;for(var U=p||S(),L=Math.max(0,C.startTime+C.duration-U),G=L/C.duration||0,me=1-G,Re=0,we=C.tweens.length;Re<we;Re++)C.tweens[Re].run(me);return w.notifyWith(e,[C,me,L]),me<1&&we?L:(we||w.notifyWith(e,[C,1,0]),w.resolveWith(e,[C]),!1)},C=w.promise({elem:e,props:s.extend({},i),opts:s.extend(!0,{specialEasing:{},easing:s.easing._default},a),originalProperties:i,originalOptions:a,startTime:p||S(),duration:a.duration,tweens:[],createTween:function(U,L){var G=s.Tween(e,C.opts,U,L,C.opts.specialEasing[U]||C.opts.easing);return C.tweens.push(G),G},stop:function(U){var L=0,G=U?C.tweens.length:0;if(c)return this;for(c=!0;L<G;L++)C.tweens[L].run(1);return U?(w.notifyWith(e,[C,1,0]),w.resolveWith(e,[C,U])):w.rejectWith(e,[C,U]),this}}),I=C.props;for(Y(I,C.opts.specialEasing);f<h;f++)if(o=z.prefilters[f].call(C,e,I,C.opts),o)return B(o.stop)&&(s._queueHooks(C.elem,C.opts.queue).stop=o.stop.bind(o)),o;return s.map(I,j,C),B(C.opts.start)&&C.opts.start.call(e,C),C.progress(C.opts.progress).done(C.opts.done,C.opts.complete).fail(C.opts.fail).always(C.opts.always),s.fx.timer(s.extend(x,{elem:e,anim:C,queue:C.opts.queue})),C}s.Animation=s.extend(z,{tweeners:{"*":[function(e,i){var a=this.createTween(e,i);return Ur(a.elem,e,er.exec(i),a),a}]},tweener:function(e,i){B(e)?(i=e,e=["*"]):e=e.match(gt);for(var a,o=0,c=e.length;o<c;o++)a=e[o],z.tweeners[a]=z.tweeners[a]||[],z.tweeners[a].unshift(i)},prefilters:[q],prefilter:function(e,i){i?z.prefilters.unshift(e):z.prefilters.push(e)}}),s.speed=function(e,i,a){var o=e&&typeof e=="object"?s.extend({},e):{complete:a||!a&&i||B(e)&&e,duration:e,easing:a&&i||i&&!B(i)&&i};return s.fx.off?o.duration=0:typeof o.duration!="number"&&(o.duration in s.fx.speeds?o.duration=s.fx.speeds[o.duration]:o.duration=s.fx.speeds._default),(o.queue==null||o.queue===!0)&&(o.queue="fx"),o.old=o.complete,o.complete=function(){B(o.old)&&o.old.call(this),o.queue&&s.dequeue(this,o.queue)},o},s.fn.extend({fadeTo:function(e,i,a,o){return this.filter(ur).css("opacity",0).show().end().animate({opacity:i},e,a,o)},animate:function(e,i,a,o){var c=s.isEmptyObject(e),f=s.speed(i,a,o),h=function(){var w=z(this,s.extend({},e),f);(c||te.get(this,"finish"))&&w.stop(!0)};return h.finish=h,c||f.queue===!1?this.each(h):this.queue(f.queue,h)},stop:function(e,i,a){var o=function(c){var f=c.stop;delete c.stop,f(a)};return typeof e!="string"&&(a=i,i=e,e=void 0),i&&this.queue(e||"fx",[]),this.each(function(){var c=!0,f=e!=null&&e+"queueHooks",h=s.timers,w=te.get(this);if(f)w[f]&&w[f].stop&&o(w[f]);else for(f in w)w[f]&&w[f].stop&&A.test(f)&&o(w[f]);for(f=h.length;f--;)h[f].elem===this&&(e==null||h[f].queue===e)&&(h[f].anim.stop(a),c=!1,h.splice(f,1));(c||!a)&&s.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var i,a=te.get(this),o=a[e+"queue"],c=a[e+"queueHooks"],f=s.timers,h=o?o.length:0;for(a.finish=!0,s.queue(this,e,[]),c&&c.stop&&c.stop.call(this,!0),i=f.length;i--;)f[i].elem===this&&f[i].queue===e&&(f[i].anim.stop(!0),f.splice(i,1));for(i=0;i<h;i++)o[i]&&o[i].finish&&o[i].finish.call(this);delete a.finish})}}),s.each(["toggle","show","hide"],function(e,i){var a=s.fn[i];s.fn[i]=function(o,c,f){return o==null||typeof o=="boolean"?a.apply(this,arguments):this.animate(M(i,!0),o,c,f)}}),s.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){s.fn[e]=function(a,o,c){return this.animate(i,a,o,c)}}),s.timers=[],s.fx.tick=function(){var e,i=0,a=s.timers;for(p=Date.now();i<a.length;i++)e=a[i],!e()&&a[i]===e&&a.splice(i--,1);a.length||s.fx.stop(),p=void 0},s.fx.timer=function(e){s.timers.push(e),s.fx.start()},s.fx.interval=13,s.fx.start=function(){E||(E=!0,D())},s.fx.stop=function(){E=null},s.fx.speeds={slow:600,fast:200,_default:400},s.fn.delay=function(e,i){return e=s.fx&&s.fx.speeds[e]||e,i=i||"fx",this.queue(i,function(a,o){var c=l.setTimeout(a,e);o.stop=function(){l.clearTimeout(c)}})},(function(){var e=Q.createElement("input"),i=Q.createElement("select"),a=i.appendChild(Q.createElement("option"));e.type="checkbox",N.checkOn=e.value!=="",N.optSelected=a.selected,e=Q.createElement("input"),e.value="t",e.type="radio",N.radioValue=e.value==="t"})();var ne,ye=s.expr.attrHandle;s.fn.extend({attr:function(e,i){return at(this,s.attr,e,i,arguments.length>1)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})}}),s.extend({attr:function(e,i,a){var o,c,f=e.nodeType;if(!(f===3||f===8||f===2)){if(typeof e.getAttribute=="undefined")return s.prop(e,i,a);if((f!==1||!s.isXMLDoc(e))&&(c=s.attrHooks[i.toLowerCase()]||(s.expr.match.bool.test(i)?ne:void 0)),a!==void 0){if(a===null){s.removeAttr(e,i);return}return c&&"set"in c&&(o=c.set(e,a,i))!==void 0?o:(e.setAttribute(i,a+""),a)}return c&&"get"in c&&(o=c.get(e,i))!==null?o:(o=s.find.attr(e,i),o==null?void 0:o)}},attrHooks:{type:{set:function(e,i){if(!N.radioValue&&i==="radio"&&J(e,"input")){var a=e.value;return e.setAttribute("type",i),a&&(e.value=a),i}}}},removeAttr:function(e,i){var a,o=0,c=i&&i.match(gt);if(c&&e.nodeType===1)for(;a=c[o++];)e.removeAttribute(a)}}),ne={set:function(e,i,a){return i===!1?s.removeAttr(e,a):e.setAttribute(a,a),a}},s.each(s.expr.match.bool.source.match(/\w+/g),function(e,i){var a=ye[i]||s.find.attr;ye[i]=function(o,c,f){var h,w,x=c.toLowerCase();return f||(w=ye[x],ye[x]=h,h=a(o,c,f)!=null?x:null,ye[x]=w),h}});var Ie=/^(?:input|select|textarea|button)$/i,Oe=/^(?:a|area)$/i;s.fn.extend({prop:function(e,i){return at(this,s.prop,e,i,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[s.propFix[e]||e]})}}),s.extend({prop:function(e,i,a){var o,c,f=e.nodeType;if(!(f===3||f===8||f===2))return(f!==1||!s.isXMLDoc(e))&&(i=s.propFix[i]||i,c=s.propHooks[i]),a!==void 0?c&&"set"in c&&(o=c.set(e,a,i))!==void 0?o:e[i]=a:c&&"get"in c&&(o=c.get(e,i))!==null?o:e[i]},propHooks:{tabIndex:{get:function(e){var i=s.find.attr(e,"tabindex");return i?parseInt(i,10):Ie.test(e.nodeName)||Oe.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),N.optSelected||(s.propHooks.selected={get:function(e){var i=e.parentNode;return i&&i.parentNode&&i.parentNode.selectedIndex,null},set:function(e){var i=e.parentNode;i&&(i.selectedIndex,i.parentNode&&i.parentNode.selectedIndex)}}),s.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){s.propFix[this.toLowerCase()]=this});function $e(e){var i=e.match(gt)||[];return i.join(" ")}function Ue(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:typeof e=="string"?e.match(gt)||[]:[]}s.fn.extend({addClass:function(e){var i,a,o,c,f,h;return B(e)?this.each(function(w){s(this).addClass(e.call(this,w,Ue(this)))}):(i=xt(e),i.length?this.each(function(){if(o=Ue(this),a=this.nodeType===1&&" "+$e(o)+" ",a){for(f=0;f<i.length;f++)c=i[f],a.indexOf(" "+c+" ")<0&&(a+=c+" ");h=$e(a),o!==h&&this.setAttribute("class",h)}}):this)},removeClass:function(e){var i,a,o,c,f,h;return B(e)?this.each(function(w){s(this).removeClass(e.call(this,w,Ue(this)))}):arguments.length?(i=xt(e),i.length?this.each(function(){if(o=Ue(this),a=this.nodeType===1&&" "+$e(o)+" ",a){for(f=0;f<i.length;f++)for(c=i[f];a.indexOf(" "+c+" ")>-1;)a=a.replace(" "+c+" "," ");h=$e(a),o!==h&&this.setAttribute("class",h)}}):this):this.attr("class","")},toggleClass:function(e,i){var a,o,c,f,h=typeof e,w=h==="string"||Array.isArray(e);return B(e)?this.each(function(x){s(this).toggleClass(e.call(this,x,Ue(this),i),i)}):typeof i=="boolean"&&w?i?this.addClass(e):this.removeClass(e):(a=xt(e),this.each(function(){if(w)for(f=s(this),c=0;c<a.length;c++)o=a[c],f.hasClass(o)?f.removeClass(o):f.addClass(o);else(e===void 0||h==="boolean")&&(o=Ue(this),o&&te.set(this,"__className__",o),this.setAttribute&&this.setAttribute("class",o||e===!1?"":te.get(this,"__className__")||""))}))},hasClass:function(e){var i,a,o=0;for(i=" "+e+" ";a=this[o++];)if(a.nodeType===1&&(" "+$e(Ue(a))+" ").indexOf(i)>-1)return!0;return!1}});var ci=/\r/g;s.fn.extend({val:function(e){var i,a,o,c=this[0];return arguments.length?(o=B(e),this.each(function(f){var h;this.nodeType===1&&(o?h=e.call(this,f,s(this).val()):h=e,h==null?h="":typeof h=="number"?h+="":Array.isArray(h)&&(h=s.map(h,function(w){return w==null?"":w+""})),i=s.valHooks[this.type]||s.valHooks[this.nodeName.toLowerCase()],(!i||!("set"in i)||i.set(this,h,"value")===void 0)&&(this.value=h))})):c?(i=s.valHooks[c.type]||s.valHooks[c.nodeName.toLowerCase()],i&&"get"in i&&(a=i.get(c,"value"))!==void 0?a:(a=c.value,typeof a=="string"?a.replace(ci,""):a==null?"":a)):void 0}}),s.extend({valHooks:{option:{get:function(e){var i=s.find.attr(e,"value");return i!=null?i:$e(s.text(e))}},select:{get:function(e){var i,a,o,c=e.options,f=e.selectedIndex,h=e.type==="select-one",w=h?null:[],x=h?f+1:c.length;for(f<0?o=x:o=h?f:0;o<x;o++)if(a=c[o],(a.selected||o===f)&&!a.disabled&&(!a.parentNode.disabled||!J(a.parentNode,"optgroup"))){if(i=s(a).val(),h)return i;w.push(i)}return w},set:function(e,i){for(var a,o,c=e.options,f=s.makeArray(i),h=c.length;h--;)o=c[h],(o.selected=s.inArray(s.valHooks.option.get(o),f)>-1)&&(a=!0);return a||(e.selectedIndex=-1),f}}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]={set:function(e,i){if(Array.isArray(i))return e.checked=s.inArray(s(e).val(),i)>-1}},N.checkOn||(s.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var Pr=l.location,Cn={guid:Date.now()},fi=/\?/;s.parseXML=function(e){var i,a;if(!e||typeof e!="string")return null;try{i=new l.DOMParser().parseFromString(e,"text/xml")}catch(o){}return a=i&&i.getElementsByTagName("parsererror")[0],(!i||a)&&s.error("Invalid XML: "+(a?s.map(a.childNodes,function(o){return o.textContent}).join(`
`):e)),i};var Fa=/^(?:focusinfocus|focusoutblur)$/,Pn=function(e){e.stopPropagation()};s.extend(s.event,{trigger:function(e,i,a,o){var c,f,h,w,x,C,I,U,L=[a||Q],G=W.call(e,"type")?e.type:e,me=W.call(e,"namespace")?e.namespace.split("."):[];if(f=U=h=a=a||Q,!(a.nodeType===3||a.nodeType===8)&&!Fa.test(G+s.event.triggered)&&(G.indexOf(".")>-1&&(me=G.split("."),G=me.shift(),me.sort()),x=G.indexOf(":")<0&&"on"+G,e=e[s.expando]?e:new s.Event(G,typeof e=="object"&&e),e.isTrigger=o?2:3,e.namespace=me.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=a),i=i==null?[e]:s.makeArray(i,[e]),I=s.event.special[G]||{},!(!o&&I.trigger&&I.trigger.apply(a,i)===!1))){if(!o&&!I.noBubble&&!ue(a)){for(w=I.delegateType||G,Fa.test(w+G)||(f=f.parentNode);f;f=f.parentNode)L.push(f),h=f;h===(a.ownerDocument||Q)&&L.push(h.defaultView||h.parentWindow||l)}for(c=0;(f=L[c++])&&!e.isPropagationStopped();)U=f,e.type=c>1?w:I.bindType||G,C=(te.get(f,"events")||Object.create(null))[e.type]&&te.get(f,"handle"),C&&C.apply(f,i),C=x&&f[x],C&&C.apply&&Kt(f)&&(e.result=C.apply(f,i),e.result===!1&&e.preventDefault());return e.type=G,!o&&!e.isDefaultPrevented()&&(!I._default||I._default.apply(L.pop(),i)===!1)&&Kt(a)&&x&&B(a[G])&&!ue(a)&&(h=a[x],h&&(a[x]=null),s.event.triggered=G,e.isPropagationStopped()&&U.addEventListener(G,Pn),a[G](),e.isPropagationStopped()&&U.removeEventListener(G,Pn),s.event.triggered=void 0,h&&(a[x]=h)),e.result}},simulate:function(e,i,a){var o=s.extend(new s.Event,a,{type:e,isSimulated:!0});s.event.trigger(o,null,i)}}),s.fn.extend({trigger:function(e,i){return this.each(function(){s.event.trigger(e,i,this)})},triggerHandler:function(e,i){var a=this[0];if(a)return s.event.trigger(e,i,a,!0)}});var Ia=/\[\]$/,Bi=/\r?\n/g,Tl=/^(?:submit|button|image|reset|file)$/i,Sl=/^(?:input|select|textarea|keygen)/i;function Ma(e,i,a,o){var c;if(Array.isArray(i))s.each(i,function(f,h){a||Ia.test(e)?o(e,h):Ma(e+"["+(typeof h=="object"&&h!=null?f:"")+"]",h,a,o)});else if(!a&&fe(i)==="object")for(c in i)Ma(e+"["+c+"]",i[c],a,o);else o(e,i)}s.param=function(e,i){var a,o=[],c=function(f,h){var w=B(h)?h():h;o[o.length]=encodeURIComponent(f)+"="+encodeURIComponent(w==null?"":w)};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){c(this.name,this.value)});else for(a in e)Ma(a,e[a],i,c);return o.join("&")},s.fn.extend({serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=s.prop(this,"elements");return e?s.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!s(this).is(":disabled")&&Sl.test(this.nodeName)&&!Tl.test(e)&&(this.checked||!vt.test(e))}).map(function(e,i){var a=s(this).val();return a==null?null:Array.isArray(a)?s.map(a,function(o){return{name:i.name,value:o.replace(Bi,`\r
`)}}):{name:i.name,value:a.replace(Bi,`\r
`)}}).get()}});var Al=/%20/g,Cl=/#.*$/,Pl=/([?&])_=[^&]*/,kl=/^(.*?):[ \t]*([^\r\n]*)$/mg,Dl=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rl=/^(?:GET|HEAD)$/,Ll=/^\/\//,Os={},Oa={},Ns="*/".concat("*"),Na=Q.createElement("a");Na.href=Pr.href;function Us(e){return function(i,a){typeof i!="string"&&(a=i,i="*");var o,c=0,f=i.toLowerCase().match(gt)||[];if(B(a))for(;o=f[c++];)o[0]==="+"?(o=o.slice(1)||"*",(e[o]=e[o]||[]).unshift(a)):(e[o]=e[o]||[]).push(a)}}function Ws(e,i,a,o){var c={},f=e===Oa;function h(w){var x;return c[w]=!0,s.each(e[w]||[],function(C,I){var U=I(i,a,o);if(typeof U=="string"&&!f&&!c[U])return i.dataTypes.unshift(U),h(U),!1;if(f)return!(x=U)}),x}return h(i.dataTypes[0])||!c["*"]&&h("*")}function Ua(e,i){var a,o,c=s.ajaxSettings.flatOptions||{};for(a in i)i[a]!==void 0&&((c[a]?e:o||(o={}))[a]=i[a]);return o&&s.extend(!0,e,o),e}function Fl(e,i,a){for(var o,c,f,h,w=e.contents,x=e.dataTypes;x[0]==="*";)x.shift(),o===void 0&&(o=e.mimeType||i.getResponseHeader("Content-Type"));if(o){for(c in w)if(w[c]&&w[c].test(o)){x.unshift(c);break}}if(x[0]in a)f=x[0];else{for(c in a){if(!x[0]||e.converters[c+" "+x[0]]){f=c;break}h||(h=c)}f=f||h}if(f)return f!==x[0]&&x.unshift(f),a[f]}function Il(e,i,a,o){var c,f,h,w,x,C={},I=e.dataTypes.slice();if(I[1])for(h in e.converters)C[h.toLowerCase()]=e.converters[h];for(f=I.shift();f;)if(e.responseFields[f]&&(a[e.responseFields[f]]=i),!x&&o&&e.dataFilter&&(i=e.dataFilter(i,e.dataType)),x=f,f=I.shift(),f){if(f==="*")f=x;else if(x!=="*"&&x!==f){if(h=C[x+" "+f]||C["* "+f],!h){for(c in C)if(w=c.split(" "),w[1]===f&&(h=C[x+" "+w[0]]||C["* "+w[0]],h)){h===!0?h=C[c]:C[c]!==!0&&(f=w[0],I.unshift(w[1]));break}}if(h!==!0)if(h&&e.throws)i=h(i);else try{i=h(i)}catch(U){return{state:"parsererror",error:h?U:"No conversion from "+x+" to "+f}}}}return{state:"success",data:i}}s.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pr.href,type:"GET",isLocal:Dl.test(Pr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ns,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":s.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,i){return i?Ua(Ua(e,s.ajaxSettings),i):Ua(s.ajaxSettings,e)},ajaxPrefilter:Us(Os),ajaxTransport:Us(Oa),ajax:function(e,i){typeof e=="object"&&(i=e,e=void 0),i=i||{};var a,o,c,f,h,w,x,C,I,U,L=s.ajaxSetup({},i),G=L.context||L,me=L.context&&(G.nodeType||G.jquery)?s(G):s.event,Re=s.Deferred(),we=s.Callbacks("once memory"),dt=L.statusCode||{},it={},fr={},dr="canceled",Ce={readyState:0,getResponseHeader:function(Le){var Je;if(x){if(!f)for(f={};Je=kl.exec(c);)f[Je[1].toLowerCase()+" "]=(f[Je[1].toLowerCase()+" "]||[]).concat(Je[2]);Je=f[Le.toLowerCase()+" "]}return Je==null?null:Je.join(", ")},getAllResponseHeaders:function(){return x?c:null},setRequestHeader:function(Le,Je){return x==null&&(Le=fr[Le.toLowerCase()]=fr[Le.toLowerCase()]||Le,it[Le]=Je),this},overrideMimeType:function(Le){return x==null&&(L.mimeType=Le),this},statusCode:function(Le){var Je;if(Le)if(x)Ce.always(Le[Ce.status]);else for(Je in Le)dt[Je]=[dt[Je],Le[Je]];return this},abort:function(Le){var Je=Le||dr;return a&&a.abort(Je),di(0,Je),this}};if(Re.promise(Ce),L.url=((e||L.url||Pr.href)+"").replace(Ll,Pr.protocol+"//"),L.type=i.method||i.type||L.method||L.type,L.dataTypes=(L.dataType||"*").toLowerCase().match(gt)||[""],L.crossDomain==null){w=Q.createElement("a");try{w.href=L.url,w.href=w.href,L.crossDomain=Na.protocol+"//"+Na.host!=w.protocol+"//"+w.host}catch(Le){L.crossDomain=!0}}if(L.data&&L.processData&&typeof L.data!="string"&&(L.data=s.param(L.data,L.traditional)),Ws(Os,L,i,Ce),x)return Ce;C=s.event&&L.global,C&&s.active++===0&&s.event.trigger("ajaxStart"),L.type=L.type.toUpperCase(),L.hasContent=!Rl.test(L.type),o=L.url.replace(Cl,""),L.hasContent?L.data&&L.processData&&(L.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(L.data=L.data.replace(Al,"+")):(U=L.url.slice(o.length),L.data&&(L.processData||typeof L.data=="string")&&(o+=(fi.test(o)?"&":"?")+L.data,delete L.data),L.cache===!1&&(o=o.replace(Pl,"$1"),U=(fi.test(o)?"&":"?")+"_="+Cn.guid+++U),L.url=o+U),L.ifModified&&(s.lastModified[o]&&Ce.setRequestHeader("If-Modified-Since",s.lastModified[o]),s.etag[o]&&Ce.setRequestHeader("If-None-Match",s.etag[o])),(L.data&&L.hasContent&&L.contentType!==!1||i.contentType)&&Ce.setRequestHeader("Content-Type",L.contentType),Ce.setRequestHeader("Accept",L.dataTypes[0]&&L.accepts[L.dataTypes[0]]?L.accepts[L.dataTypes[0]]+(L.dataTypes[0]!=="*"?", "+Ns+"; q=0.01":""):L.accepts["*"]);for(I in L.headers)Ce.setRequestHeader(I,L.headers[I]);if(L.beforeSend&&(L.beforeSend.call(G,Ce,L)===!1||x))return Ce.abort();if(dr="abort",we.add(L.complete),Ce.done(L.success),Ce.fail(L.error),a=Ws(Oa,L,i,Ce),!a)di(-1,"No Transport");else{if(Ce.readyState=1,C&&me.trigger("ajaxSend",[Ce,L]),x)return Ce;L.async&&L.timeout>0&&(h=l.setTimeout(function(){Ce.abort("timeout")},L.timeout));try{x=!1,a.send(it,di)}catch(Le){if(x)throw Le;di(-1,Le)}}function di(Le,Je,zi,$a){var hr,Gi,pr,zr,Gr,jt=Je;x||(x=!0,h&&l.clearTimeout(h),a=void 0,c=$a||"",Ce.readyState=Le>0?4:0,hr=Le>=200&&Le<300||Le===304,zi&&(zr=Fl(L,Ce,zi)),!hr&&s.inArray("script",L.dataTypes)>-1&&s.inArray("json",L.dataTypes)<0&&(L.converters["text script"]=function(){}),zr=Il(L,zr,Ce,hr),hr?(L.ifModified&&(Gr=Ce.getResponseHeader("Last-Modified"),Gr&&(s.lastModified[o]=Gr),Gr=Ce.getResponseHeader("etag"),Gr&&(s.etag[o]=Gr)),Le===204||L.type==="HEAD"?jt="nocontent":Le===304?jt="notmodified":(jt=zr.state,Gi=zr.data,pr=zr.error,hr=!pr)):(pr=jt,(Le||!jt)&&(jt="error",Le<0&&(Le=0))),Ce.status=Le,Ce.statusText=(Je||jt)+"",hr?Re.resolveWith(G,[Gi,jt,Ce]):Re.rejectWith(G,[Ce,jt,pr]),Ce.statusCode(dt),dt=void 0,C&&me.trigger(hr?"ajaxSuccess":"ajaxError",[Ce,L,hr?Gi:pr]),we.fireWith(G,[Ce,jt]),C&&(me.trigger("ajaxComplete",[Ce,L]),--s.active||s.event.trigger("ajaxStop")))}return Ce},getJSON:function(e,i,a){return s.get(e,i,a,"json")},getScript:function(e,i){return s.get(e,void 0,i,"script")}}),s.each(["get","post"],function(e,i){s[i]=function(a,o,c,f){return B(o)&&(f=f||c,c=o,o=void 0),s.ajax(s.extend({url:a,type:i,dataType:f,data:o,success:c},s.isPlainObject(a)&&a))}}),s.ajaxPrefilter(function(e){var i;for(i in e.headers)i.toLowerCase()==="content-type"&&(e.contentType=e.headers[i]||"")}),s._evalUrl=function(e,i,a){return s.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(o){s.globalEval(o,i,a)}})},s.fn.extend({wrapAll:function(e){var i;return this[0]&&(B(e)&&(e=e.call(this[0])),i=s(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&i.insertBefore(this[0]),i.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(e){return B(e)?this.each(function(i){s(this).wrapInner(e.call(this,i))}):this.each(function(){var i=s(this),a=i.contents();a.length?a.wrapAll(e):i.append(e)})},wrap:function(e){var i=B(e);return this.each(function(a){s(this).wrapAll(i?e.call(this,a):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){s(this).replaceWith(this.childNodes)}),this}}),s.expr.pseudos.hidden=function(e){return!s.expr.pseudos.visible(e)},s.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},s.ajaxSettings.xhr=function(){try{return new l.XMLHttpRequest}catch(e){}};var Ml={0:200,1223:204},ji=s.ajaxSettings.xhr();N.cors=!!ji&&"withCredentials"in ji,N.ajax=ji=!!ji,s.ajaxTransport(function(e){var i,a;if(N.cors||ji&&!e.crossDomain)return{send:function(o,c){var f,h=e.xhr();if(h.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(f in e.xhrFields)h[f]=e.xhrFields[f];e.mimeType&&h.overrideMimeType&&h.overrideMimeType(e.mimeType),!e.crossDomain&&!o["X-Requested-With"]&&(o["X-Requested-With"]="XMLHttpRequest");for(f in o)h.setRequestHeader(f,o[f]);i=function(w){return function(){i&&(i=a=h.onload=h.onerror=h.onabort=h.ontimeout=h.onreadystatechange=null,w==="abort"?h.abort():w==="error"?typeof h.status!="number"?c(0,"error"):c(h.status,h.statusText):c(Ml[h.status]||h.status,h.statusText,(h.responseType||"text")!=="text"||typeof h.responseText!="string"?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=i(),a=h.onerror=h.ontimeout=i("error"),h.onabort!==void 0?h.onabort=a:h.onreadystatechange=function(){h.readyState===4&&l.setTimeout(function(){i&&a()})},i=i("abort");try{h.send(e.hasContent&&e.data||null)}catch(w){if(i)throw w}},abort:function(){i&&i()}}}),s.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===void 0&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),s.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var i,a;return{send:function(o,c){i=s("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",a=function(f){i.remove(),a=null,f&&c(f.type==="error"?404:200,f.type)}),Q.head.appendChild(i[0])},abort:function(){a&&a()}}}});var $s=[],Wa=/(=)\?(?=&|$)|\?\?/;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$s.pop()||s.expando+"_"+Cn.guid++;return this[e]=!0,e}}),s.ajaxPrefilter("json jsonp",function(e,i,a){var o,c,f,h=e.jsonp!==!1&&(Wa.test(e.url)?"url":typeof e.data=="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Wa.test(e.data)&&"data");if(h||e.dataTypes[0]==="jsonp")return o=e.jsonpCallback=B(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,h?e[h]=e[h].replace(Wa,"$1"+o):e.jsonp!==!1&&(e.url+=(fi.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return f||s.error(o+" was not called"),f[0]},e.dataTypes[0]="json",c=l[o],l[o]=function(){f=arguments},a.always(function(){c===void 0?s(l).removeProp(o):l[o]=c,e[o]&&(e.jsonpCallback=i.jsonpCallback,$s.push(o)),f&&B(c)&&c(f[0]),f=c=void 0}),"script"}),N.createHTMLDocument=(function(){var e=Q.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2})(),s.parseHTML=function(e,i,a){if(typeof e!="string")return[];typeof i=="boolean"&&(a=i,i=!1);var o,c,f;return i||(N.createHTMLDocument?(i=Q.implementation.createHTMLDocument(""),o=i.createElement("base"),o.href=Q.location.href,i.head.appendChild(o)):i=Q),c=Ve.exec(e),f=!a&&[],c?[i.createElement(c[1])]:(c=ii([e],i,f),f&&f.length&&s(f).remove(),s.merge([],c.childNodes))},s.fn.load=function(e,i,a){var o,c,f,h=this,w=e.indexOf(" ");return w>-1&&(o=$e(e.slice(w)),e=e.slice(0,w)),B(i)?(a=i,i=void 0):i&&typeof i=="object"&&(c="POST"),h.length>0&&s.ajax({url:e,type:c||"GET",dataType:"html",data:i}).done(function(x){f=arguments,h.html(o?s("<div>").append(s.parseHTML(x)).find(o):x)}).always(a&&function(x,C){h.each(function(){a.apply(this,f||[x.responseText,C,x])})}),this},s.expr.pseudos.animated=function(e){return s.grep(s.timers,function(i){return e===i.elem}).length},s.offset={setOffset:function(e,i,a){var o,c,f,h,w,x,C,I=s.css(e,"position"),U=s(e),L={};I==="static"&&(e.style.position="relative"),w=U.offset(),f=s.css(e,"top"),x=s.css(e,"left"),C=(I==="absolute"||I==="fixed")&&(f+x).indexOf("auto")>-1,C?(o=U.position(),h=o.top,c=o.left):(h=parseFloat(f)||0,c=parseFloat(x)||0),B(i)&&(i=i.call(e,a,s.extend({},w))),i.top!=null&&(L.top=i.top-w.top+h),i.left!=null&&(L.left=i.left-w.left+c),"using"in i?i.using.call(e,L):U.css(L)}},s.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(c){s.offset.setOffset(this,e,c)});var i,a,o=this[0];if(o)return o.getClientRects().length?(i=o.getBoundingClientRect(),a=o.ownerDocument.defaultView,{top:i.top+a.pageYOffset,left:i.left+a.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,i,a,o=this[0],c={top:0,left:0};if(s.css(o,"position")==="fixed")i=o.getBoundingClientRect();else{for(i=this.offset(),a=o.ownerDocument,e=o.offsetParent||a.documentElement;e&&(e===a.body||e===a.documentElement)&&s.css(e,"position")==="static";)e=e.parentNode;e&&e!==o&&e.nodeType===1&&(c=s(e).offset(),c.top+=s.css(e,"borderTopWidth",!0),c.left+=s.css(e,"borderLeftWidth",!0))}return{top:i.top-c.top-s.css(o,"marginTop",!0),left:i.left-c.left-s.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&s.css(e,"position")==="static";)e=e.offsetParent;return e||Tt})}}),s.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var a=i==="pageYOffset";s.fn[e]=function(o){return at(this,function(c,f,h){var w;if(ue(c)?w=c:c.nodeType===9&&(w=c.defaultView),h===void 0)return w?w[i]:c[f];w?w.scrollTo(a?w.pageXOffset:h,a?h:w.pageYOffset):c[f]=h},e,o,arguments.length)}}),s.each(["top","left"],function(e,i){s.cssHooks[i]=et(N.pixelPosition,function(a,o){if(o)return o=Fe(a,i),li.test(o)?s(a).position()[i]+"px":o})}),s.each({Height:"height",Width:"width"},function(e,i){s.each({padding:"inner"+e,content:i,"":"outer"+e},function(a,o){s.fn[o]=function(c,f){var h=arguments.length&&(a||typeof c!="boolean"),w=a||(c===!0||f===!0?"margin":"border");return at(this,function(x,C,I){var U;return ue(x)?o.indexOf("outer")===0?x["inner"+e]:x.document.documentElement["client"+e]:x.nodeType===9?(U=x.documentElement,Math.max(x.body["scroll"+e],U["scroll"+e],x.body["offset"+e],U["offset"+e],U["client"+e])):I===void 0?s.css(x,C,w):s.style(x,C,I,w)},i,h?c:void 0,h)}})}),s.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,i){s.fn[i]=function(a){return this.on(i,a)}}),s.fn.extend({bind:function(e,i,a){return this.on(e,null,i,a)},unbind:function(e,i){return this.off(e,null,i)},delegate:function(e,i,a,o){return this.on(i,e,a,o)},undelegate:function(e,i,a){return arguments.length===1?this.off(e,"**"):this.off(i,e||"**",a)},hover:function(e,i){return this.on("mouseenter",e).on("mouseleave",i||e)}}),s.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){s.fn[i]=function(a,o){return arguments.length>0?this.on(i,null,a,o):this.trigger(i)}});var Ol=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;s.proxy=function(e,i){var a,o,c;if(typeof i=="string"&&(a=e[i],i=e,e=a),!!B(e))return o=u.call(arguments,2),c=function(){return e.apply(i||this,o.concat(u.call(arguments)))},c.guid=e.guid=e.guid||s.guid++,c},s.holdReady=function(e){e?s.readyWait++:s.ready(!0)},s.isArray=Array.isArray,s.parseJSON=JSON.parse,s.nodeName=J,s.isFunction=B,s.isWindow=ue,s.camelCase=lt,s.type=fe,s.now=Date.now,s.isNumeric=function(e){var i=s.type(e);return(i==="number"||i==="string")&&!isNaN(e-parseFloat(e))},s.trim=function(e){return e==null?"":(e+"").replace(Ol,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return s});var Nl=l.jQuery,Ul=l.$;return s.noConflict=function(e){return l.$===s&&(l.$=Ul),e&&l.jQuery===s&&(l.jQuery=Nl),s},typeof t=="undefined"&&(l.jQuery=l.$=s),s})});var rl=qa((md,tl)=>{"use strict";var{entries:Qo,setPrototypeOf:Ho,isFrozen:hu,getPrototypeOf:pu,getOwnPropertyDescriptor:mu}=Object,{freeze:Pt,seal:Vt,create:Jo}=Object,{apply:xs,construct:ws}=typeof Reflect!="undefined"&&Reflect;Pt||(Pt=function(t){return t});Vt||(Vt=function(t){return t});xs||(xs=function(t,r,n){return t.apply(r,n)});ws||(ws=function(t,r){return new t(...r)});var Ea=kt(Array.prototype.forEach),gu=kt(Array.prototype.lastIndexOf),Bo=kt(Array.prototype.pop),fn=kt(Array.prototype.push),vu=kt(Array.prototype.splice),Ta=kt(String.prototype.toLowerCase),ms=kt(String.prototype.toString),jo=kt(String.prototype.match),dn=kt(String.prototype.replace),bu=kt(String.prototype.indexOf),yu=kt(String.prototype.trim),or=kt(Object.prototype.hasOwnProperty),Ct=kt(RegExp.prototype.test),hn=xu(TypeError);function kt(l){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),u=1;u<r;u++)n[u-1]=arguments[u];return xs(l,t,n)}}function xu(l){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ws(l,r)}}function Ae(l,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ta;Ho&&Ho(l,null);let n=t.length;for(;n--;){let u=t[n];if(typeof u=="string"){let d=r(u);d!==u&&(hu(t)||(t[n]=d),u=d)}l[u]=!0}return l}function wu(l){for(let t=0;t<l.length;t++)or(l,t)||(l[t]=null);return l}function Ei(l){let t=Jo(null);for(let[r,n]of Qo(l))or(l,r)&&(Array.isArray(n)?t[r]=wu(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=Ei(n):t[r]=n);return t}function pn(l,t){for(;l!==null;){let n=mu(l,t);if(n){if(n.get)return kt(n.get);if(typeof n.value=="function")return kt(n.value)}l=pu(l)}function r(){return null}return r}var zo=Pt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),gs=Pt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vs=Pt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Eu=Pt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),bs=Pt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_u=Pt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Go=Pt(["#text"]),Vo=Pt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ys=Pt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qo=Pt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_a=Pt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Tu=Vt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Su=Vt(/<%[\w\W]*|[\w\W]*%>/gm),Au=Vt(/\$\{[\w\W]*/gm),Cu=Vt(/^data-[\-\w.\u00B7-\uFFFF]+$/),Pu=Vt(/^aria-[\-\w]+$/),Ko=Vt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ku=Vt(/^(?:\w+script|data):/i),Du=Vt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Zo=Vt(/^html$/i),Ru=Vt(/^[a-z][.\w]*(-[.\w]+)+$/i),Yo=Object.freeze({__proto__:null,ARIA_ATTR:Pu,ATTR_WHITESPACE:Du,CUSTOM_ELEMENT:Ru,DATA_ATTR:Cu,DOCTYPE_NAME:Zo,ERB_EXPR:Su,IS_ALLOWED_URI:Ko,IS_SCRIPT_OR_DATA:ku,MUSTACHE_EXPR:Tu,TMPLIT_EXPR:Au}),mn={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Lu=function(){return typeof window=="undefined"?null:window},Fu=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null,u="data-tt-policy-suffix";r&&r.hasAttribute(u)&&(n=r.getAttribute(u));let d="dompurify"+(n?"#"+n:"");try{return t.createPolicy(d,{createHTML(m){return m},createScriptURL(m){return m}})}catch(m){return console.warn("TrustedTypes policy "+d+" could not be created."),null}},Xo=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function el(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lu(),t=ae=>el(ae);if(t.version="3.2.4",t.removed=[],!l||!l.document||l.document.nodeType!==mn.document||!l.Element)return t.isSupported=!1,t;let{document:r}=l,n=r,u=n.currentScript,{DocumentFragment:d,HTMLTemplateElement:m,Node:y,Element:b,NodeFilter:P,NamedNodeMap:W=l.NamedNodeMap||l.MozNamedAttrMap,HTMLFormElement:K,DOMParser:H,trustedTypes:N}=l,B=b.prototype,ue=pn(B,"cloneNode"),Q=pn(B,"remove"),xe=pn(B,"nextSibling"),ke=pn(B,"childNodes"),fe=pn(B,"parentNode");if(typeof m=="function"){let ae=r.createElement("template");ae.content&&ae.content.ownerDocument&&(r=ae.content.ownerDocument)}let de,He="",{implementation:s,createNodeIterator:le,createDocumentFragment:J,getElementsByTagName:De}=r,{importNode:Ze}=n,Me=Xo();t.isSupported=typeof Qo=="function"&&typeof fe=="function"&&s&&s.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:ge,ERB_EXPR:Qe,TMPLIT_EXPR:_t,DATA_ATTR:xr,ARIA_ATTR:ht,IS_SCRIPT_OR_DATA:wr,ATTR_WHITESPACE:pt,CUSTOM_ELEMENT:Jr}=Yo,{IS_ALLOWED_URI:Kr}=Yo,Ve=null,mt=Ae({},[...zo,...gs,...vs,...bs,...Go]),qe=null,Ci=Ae({},[...Vo,...ys,...qo,..._a]),ze=Object.seal(Jo(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Er=null,Zr=null,ei=!0,gt=!0,Pi=!1,Xt=!0,Ot=!1,Mr=!0,Qt=!1,_r=!1,ot=!1,at=!1,Tr=!1,Jt=!1,Or=!0,lt=!1,Kt="user-content-",$t=!0,te=!1,Ge={},Zt=null,ti=Ae({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ri=null,Nr=Ae({},["audio","video","img","source","image","track"]),Sr=null,er=Ae({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ut="http://www.w3.org/1998/Math/MathML",Tt="http://www.w3.org/2000/svg",rt="http://www.w3.org/1999/xhtml",Ht=rt,ur=!1,Ur=null,Wr=Ae({},[ut,Tt,rt],ms),Ar=Ae({},["mi","mo","mn","ms","mtext"]),Nt=Ae({},["annotation-xml"]),vt=Ae({},["title","style","font","a","script"]),cr=null,ki=["application/xhtml+xml","text/html"],ct="text/html",Pe=null,Bt=null,Hi=r.createElement("form"),ii=function(T){return T instanceof RegExp||T instanceof Function},$r=function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Bt&&Bt===T)){if((!T||typeof T!="object")&&(T={}),T=Ei(T),cr=ki.indexOf(T.PARSER_MEDIA_TYPE)===-1?ct:T.PARSER_MEDIA_TYPE,Pe=cr==="application/xhtml+xml"?ms:Ta,Ve=or(T,"ALLOWED_TAGS")?Ae({},T.ALLOWED_TAGS,Pe):mt,qe=or(T,"ALLOWED_ATTR")?Ae({},T.ALLOWED_ATTR,Pe):Ci,Ur=or(T,"ALLOWED_NAMESPACES")?Ae({},T.ALLOWED_NAMESPACES,ms):Wr,Sr=or(T,"ADD_URI_SAFE_ATTR")?Ae(Ei(er),T.ADD_URI_SAFE_ATTR,Pe):er,ri=or(T,"ADD_DATA_URI_TAGS")?Ae(Ei(Nr),T.ADD_DATA_URI_TAGS,Pe):Nr,Zt=or(T,"FORBID_CONTENTS")?Ae({},T.FORBID_CONTENTS,Pe):ti,Er=or(T,"FORBID_TAGS")?Ae({},T.FORBID_TAGS,Pe):{},Zr=or(T,"FORBID_ATTR")?Ae({},T.FORBID_ATTR,Pe):{},Ge=or(T,"USE_PROFILES")?T.USE_PROFILES:!1,ei=T.ALLOW_ARIA_ATTR!==!1,gt=T.ALLOW_DATA_ATTR!==!1,Pi=T.ALLOW_UNKNOWN_PROTOCOLS||!1,Xt=T.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ot=T.SAFE_FOR_TEMPLATES||!1,Mr=T.SAFE_FOR_XML!==!1,Qt=T.WHOLE_DOCUMENT||!1,at=T.RETURN_DOM||!1,Tr=T.RETURN_DOM_FRAGMENT||!1,Jt=T.RETURN_TRUSTED_TYPE||!1,ot=T.FORCE_BODY||!1,Or=T.SANITIZE_DOM!==!1,lt=T.SANITIZE_NAMED_PROPS||!1,$t=T.KEEP_CONTENT!==!1,te=T.IN_PLACE||!1,Kr=T.ALLOWED_URI_REGEXP||Ko,Ht=T.NAMESPACE||rt,Ar=T.MATHML_TEXT_INTEGRATION_POINTS||Ar,Nt=T.HTML_INTEGRATION_POINTS||Nt,ze=T.CUSTOM_ELEMENT_HANDLING||{},T.CUSTOM_ELEMENT_HANDLING&&ii(T.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ze.tagNameCheck=T.CUSTOM_ELEMENT_HANDLING.tagNameCheck),T.CUSTOM_ELEMENT_HANDLING&&ii(T.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ze.attributeNameCheck=T.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),T.CUSTOM_ELEMENT_HANDLING&&typeof T.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ze.allowCustomizedBuiltInElements=T.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ot&&(gt=!1),Tr&&(at=!0),Ge&&(Ve=Ae({},Go),qe=[],Ge.html===!0&&(Ae(Ve,zo),Ae(qe,Vo)),Ge.svg===!0&&(Ae(Ve,gs),Ae(qe,ys),Ae(qe,_a)),Ge.svgFilters===!0&&(Ae(Ve,vs),Ae(qe,ys),Ae(qe,_a)),Ge.mathMl===!0&&(Ae(Ve,bs),Ae(qe,qo),Ae(qe,_a))),T.ADD_TAGS&&(Ve===mt&&(Ve=Ei(Ve)),Ae(Ve,T.ADD_TAGS,Pe)),T.ADD_ATTR&&(qe===Ci&&(qe=Ei(qe)),Ae(qe,T.ADD_ATTR,Pe)),T.ADD_URI_SAFE_ATTR&&Ae(Sr,T.ADD_URI_SAFE_ATTR,Pe),T.FORBID_CONTENTS&&(Zt===ti&&(Zt=Ei(Zt)),Ae(Zt,T.FORBID_CONTENTS,Pe)),$t&&(Ve["#text"]=!0),Qt&&Ae(Ve,["html","head","body"]),Ve.table&&(Ae(Ve,["tbody"]),delete Er.tbody),T.TRUSTED_TYPES_POLICY){if(typeof T.TRUSTED_TYPES_POLICY.createHTML!="function")throw hn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof T.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw hn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');de=T.TRUSTED_TYPES_POLICY,He=de.createHTML("")}else de===void 0&&(de=Fu(N,u)),de!==null&&typeof He=="string"&&(He=de.createHTML(""));Pt&&Pt(T),Bt=T}},tr=Ae({},[...gs,...vs,...Eu]),rr=Ae({},[...bs,..._u]),ni=function(T){let V=fe(T);(!V||!V.tagName)&&(V={namespaceURI:Ht,tagName:"template"});let ie=Ta(T.tagName),Fe=Ta(V.tagName);return Ur[T.namespaceURI]?T.namespaceURI===Tt?V.namespaceURI===rt?ie==="svg":V.namespaceURI===ut?ie==="svg"&&(Fe==="annotation-xml"||Ar[Fe]):!!tr[ie]:T.namespaceURI===ut?V.namespaceURI===rt?ie==="math":V.namespaceURI===Tt?ie==="math"&&Nt[Fe]:!!rr[ie]:T.namespaceURI===rt?V.namespaceURI===Tt&&!Nt[Fe]||V.namespaceURI===ut&&!Ar[Fe]?!1:!rr[ie]&&(vt[ie]||!tr[ie]):!!(cr==="application/xhtml+xml"&&Ur[T.namespaceURI]):!1},ft=function(T){fn(t.removed,{element:T});try{fe(T).removeChild(T)}catch(V){Q(T)}},Hr=function(T,V){try{fn(t.removed,{attribute:V.getAttributeNode(T),from:V})}catch(ie){fn(t.removed,{attribute:null,from:V})}if(V.removeAttribute(T),T==="is")if(at||Tr)try{ft(V)}catch(ie){}else try{V.setAttribute(T,"")}catch(ie){}},ai=function(T){let V=null,ie=null;if(ot)T="<remove></remove>"+T;else{let Ye=jo(T,/^[\r\n\t ]+/);ie=Ye&&Ye[0]}cr==="application/xhtml+xml"&&Ht===rt&&(T='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+T+"</body></html>");let Fe=de?de.createHTML(T):T;if(Ht===rt)try{V=new H().parseFromString(Fe,cr)}catch(Ye){}if(!V||!V.documentElement){V=s.createDocument(Ht,"template",null);try{V.documentElement.innerHTML=ur?He:Fe}catch(Ye){}}let et=V.body||V.documentElement;return T&&ie&&et.insertBefore(r.createTextNode(ie),et.childNodes[0]||null),Ht===rt?De.call(V,Qt?"html":"body")[0]:Qt?V.documentElement:et},Di=function(T){return le.call(T.ownerDocument||T,T,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT|P.SHOW_PROCESSING_INSTRUCTION|P.SHOW_CDATA_SECTION,null)},Br=function(T){return T instanceof K&&(typeof T.nodeName!="string"||typeof T.textContent!="string"||typeof T.removeChild!="function"||!(T.attributes instanceof W)||typeof T.removeAttribute!="function"||typeof T.setAttribute!="function"||typeof T.namespaceURI!="string"||typeof T.insertBefore!="function"||typeof T.hasChildNodes!="function")},Ri=function(T){return typeof y=="function"&&T instanceof y};function Ut(ae,T,V){Ea(ae,ie=>{ie.call(t,T,V,Bt)})}let si=function(T){let V=null;if(Ut(Me.beforeSanitizeElements,T,null),Br(T))return ft(T),!0;let ie=Pe(T.nodeName);if(Ut(Me.uponSanitizeElement,T,{tagName:ie,allowedTags:Ve}),T.hasChildNodes()&&!Ri(T.firstElementChild)&&Ct(/<[/\w]/g,T.innerHTML)&&Ct(/<[/\w]/g,T.textContent)||T.nodeType===mn.progressingInstruction||Mr&&T.nodeType===mn.comment&&Ct(/<[/\w]/g,T.data))return ft(T),!0;if(!Ve[ie]||Er[ie]){if(!Er[ie]&&ir(ie)&&(ze.tagNameCheck instanceof RegExp&&Ct(ze.tagNameCheck,ie)||ze.tagNameCheck instanceof Function&&ze.tagNameCheck(ie)))return!1;if($t&&!Zt[ie]){let Fe=fe(T)||T.parentNode,et=ke(T)||T.childNodes;if(et&&Fe){let Ye=et.length;for(let Xe=Ye-1;Xe>=0;--Xe){let bt=ue(et[Xe],!0);bt.__removalCount=(T.__removalCount||0)+1,Fe.insertBefore(bt,xe(T))}}}return ft(T),!0}return T instanceof b&&!ni(T)||(ie==="noscript"||ie==="noembed"||ie==="noframes")&&Ct(/<\/no(script|embed|frames)/i,T.innerHTML)?(ft(T),!0):(Ot&&T.nodeType===mn.text&&(V=T.textContent,Ea([ge,Qe,_t],Fe=>{V=dn(V,Fe," ")}),T.textContent!==V&&(fn(t.removed,{element:T.cloneNode()}),T.textContent=V)),Ut(Me.afterSanitizeElements,T,null),!1)},Li=function(T,V,ie){if(Or&&(V==="id"||V==="name")&&(ie in r||ie in Hi))return!1;if(!(gt&&!Zr[V]&&Ct(xr,V))){if(!(ei&&Ct(ht,V))){if(!qe[V]||Zr[V]){if(!(ir(T)&&(ze.tagNameCheck instanceof RegExp&&Ct(ze.tagNameCheck,T)||ze.tagNameCheck instanceof Function&&ze.tagNameCheck(T))&&(ze.attributeNameCheck instanceof RegExp&&Ct(ze.attributeNameCheck,V)||ze.attributeNameCheck instanceof Function&&ze.attributeNameCheck(V))||V==="is"&&ze.allowCustomizedBuiltInElements&&(ze.tagNameCheck instanceof RegExp&&Ct(ze.tagNameCheck,ie)||ze.tagNameCheck instanceof Function&&ze.tagNameCheck(ie))))return!1}else if(!Sr[V]){if(!Ct(Kr,dn(ie,pt,""))){if(!((V==="src"||V==="xlink:href"||V==="href")&&T!=="script"&&bu(ie,"data:")===0&&ri[T])){if(!(Pi&&!Ct(wr,dn(ie,pt,"")))){if(ie)return!1}}}}}}return!0},ir=function(T){return T!=="annotation-xml"&&jo(T,Jr)},oi=function(T){Ut(Me.beforeSanitizeAttributes,T,null);let{attributes:V}=T;if(!V||Br(T))return;let ie={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:qe,forceKeepAttr:void 0},Fe=V.length;for(;Fe--;){let et=V[Fe],{name:Ye,namespaceURI:Xe,value:bt}=et,Lt=Pe(Ye),tt=Ye==="value"?bt:yu(bt);if(ie.attrName=Lt,ie.attrValue=tt,ie.keepAttr=!0,ie.forceKeepAttr=void 0,Ut(Me.uponSanitizeAttribute,T,ie),tt=ie.attrValue,lt&&(Lt==="id"||Lt==="name")&&(Hr(Ye,T),tt=Kt+tt),Mr&&Ct(/((--!?|])>)|<\/(style|title)/i,tt)){Hr(Ye,T);continue}if(ie.forceKeepAttr||(Hr(Ye,T),!ie.keepAttr))continue;if(!Xt&&Ct(/\/>/i,tt)){Hr(Ye,T);continue}Ot&&Ea([ge,Qe,_t],jr=>{tt=dn(tt,jr," ")});let Cr=Pe(T.nodeName);if(Li(Cr,Lt,tt)){if(de&&typeof N=="object"&&typeof N.getAttributeType=="function"&&!Xe)switch(N.getAttributeType(Cr,Lt)){case"TrustedHTML":{tt=de.createHTML(tt);break}case"TrustedScriptURL":{tt=de.createScriptURL(tt);break}}try{Xe?T.setAttributeNS(Xe,Ye,tt):T.setAttribute(Ye,tt),Br(T)?ft(T):Bo(t.removed)}catch(jr){}}}Ut(Me.afterSanitizeAttributes,T,null)},li=function ae(T){let V=null,ie=Di(T);for(Ut(Me.beforeSanitizeShadowDOM,T,null);V=ie.nextNode();)Ut(Me.uponSanitizeShadowNode,V,null),si(V),oi(V),V.content instanceof d&&ae(V.content);Ut(Me.afterSanitizeShadowDOM,T,null)};return t.sanitize=function(ae){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=null,ie=null,Fe=null,et=null;if(ur=!ae,ur&&(ae="<!-->"),typeof ae!="string"&&!Ri(ae))if(typeof ae.toString=="function"){if(ae=ae.toString(),typeof ae!="string")throw hn("dirty is not a string, aborting")}else throw hn("toString is not a function");if(!t.isSupported)return ae;if(_r||$r(T),t.removed=[],typeof ae=="string"&&(te=!1),te){if(ae.nodeName){let bt=Pe(ae.nodeName);if(!Ve[bt]||Er[bt])throw hn("root node is forbidden and cannot be sanitized in-place")}}else if(ae instanceof y)V=ai("<!---->"),ie=V.ownerDocument.importNode(ae,!0),ie.nodeType===mn.element&&ie.nodeName==="BODY"||ie.nodeName==="HTML"?V=ie:V.appendChild(ie);else{if(!at&&!Ot&&!Qt&&ae.indexOf("<")===-1)return de&&Jt?de.createHTML(ae):ae;if(V=ai(ae),!V)return at?null:Jt?He:""}V&&ot&&ft(V.firstChild);let Ye=Di(te?ae:V);for(;Fe=Ye.nextNode();)si(Fe),oi(Fe),Fe.content instanceof d&&li(Fe.content);if(te)return ae;if(at){if(Tr)for(et=J.call(V.ownerDocument);V.firstChild;)et.appendChild(V.firstChild);else et=V;return(qe.shadowroot||qe.shadowrootmode)&&(et=Ze.call(n,et,!0)),et}let Xe=Qt?V.outerHTML:V.innerHTML;return Qt&&Ve["!doctype"]&&V.ownerDocument&&V.ownerDocument.doctype&&V.ownerDocument.doctype.name&&Ct(Zo,V.ownerDocument.doctype.name)&&(Xe="<!DOCTYPE "+V.ownerDocument.doctype.name+`>
`+Xe),Ot&&Ea([ge,Qe,_t],bt=>{Xe=dn(Xe,bt," ")}),de&&Jt?de.createHTML(Xe):Xe},t.setConfig=function(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$r(ae),_r=!0},t.clearConfig=function(){Bt=null,_r=!1},t.isValidAttribute=function(ae,T,V){Bt||$r({});let ie=Pe(ae),Fe=Pe(T);return Li(ie,Fe,V)},t.addHook=function(ae,T){typeof T=="function"&&fn(Me[ae],T)},t.removeHook=function(ae,T){if(T!==void 0){let V=gu(Me[ae],T);return V===-1?void 0:vu(Me[ae],V,1)[0]}return Bo(Me[ae])},t.removeHooks=function(ae){Me[ae]=[]},t.removeAllHooks=function(){Me=Xo()},t}var Iu=el();tl.exports=Iu});var Cs=Ya(rs());var Qi=class{constructor(t,r){t=t||[],this.lines=t,this.text=r,this.offset2loc=new Map,this.line2offset=new Map;for(var n of t)n.offset>=0&&(this.offset2loc[n.offset]||(this.offset2loc[n.offset]=n),this.line2offset[n.line]||(this.line2offset[n.line]=n.offset))}findLineForOffset(t,r){if(this.offset2loc)for(var n=0;n<=r;n++){var u=this.offset2loc[t];if(u)return u;t--}return null}lineCount(){return this.lines.length}};function io(l){return"errors"in l}function no(l){return"output"in l}var ao=Ya(rs()),Hn=class{constructor(t){this.preset_id=Mt(t)}async getRemoteFile(t){return new Promise((r,n)=>Nn(t,r,pi(t)?"arraybuffer":"text"))}async getFileData(t){var r="presets/"+this.preset_id+"/"+t,n=await this.getRemoteFile(r);return n&&console.log("read",r,n.length,"bytes"),n}async setFileData(t,r){}};var Ni=class{constructor(t,r){this.basefs=t,this.overlayfs=r}async getFileData(t){var r=await this.overlayfs.getFileData(t);return r==null?this.basefs.getFileData(t):r}async setFileData(t,r){return await this.overlayfs.setFileData(t,r),this.basefs.setFileData(t,r)}},Bn=class{constructor(t){this.store=t}async getFileData(t){return this.store.getItem(t)}async setFileData(t,r){return this.store.setItem(t,r)}};var jn=class{constructor(t,r,n,u){this.filedata={};this.pendingWorkerMessages=0;this.tools_preloaded={};this.isCompiling=!1;this.filename2path={};this.worker=t,this.platform_id=r,this.platform=n,this.filesystem=u,t.onmessage=d=>{this.receiveWorkerMessage(d.data)}}receiveWorkerMessage(t){var r=this.pendingWorkerMessages>1;r?(this.sendBuild(),this.pendingWorkerMessages=1):(this.callbackBuildStatus&&this.callbackBuildStatus(!1),this.isCompiling||(console.log(this.pendingWorkerMessages),console.trace()),this.isCompiling=!1,this.pendingWorkerMessages=0),t&&no(t)?this.processBuildResult(t):io(t)&&this.processBuildListings(t),this.callbackBuildResult(t)}getToolForFilename(t){return this.remoteTool?"remote:"+this.remoteTool:this.platform.getToolForFilename(t)}preloadWorker(t){var r=this.getToolForFilename(t);r&&!this.tools_preloaded[r]&&(this.worker.postMessage({preload:r,platform:this.platform_id}),this.tools_preloaded[r]=!0)}pushAllFiles(t,r){t.push(r);var n=Xa(this.mainPath);n.length>0&&n!="local"&&t.push(n+"/"+r)}parseIncludeDependencies(t){let r=[],n;if(this.platform_id.startsWith("verilog")){let u=/^\s*(`include|[.]include)\s+"(.+?)"/gmi;for(;n=u.exec(t);)this.pushAllFiles(r,n[2]);let d=/^\s*\$(include|\$dofile|\$write_image_in_table)\('(.+?)'/gmi;for(;n=d.exec(t);)this.pushAllFiles(r,n[2]);let m=/^\s*([.]arch)\s+(\w+)/gmi;for(;n=m.exec(t);)this.pushAllFiles(r,n[2]+".json");let y=/\$readmem[bh]\("(.+?)"/gmi;for(;n=y.exec(t);)this.pushAllFiles(r,n[1])}else{let u=/^\s*[.#%]?(include|incbin|embed)\s+"(.+?)"/gmi;for(;n=u.exec(t);)this.pushAllFiles(r,n[2]);let d=/^\s*([;']|[/][/])#(resource)\s+"(.+?)"/gm;for(;n=d.exec(t);)this.pushAllFiles(r,n[3]);let m=/^\s+(USE|ASM)\s+(\S+[.]\S+)/gm;for(;n=m.exec(t);)this.pushAllFiles(r,n[2]);let y=/^\s*(import|embed)\s*"(.+?)";/gmi;for(;n=y.exec(t);)n[1]=="import"?this.pushAllFiles(r,n[2]+".wiz"):this.pushAllFiles(r,n[2]);let b=/^\s*(import)\s*"(.+?)"/gmi;for(;n=b.exec(t);)this.pushAllFiles(r,n[2]);let P=/^[!]src\s+"(.+?)"/gmi;for(;n=P.exec(t);)this.pushAllFiles(r,n[1])}return r}parseLinkDependencies(t){let r=[],n;if(!this.platform_id.startsWith("verilog")){let u=/^\s*([;]|[/][/])#link\s+"(.+?)"/gm;for(;n=u.exec(t);)this.pushAllFiles(r,n[2])}return r}loadFileDependencies(t){let r=this.parseIncludeDependencies(t),n=this.parseLinkDependencies(t),u=r.concat(n);return this.loadFiles(u).then(d=>{if(d)for(let m of d)m.link=n.indexOf(m.path)>=0;return d})}okToSend(){return this.pendingWorkerMessages++==0&&this.mainPath!=null}updateFileInStore(t,r){this.filesystem.setFileData(t,r)}buildWorkerMessage(t){this.preloadWorker(this.mainPath);var r={updates:[],buildsteps:[]},n=this.stripLocalPath(this.mainPath),u=this.getFile(this.mainPath),d=[];r.updates.push({path:n,data:u}),this.filename2path[n]=this.mainPath;let y=this.getToolForFilename(this.mainPath).startsWith("remote:");for(var b of t)(!b.link||y)&&(r.updates.push({path:b.filename,data:b.data}),d.push(b.filename)),this.filename2path[b.filename]=b.path;r.buildsteps.push({path:n,files:[n].concat(d),platform:this.platform_id,tool:this.getToolForFilename(this.mainPath),mainfile:!0});for(var b of t)b.data&&b.link&&(this.preloadWorker(b.filename),r.updates.push({path:b.filename,data:b.data}),r.buildsteps.push({path:b.filename,files:[b.filename].concat(d),platform:this.platform_id,tool:this.getToolForFilename(b.path)}));return this.dataItems&&(r.setitems=this.dataItems),r}async loadFiles(t){var r=[],n=(m,y)=>{r.push({path:m,filename:this.stripLocalPath(m),link:!0,data:y})};for(var u of t)if(u in this.filedata){var d=this.filedata[u];d&&n(u,d)}else{var d=await this.filesystem.getFileData(u);d?(this.filedata[u]=d,n(u,d)):this.filedata[u]=null}return r}getFile(t){return this.filedata[t]}iterateFiles(t){for(var r in this.filedata)t(r,this.getFile(r))}sendBuild(){if(!this.mainPath)throw Error("need to call setMainFile first");var t=this.getFile(this.mainPath);if(t instanceof Uint8Array){this.isCompiling=!0,this.receiveWorkerMessage({output:t,errors:[],listings:null,symbolmap:null,params:{}});return}var r=typeof t=="string"?t:"";return this.loadFileDependencies(r).then(n=>{n||(n=[]);var u=this.buildWorkerMessage(n);this.worker.postMessage(u),this.isCompiling=!0})}updateFile(t,r){this.filedata[t]!=r&&(this.updateFileInStore(t,r),this.filedata[t]=r,this.okToSend()&&(this.callbackBuildStatus&&this.callbackBuildStatus(!0),this.sendBuild()))}setMainFile(t){this.mainPath=t,this.callbackBuildStatus&&this.callbackBuildStatus(!0),this.sendBuild()}processBuildListings(t){if(t.listings){this.listings=t.listings;for(var r in this.listings){var n=this.listings[r];n.lines&&(n.sourcefile=new Qi(n.lines,n.text)),n.asmlines&&(n.assemblyfile=new Qi(n.asmlines,n.text))}}}processBuildResult(t){this.processBuildListings(t),this.processBuildSegments(t)}processBuildSegments(t){var r=this.platform.getMemoryMap&&this.platform.getMemoryMap().main||[];r!=null&&r.length&&r.forEach(n=>n.source="native"),t.segments&&(t.segments.forEach(n=>n.source="linker"),r=r.concat(t.segments||[])),r.sort((n,u)=>n.start-u.start),this.segments=r}getListings(){return this.listings}getListingForFile(t){var r=Et(this.stripLocalPath(t)),n=this.getListings();for(var u in n)if(u==t)return n[u];for(var u in n)if(Et(u)==r)return n[u]}stripLocalPath(t){if(this.mainPath){var r=Xa(this.mainPath);r!=""&&t.startsWith(r+"/")&&(t=t.substring(r.length+1))}return t}updateDataItems(t){this.dataItems=t,this.okToSend()&&this.sendBuild()}};function zn(l){var t=ao.default.createInstance({name:"__"+l,version:2});return t}var is=oo(),Vn=class{constructor(t,r){this.id2window={};this.id2createfn={};this.id2showfn={};this.id2div={};this.containerdiv=t,this.project=r,this.undofiles=[]}isWindow(t){return this.id2createfn[t]!=null}setCreateFunc(t,r){this.id2createfn[t]=r}setShowFunc(t,r){this.id2showfn[t]=r}create(t){var r=this.id2window[t];r||(console.log("creating window",t),r=this.id2window[t]=this.id2createfn[t](t));var n=this.id2div[t];return n||(n=this.id2div[t]=r.createDiv(this.containerdiv),is(n).hide()),r}createOrShow(t,r){var n=this.create(t),u=this.id2div[t];return this.activewnd!=n?(this.activediv&&is(this.activediv).hide(),this.activewnd&&this.activewnd.setVisible&&this.activewnd.setVisible(!1),this.activediv=u,this.activewnd=n,is(u).show(),this.refresh(!0),this.refreshErrors(),n.setVisible&&n.setVisible(!0),this.id2showfn[t]&&this.id2showfn[t](t,n)):this.refresh(r),this.activeid=t,n}put(t,r){this.id2window[t]=r}refresh(t){this.activewnd&&this.activewnd.refresh&&this.activewnd.refresh(t)}tick(){this.activewnd&&this.activewnd.tick&&this.activewnd.tick()}setErrors(t){this.lasterrors=t,this.refreshErrors()}refreshErrors(){this.activewnd&&this.activewnd.markErrors&&(this.lasterrors&&this.lasterrors.length?this.activewnd.markErrors(this.lasterrors):this.activewnd.clearErrors())}getActive(){return this.activewnd}getActiveID(){return this.activeid}getCurrentText(){if(this.activewnd&&this.activewnd.getValue)return this.activewnd.getValue();bootbox.alert("Please switch to an editor window.")}resize(){this.activeid&&this.activewnd&&this.activewnd.recreateOnResize&&(this.activewnd=null,this.id2window[this.activeid]=null,this.id2div[this.activeid]=null,this.createOrShow(this.activeid))}updateFile(t,r){var n=this.id2window[t];n&&n.setText&&typeof r=="string"?(n.setText(r),this.undofiles.push(t)):this.project.updateFile(t,r)}undoStep(){var t=this.undofiles.pop(),r=this.id2window[t];r&&r.undoStep?r.undoStep():bootbox.alert("No more steps to undo.")}updateAllOpenWindows(t){for(var r in this.id2window){var n=this.id2window[r];n&&n.setText&&t.getItem(r).then(u=>{this.updateFile(r,u)})}}findWindowWithFilePrefix(t){t=It(Et(t));for(var r in this.id2createfn)if(!(r.toLowerCase().endsWith(".h")||r.toLowerCase().endsWith(".inc")||r.toLowerCase().endsWith(".bas"))&&It(Et(r))==t)return r;return null}};var Yl=`$NAME
=====

[Open this project in 8bitworkshop](http://8bitworkshop.com/redir.html?platform=$PLATFORM&githubURL=$GITHUBURL&file=$MAINFILE).
`;function Ui(){for(var l={},t=0;t<localStorage.length;t++){var r=localStorage.key(t);if(r.startsWith("__repo__")){var n=JSON.parse(localStorage.getItem(r)),u=r.substring(8);l[u]=n}}return l}function Ji(l){var t=l.split("/",8);return t.length<5||t[0]!="https:"||t[2]!="github.com"||t[5]&&t[5]!="tree"?null:{user:t[3],repo:t[4],repopath:t[3]+"/"+t[4],branch:t[6],subtreepath:t[7]}}var qn=class{constructor(t,r,n,u){this.githubCons=t,this.githubToken=r,this.store=n,this.project=u,this.recreateGithub()}recreateGithub(){this.github=new this.githubCons({token:this.githubToken})}login(){if(this.githubToken&&this.githubToken.length)return new Promise((r,n)=>{r()});var t=new firebase.auth.GithubAuthProvider;return t.addScope("repo"),firebase.auth().signInWithPopup(t).then(r=>{this.githubToken=r.credential.accessToken;var n=r.user;this.recreateGithub(),document.cookie="__github_key="+this.githubToken+";path=/;max-age=31536000",console.log("Stored GitHub OAUTH key")})}logout(){return this.githubToken&&this.githubToken.length?firebase.auth().signOut().then(()=>{document.cookie="__github_key=;path=/;max-age=0",this.githubToken=null,this.recreateGithub()}):new Promise((t,r)=>{t()})}isFileIgnored(t){return t=t.toUpperCase(),!!(t.startsWith("LICENSE")||t.startsWith("README")||t.startsWith("."))}async getGithubSession(t){var r=Ji(t);if(!r)throw new Error("Please enter a valid GitHub URL.");var n=Ui()[r.repopath],u=r.branch||n&&n.branch,d=this.github.repos(r.user,r.repo);try{u=(await d.fetch()).defaultBranch||"master"}catch(y){console.log("could not fetch default branch: "+y),u="main"}console.log("branch =",u);var m={url:t,user:r.user,reponame:r.repo,repopath:r.repopath,branch:u,subtreepath:r.subtreepath,prefix:"",repo:d,platform_id:this.project?this.project.platform_id:n?n.platform_id:null};return m}getGithubHEADTree(t){var r;return this.getGithubSession(t).then(n=>(r=n,r.repo.git.refs.heads(r.branch).fetch())).then(n=>(r.head=n,r.sha=n.object.sha,r.repo.git.trees(r.sha).fetch())).then(n=>{if(r.subtreepath){for(let u of n.tree)if(u.type=="tree"&&u.path==r.subtreepath&&u.sha)return r.repo.git.trees(u.sha).fetch();throw Error("Cannot find subtree '"+r.subtreepath+"' in tree "+n.sha)}return n}).then(n=>(r.tree=n,r))}bind(t,r){var n="__repo__"+t.repopath;if(r){var u={url:t.url,branch:t.branch,platform_id:t.platform_id,mainPath:t.mainPath,sha:t.sha};console.log("storing",u),localStorage.setItem(n,JSON.stringify(u))}else localStorage.removeItem(n)}import(t){var r;return this.getGithubSession(t).then(n=>(r=n,r.repo.contents("README.md").read())).catch(n=>(console.log(n),console.log("no README.md found"),r.repo.fetch().then(u=>""))).then(n=>{var u;if(u=/8bitworkshop.com[^)]+file=([^)&]+)/.exec(n),u&&u[1]&&(console.log("main path: '"+u[1]+"'"),r.mainPath=u[1]),u=/8bitworkshop.com[^)]+platform=([A-Za-z0-9._\-]+)/.exec(n),u){if(console.log("platform id: '"+u[1]+"'"),r.platform_id&&!r.platform_id.startsWith(u[1]))throw Error("Platform mismatch: Repository is "+u[1]+", you have "+r.platform_id+" selected.");r.platform_id=u[1]}return this.bind(r,!0),r})}pull(t,r){var n;return this.getGithubHEADTree(t).then(u=>{n=u;let d=[];return n.paths=[],n.tree.tree.forEach(m=>{if(console.log(m.path,m.type,m.size),n.paths.push(m.path),m.type=="blob"&&!this.isFileIgnored(m.path)){var y=n.repo.git.blobs(m.sha).fetch().then(b=>{var P=n.prefix+m.path,W=m.size,K=b.encoding,H=b.content;if(b.encoding=="base64"){var N=Fn(atob(H)),B=pi(m.path,N);H=B?N:Mn(N)}return b.size!=H.length&&(H=H.slice(0,b.size)),(r||this.store).setItem(P,H)});d.push(y)}else console.log("ignoring "+m.path)}),Promise.all(d)}).then(u=>n)}importAndPull(t){return this.import(t).then(r=>this.pull(t))}publish(t,r,n,u){var d,m=this.project.platform_id,y=this.project.stripLocalPath(this.project.mainPath);return this.github.user.repos.create({name:t,description:r,private:u,auto_init:!1,license_template:n}).then(b=>{d=b;var P=Yl;P=P.replace(/\$NAME/g,encodeURIComponent(t)),P=P.replace(/\$PLATFORM/g,encodeURIComponent(m)),P=P.replace(/\$GITHUBURL/g,encodeURIComponent(d.htmlUrl)),P=P.replace(/\$MAINFILE/g,encodeURIComponent(y));var W={message:"8bitworkshop: updated metadata in README.md",content:btoa(P)};return d.contents("README.md").add(W)}).then(()=>this.getGithubSession(d.htmlUrl))}commit(t,r,n){var u;return r||(r="updated from 8bitworkshop.com"),this.getGithubHEADTree(t).then(d=>{if(u=d,u.subtreepath)throw Error("Sorry, right now you can only commit files to the root directory of a repository.");return Promise.all(n.map(m=>typeof m.data=="string"?u.repo.git.blobs.create({content:m.data,encoding:"utf-8"}):u.repo.git.blobs.create({content:btoa(In(m.data)),encoding:"base64"})))}).then(d=>u.repo.git.trees.create({tree:n.map((m,y)=>({path:m.path,mode:"100644",type:"blob",sha:d[y].sha})),base_tree:u.tree.sha})).then(d=>u.repo.git.commits.create({message:r,tree:d.sha,parents:[u.head.object.sha]})).then(d=>u.repo.commits(d.sha).fetch()).then(d=>(u.commit=d,u))}push(t){return t.head.update({sha:t.commit.sha}).then(r=>t)}deleteRepository(t){return this.getGithubSession(t).then(r=>r.repo.remove())}};var Ki=window.matchMedia&&window.matchMedia("only screen and (max-width: 760px)").matches;function Rr(l,t){var r=$(document.createElement("div"));return l&&r.appendTo(l),t&&r.addClass(t),r}function co(l,t){var r=l.charCoords({line:t,ch:0},"local").top,n=l.getScrollerElement().offsetHeight/2;l.scrollTo(null,r-n-5)}function lo(l,t){var r=document.createElement("span");return r.setAttribute("class",t),r.appendChild(document.createTextNode(l)),r}var Xn=64,Xl=200,ns={default:{theme:"mbo"},6502:{isAsm:!0},z80:{isAsm:!0},jsasm:{isAsm:!0},gas:{isAsm:!0},vasm:{isAsm:!0},inform6:{theme:"cobalt"},markdown:{lineWrap:!0},fastbasic:{noGutters:!0},basic:{noLineNumbers:!0,noGutters:!0},ecs:{theme:"mbo",isAsm:!0}},uo={input:null},Wi=class{constructor(t,r){this.updateTimer=null;this.dirtylisting=!0;this.errormsgs=[];this.errorwidgets=[];this.errormarks=[];this.refreshDelayMsec=300;this.path=t,this.mode=r}createDiv(t){var r=document.createElement("div");r.setAttribute("class","editor"),t.appendChild(r);var n=be.getFile(this.path),u=n&&this.mode=="verilog"&&/__asm\b([\s\S]+?)\b__endasm\b/.test(n);return this.newEditor(r,u),n&&(this.setText(n),this.editor.setSelection({line:0,ch:0},{line:0,ch:0},{scroll:!0})),this.setupEditor(),be.getToolForFilename(this.path).startsWith("remote:")&&(this.refreshDelayMsec=1e3),r}setVisible(t){t&&this.editor.focus()}newEditor(t,r){var n=ns[this.mode]||ns.default,u=r||n.isAsm,d=!!n.lineWrap,m=n.theme||ns.default.theme,y=!n.noLineNumbers&&!Ki;re.embed&&(y=!1,u=!1);var b=["CodeMirror-linenumbers","gutter-offset","gutter-info"];u&&(b=["CodeMirror-linenumbers","gutter-offset","gutter-bytes","gutter-clock","gutter-info"]),(n.noGutters||Ki)&&(b=["gutter-info"]),this.editor=CodeMirror(t,{theme:m,lineNumbers:y,matchBrackets:!0,tabSize:8,indentAuto:!0,lineWrapping:d,gutters:b})}editorChanged(){clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{be.updateFile(this.path,this.editor.getValue())},this.refreshDelayMsec),this.markHighlight&&(this.markHighlight.clear(),this.markHighlight=null)}setupEditor(){this.editor.on("changes",(t,r)=>{this.editorChanged()}),this.editor.on("cursorActivity",t=>{this.inspectUnderCursor()}),this.editor.on("gutterClick",(t,r)=>{this.toggleBreakpoint(r)}),this.editor.setOption("mode",this.mode),this.editor.on("beforeChange",(t,r)=>{uo.input&&r.text&&(r.text=r.text.map(uo.input))})}inspectUnderCursor(){var t=this.editor.getCursor(!0),r=this.editor.getCursor(!1);if(t.line==r.line&&t.ch<r.ch&&r.ch-t.ch<80){var n=this.editor.getSelection();this.inspect(n)}else this.inspect(null)}inspect(t){var r;if(k.inspect&&(r=k.inspect(t)),this.inspectWidget&&(this.inspectWidget.clear(),this.inspectWidget=null),r){var n=lo(r,"tooltipinfoline"),u=this.editor.getCursor().line;this.inspectWidget=this.editor.addLineWidget(u,n,{above:!1})}}setText(t){var r,n,u=this.editor.getValue();u!=t&&(this.editor.setValue(t),u==""&&this.editor.clearHistory())}insertText(t){var r=this.editor.getCursor();this.editor.replaceRange(t,r,r)}highlightLines(t,r){var n="hilite-span",u={className:n,inclusiveLeft:!0};this.markHighlight=this.editor.markText({line:t,ch:0},{line:r,ch:0},u),this.editor.scrollIntoView({from:{line:t,ch:0},to:{line:r,ch:0}})}replaceSelection(t,r,n){this.editor.setSelection(this.editor.posFromIndex(t),this.editor.posFromIndex(r)),this.editor.replaceSelection(n)}getValue(){return this.editor.getValue()}getPath(){return this.path}addError(t){if(!t.path||this.path.endsWith(t.path)){var r=this.editor.lineCount(),n=t.line-1;if((isNaN(n)||n<0||n>=r)&&(n=0),this.addErrorMarker(n,t.msg),t.start!=null){var u={className:"mark-error",inclusiveLeft:!0},d={line:n,ch:t.end?t.start:t.start-1},m={line:n,ch:t.end?t.end:t.start},y=this.editor.markText(d,m,u);this.errormarks.push(y)}}}addErrorMarker(t,r){var n=document.createElement("div");n.setAttribute("class","tooltipbox tooltiperror"),n.appendChild(document.createTextNode("\u24CD")),this.editor.setGutterMarker(t,"gutter-info",n),this.errormsgs.push({line:t,msg:r}),$(n).mouseover(u=>{this.expandErrors()})}addErrorLine(t,r){var n=lo(r,"tooltiperrorline");this.errorwidgets.push(this.editor.addLineWidget(t,n))}expandErrors(){for(var t;t=this.errormsgs.shift();)this.addErrorLine(t.line,t.msg)}markErrors(t){this.clearErrors(),t=t.slice(0,Xl);for(var r of t)this.addError(r)}clearErrors(){for(this.dirtylisting=!0,this.editor.clearGutter("gutter-info"),this.errormsgs=[];this.errorwidgets.length;)this.errorwidgets.shift().clear();for(;this.errormarks.length;)this.errormarks.shift().clear()}getSourceFile(){return this.sourcefile}updateListing(){this.clearErrors(),this.editor.clearGutter("gutter-bytes"),this.editor.clearGutter("gutter-offset"),this.editor.clearGutter("gutter-clock");var t=this.sourcefile.lines||[];for(var r of t)if(r.offset>=0&&this.setGutter("gutter-offset",r.line-1,Ne(r.offset&65535,4)),r.insns){var n=r.insns.length>9?"...":r.insns;if(this.setGutter("gutter-bytes",r.line-1,n),r.iscode){if(r.cycles)this.setGutter("gutter-clock",r.line-1,r.cycles+"");else if(k.getOpcodeMetadata){var u=parseInt(r.insns.split(" ")[0],16),d=k.getOpcodeMetadata(u,r.offset);if(d&&d.minCycles){var m=d.minCycles+"";this.setGutter("gutter-clock",r.line-1,m)}}}}}setGutter(t,r,n){var u=this.editor.lineInfo(r);if(!(u&&u.gutterMarkers&&u.gutterMarkers[t])){var d=document.createTextNode(n);this.editor.setGutterMarker(r,t,d)}}setGutterBytes(t,r){this.setGutter("gutter-bytes",t-1,r)}setTimingResult(t){if(this.editor.clearGutter("gutter-bytes"),this.sourcefile!=null)for(let d of Object.keys(this.sourcefile.line2offset)){let m=this.sourcefile.line2offset[d],y=t.pc2clockrange[m];var r=y&&y.minclocks,n=y&&y.maxclocks;if(r>=0&&n>=0){var u;n==r?u=r+"":u=r+"-"+n,n==t.MAX_CLOCKS&&(u+="+"),this.setGutterBytes(parseInt(d),u)}}}setCurrentLine(t,r){var n=k.isBlocked&&k.isBlocked(),u=y=>{var b=document.createElement("div"),P=n?"currentpc-marker-blocked":"currentpc-marker";b.classList.add(P),b.appendChild(document.createTextNode("\u25B6")),this.editor.setGutterMarker(y.line-1,"gutter-info",b)};if(this.clearCurrentLine(r),t){u(t),r&&this.editor.setCursor({line:t.line-1,ch:t.start||0},{scroll:!0});var d=n?"currentpc-span-blocked":"currentpc-span",m={className:d,inclusiveLeft:!0};t.start||t.end?this.markCurrentPC=this.editor.markText({line:t.line-1,ch:t.start},{line:t.line-1,ch:t.end||t.start+1},m):this.markCurrentPC=this.editor.markText({line:t.line-1,ch:0},{line:t.line,ch:0},m),this.currentDebugLine=t}}clearCurrentLine(t){this.currentDebugLine&&(this.editor.clearGutter("gutter-info"),t&&this.editor.setSelection(this.editor.getCursor()),this.currentDebugLine=null),this.markCurrentPC&&(this.markCurrentPC.clear(),this.markCurrentPC=null)}getActiveLine(){if(this.sourcefile){var t=qr&&qr.c;if(!t&&k.getCPUState&&!k.isRunning()&&(t=k.getCPUState()),t){var r=t&&(t.EPC||t.PC),n=this.sourcefile.findLineForOffset(r,Xn);return n}}}refreshDebugState(t){this.clearCurrentLine(t);var r=this.getActiveLine();r&&this.setCurrentLine(r,t)}refreshListing(){var t=be.getListingForFile(this.path);t&&t.sourcefile&&t.sourcefile!==this.sourcefile&&(this.sourcefile=t.sourcefile,this.dirtylisting=!0),!(!this.sourcefile||!this.dirtylisting)&&(this.updateListing(),this.dirtylisting=!1)}refresh(t){this.refreshListing(),this.refreshDebugState(t)}tick(){this.refreshDebugState(!1)}getLine(t){return this.editor.getLine(t-1)}getCurrentLine(){return this.editor.getCursor().line+1}getCursorPC(){for(var t=this.getCurrentLine();this.sourcefile&&t>=0;){var r=this.sourcefile.line2offset[t];if(r>=0)return r;t--}return-1}undoStep(){this.editor.execCommand("undo")}toggleBreakpoint(t){if(this.sourcefile!=null){var r=this.sourcefile.line2offset[t+1];en(r)}}},as=1024,Zi=class{getDisasmView(){return this.disasmview}createDiv(t){var r=document.createElement("div");return r.setAttribute("class","editor"),t.appendChild(r),this.newEditor(r),r}newEditor(t){this.disasmview=CodeMirror(t,{mode:"z80",theme:"cobalt",tabSize:8,readOnly:!0,styleActiveLine:!0})}refresh(t){let r=qr||k.saveState(),n=r.c?r.c.PC:0,u=0,d=0,m=k.debugSymbols&&k.debugSymbols.addr2symbol||{},y=(W,K)=>{let H="",N=0;for(;N<K;){let B=W+N|0,ue=k.disassemble(B,k.readAddress.bind(k)),Q="",xe="";for(let de=0;de<ue.nbytes;de++)Q+=Ne(k.readAddress(B+de));for(;Q.length<14;)Q+=" ";let ke=ue.line;if(m&&ue.isaddr&&(ke=ke.replace(/([^#])[$]([0-9A-F]+)/,(de,...He)=>{let s=parseInt(He[1],16),le=m[s];return le?He[0]+le:(le=m[s-1],le?He[0]+le+"+1":de)})),m){let de=m[B];de&&(xe="; "+de)}let fe=Ne(B,4)+"	"+Yi(Q,14)+"	"+Yi(ke,30)+xe+`
`;H+=fe,B==n&&(d=u),u++,N+=ue.nbytes||1}return H};var b=n<0?n-as:Math.max(0,n-as);let P=y(b,n-b)+y(n,as);this.disasmview.setValue(P),t&&this.disasmview.setCursor(d,0),co(this.disasmview,d)}getCursorPC(){var t=this.disasmview.getCursor().line;if(t>=0){var r=this.disasmview.getLine(t).trim().split(/\s+/);if(r&&r.length>=1){var n=parseInt(r[0],16);if(n>=0)return n}}return-1}},Yn=class extends Zi{constructor(t){super(),this.path=t}refreshListing(){var t=be.getListingForFile(this.path);this.assemblyfile=t&&(t.assemblyfile||t.sourcefile)}refresh(t){if(this.refreshListing(),!!this.assemblyfile){var r=this.assemblyfile.text,n=this.getDisasmView();if(n.setValue(r),!!k.saveState){var u=qr||k.saveState(),d=u.c?u.c.EPC||u.c.PC:0;if(d>=0&&this.assemblyfile){var m=this.assemblyfile.findLineForOffset(d,Xn);m&&(t&&n.setCursor(m.line-1,0),co(n,m.line-1))}}}}};function fo(l){return l.endsWith("_SIZE__")||l.endsWith("_LAST__")||l.endsWith("STACKSIZE__")||l.endsWith("FILEOFFS__")||l.startsWith("l__")||l.startsWith("s__")||l.startsWith(".__.")}var tn=class{constructor(){this.recreateOnResize=!0;this.hibits=0;this.totalRows=5120}createDiv(t){var r=document.createElement("div");return r.setAttribute("class","memdump"),t.appendChild(r),this.showMemoryWindow(t,r),this.maindiv=r}showMemoryWindow(t,r){this.memorylist=new Ys({w:$(t).width(),h:$(t).height(),itemHeight:Qs(),totalRows:this.totalRows,generatorFn:u=>{var d=this.getMemoryLineAt(u),m=document.createElement("div");if(this.dumplines){var y=this.dumplines[u];y&&m.classList.add("seg_"+this.getMemorySegment(this.dumplines[u].a|this.hibits))}return m.appendChild(document.createTextNode(d)),m}}),$(r).append(this.memorylist.container),this.tick();let n=rn();n&&this.dumplines&&this.scrollToAddress(n.data_start)}scrollToAddress(t){this.dumplines&&(this.hibits=t&4294901760,this.memorylist.scrollToItem(this.findMemoryWindowLine(t&65535)))}refresh(){this.dumplines=null,this.tick()}tick(){this.memorylist&&$(this.maindiv).find("[data-index]").each((t,r)=>{var n=$(r),u=parseInt(n.attr("data-index")),d=n.text(),m=this.getMemoryLineAt(u);d!=m&&n.text(m)})}getMemoryLineAt(t){var r=t*16,n=0,u=16,d;if(this.getDumpLines()){var m=this.dumplines[t];if(m)r=m.a&65520,n=m.a-r,u=n+m.l,d=m.s;else return"."}for(var y=Ne(r+n,4)+" ",b=0;b<n;b++)y+="   ";n>8&&(y+=" ");for(var b=n;b<u;b++){var P=this.readAddress(r+b|this.hibits);b==8&&(y+=" "),y+=" "+(typeof P=="number"?Ne(P,2):"??")}for(var b=u;b<16;b++)y+="   ";return d&&(y+="  "+d),y}readAddress(t){return k.readAddress(t)}getDumpLineAt(t){var r=this.dumplines[t];if(r)return r.a+" "+r.s}getDumpLines(){var t=k.debugSymbols&&k.debugSymbols.addr2symbol||{};if(this.dumplines==null){this.dumplines=[];var r=0,n;for(let y of Object.keys(t)){var u=parseInt(y),d=t[u|this.hibits];if(n)for(fo(n)&&(n="");r<u&&this.dumplines.length<65536;){var m=r+16&1048560;m>u&&(m=u),this.dumplines.push({a:r,l:m-r,s:n}),r=m}n=d}}return this.dumplines}getMemorySegment(t){let r=rn();if(r){if(t>=r.data_start&&t<r.data_start+r.data_size)return k.getSP&&t>=k.getSP()-15?"stack":"data";if(t>=r.code_start&&t<r.code_start+(r.code_size||r.rom_size))return"code"}var n=be.segments;if(n){for(var u of n)if(t>=u.start&&t<u.start+u.size){if(u.type=="rom")return"code";if(u.type=="ram")return"data";if(u.type=="io")return"io"}}return"unknown"}findMemoryWindowLine(t){for(var r=0;r<this.dumplines.length;r++)if(this.dumplines[r].a>=t)return r}},Qn=class extends tn{constructor(){super(...arguments);this.totalRows=2048}readAddress(r){return k.readVRAMAddress(r)}getMemorySegment(r){return"video"}getDumpLines(){return null}},Jn=class{constructor(t,r){this.recreateOnResize=!0;this.path=t,this.data=r}createDiv(t){return this.vlist=new Xi(t),this.vlist.create(t,this.data.length+15>>4,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(t){for(var r=t*16,n=0,u=16,d=Ne(r+n,4)+" ",m=0;m<n;m++)d+="   ";n>8&&(d+=" ");for(var m=n;m<u;m++){var y=this.data[r+m];m==8&&(d+=" "),d+=" "+(y>=0?Ne(y,2):"  ")}return{text:d}}refresh(){this.vlist.refresh()}getPath(){return this.path}},Kn=class{createDiv(t){return this.maindiv=Rr(t,"vertical-scroll"),this.maindiv.css("display","grid"),this.maindiv.css("grid-template-columns","5em 40% 40%"),this.maindiv.css("align-content","start"),this.maindiv[0]}addSegment(t,r){if(r){var n=$('<div class="segment-offset" style="grid-column-start:1"/>');n.text("$"+Ne(t.start,4)),this.maindiv.append(n)}var u=$('<div class="segment"/>');u.text(t.name);let d=`$${Ne(t.start)} - $${Ne(t.last||t.start+t.size-1)}`;d+=` (${t.size} bytes)`,u.attr("title",d),(!r||t.source=="linker")&&u.css("grid-column-start",3);var m=Math.max(3,Math.log(t.size+1))*.5;u.css("height",m+"em"),t.type&&u.addClass("segment-"+t.type),this.maindiv.append(u),u.click(()=>{var y=pe.createOrShow("#memory");y.scrollToAddress(t.start)})}refresh(){this.maindiv.empty();var t=be.segments;if(t){var r=0,n=-1;for(var u of t)u.start>r&&this.addSegment({name:"",start:r,size:u.start-r},!0),this.addSegment(u,n!=u.start),n=u.start,r=u.start+u.size}}},ar=4278190080,Yr=class{constructor(){this.cumulativeData=!1;var t=160,r=262;try{t=Math.ceil(k.machine.cpuCyclesPerLine)||t,r=Math.ceil(k.machine.numTotalScanlines)||r}catch(n){}this.cyclesPerLine=t,this.totalScanlines=r}addr2symbol(t){var r=k.debugSymbols&&k.debugSymbols.addr2symbol||{};return r[t]}addr2str(t){var r=this.addr2symbol(t);return typeof r=="string"?"$"+Ne(t)+" ("+r+")":"$"+Ne(t)}showTooltip(t){t?(this.tooldiv||(this.tooldiv=document.createElement("div"),this.tooldiv.setAttribute("class","tooltiptrack"),document.body.appendChild(this.tooldiv)),$(this.tooldiv).text(t).show()):$(this.tooldiv).hide()}setVisible(t){t?(this.probe=k.startProbing(),this.probe.singleFrame=!this.cumulativeData,this.tick()):(this.probe&&(this.probe.singleFrame=!0),k.stopProbing(),this.probe=null)}redraw(t){var r=this.probe;if(!(!r||!r.idx)){var n=0,u=0,d=0;this.sp=0;for(var m=0;m<r.idx;m++){var y=r.buf[m],b=y&65535,P=y>>16&255,W=y&ar;switch(W){case 2113929216:n++,u=0;break;case 2130706432:n=0,u=0;break;case 0:u+=b,d+=b;break;case 167772160:case 184549376:this.sp=b;default:t(W,b,u,n,d,P);break}}}}opToString(t,r,n){var u="";switch(t){case 16777216:u="Exec";break;case 301989888:u="Read";break;case 318767104:u="Write";break;case 335544320:u="IO Read";break;case 352321536:u="IO Write";break;case 369098752:u="VRAM Read";break;case 385875968:u="VRAM Write";break;case 402653184:u="DMA Read";break;case 419430400:u="DMA Write";break;case 134217728:u="Interrupt";break;case 150994944:u="Error";break;case 520093696:u="Wait";break;case 167772160:u="Stack Push";break;case 184549376:u="Stack Pop";break;default:return""}return typeof r=="number"&&(u+=" "+this.addr2str(r)),t&268435456&&typeof n=="number"&&(u+=" = $"+Ne(n,2)),u}getOpRGB(t,r){switch(t){case 16777216:return 98305;case 301989888:return 8388865;case 318767104:return 65920;case 335544320:return 98432;case 352321536:return 12583296;case 402653184:case 369098752:return 8421377;case 419430400:case 385875968:return 4227264;case 134217728:return 4177727;case 150994944:return 4145151;case 520093696:return 16727871;default:return 0}}},ss=class extends Yr{constructor(){super(...arguments);this.recreateOnResize=!0}createCanvas(r,n,u){var d=document.createElement("div"),m=document.createElement("canvas");return m.width=n,m.height=u,m.classList.add("pixelated"),m.style.width="100%",m.style.height="90vh",m.style.backgroundColor="black",m.style.cursor="crosshair",m.onmousemove=y=>{var b=Wn(m,y);this.showTooltip(this.getTooltipText(b.x,b.y)),$(this.tooldiv).css("left",y.pageX+10).css("top",y.pageY-30)},m.onmouseout=y=>{$(this.tooldiv).hide()},r.appendChild(d),d.appendChild(m),this.canvas=m,this.ctx=m.getContext("2d"),this.initCanvas(),this.maindiv=d}initCanvas(){}getTooltipText(r,n){return null}getOpAtPos(r,n,u){r=r|0,n=n|0;let d=0;return this.redraw((m,y,b,P,W,K)=>{!d&&P==n&&b>=r&&(m&u)!=0&&(d=m|y)}),d}clear(){}tick(){this.clear(),this.redraw(this.drawEvent.bind(this))}},Zn=class extends ss{constructor(){super(...arguments);this.recreateOnResize=!1}createDiv(r){return this.createCanvas(r,this.cyclesPerLine,this.totalScanlines)}initCanvas(){this.imageData=this.ctx.createImageData(this.canvas.width,this.canvas.height),this.datau32=new Uint32Array(this.imageData.data.buffer)}getTooltipText(r,n){r=r|0,n=n|0;var u="",d=null,m=[],y=-1;return this.redraw((b,P,W,K,H,N)=>{switch(b){case 16777216:d=this.addr2symbol(P)||d;break;case 167772160:m.push(d);break;case 184549376:d=m.pop();break}K==n&&W<=r&&(W!=y&&(u="",y=W),u==""&&d&&(u+=`
`+d),u+=`
`+this.opToString(b,P,N))}),"X: "+r+"  Y: "+n+" "+u}refresh(){this.tick(),this.datau32.fill(ar)}tick(){super.tick(),this.drawImage()}drawImage(){this.ctx.putImageData(this.imageData,0,0)}clear(){this.datau32.fill(ar)}},ea=class extends Zn{createDiv(t){return this.createCanvas(t,256,256)}initCanvas(){super.initCanvas(),this.canvas.onclick=t=>{var r=Wn(this.canvas,t),n=Math.floor(r.x)+Math.floor(r.y)*256,u=-1,d=-1;this.redraw((m,y)=>{d<0&&u>=0&&y==n&&(d=u),m==16777216&&(u=y)}),d>=0&&en(d)}}clear(){for(var t=0;t<=65535;t++){var r=k.readAddress(t),n=r>>2|r&31;n|=n<<8|n<<16,this.datau32[t]=n|ar}}drawEvent(t,r,n,u){var d=this.getOpRGB(t,r);if(d){var m=r&255,y=r>>8&255,b=this.datau32[r&65535];b=b|d|ar,this.datau32[r&65535]=b}}getTooltipText(t,r){var n=(t&255)+(r<<8),u="",d=-1,m={},y=null,b=[];return this.redraw((P,W,K,H,N,B)=>{switch(P){case 16777216:d=W,y=this.addr2symbol(W)||y;break;case 167772160:b.push(y);break;case 184549376:y=b.pop();break}var ue=P|d;W==n&&!m[ue]&&(u==""&&y&&(u+=`
`+y),u+=`
PC `+this.addr2str(d)+" "+this.opToString(P,null,B),m[ue]=1)}),this.addr2str(n)+u}},os=class extends Zn{initCanvas(){super.initCanvas(),this.canvas.onclick=t=>{var r=Wn(this.canvas,t),n=Math.floor(r.x),u=Math.floor(r.y),d=this.getOpAtPos(r.x,r.y,16777216);d&&(vr("toline"),k.runEval(()=>{let m=k.getRasterScanline&&k.getRasterScanline()>=u;return m&&k.getRasterLineClock?m&&k.getRasterLineClock()>n:m}))}}drawEvent(t,r,n,u){var d=this.getOpRGB(t,r);if(d){var m=n+u*this.canvas.width,y=d|ar;this.datau32[m]|=y}}drawImage(){let t=ar;for(let r=0;r<this.datau32.length;r++)this.datau32[r]==ar?this.datau32[r]=t:t=this.datau32[r];super.drawImage()}},ta=class extends os{constructor(){super(...arguments);this.interrupt=0;this.rgb=0;this.lastpc=0}drawEvent(r,n,u,d){var m=u+d*this.canvas.width;if(r==134217728&&(this.interrupt=1),this.interrupt==1&&r==167772160&&(this.interrupt=n),this.interrupt>1&&this.sp>this.interrupt&&(this.interrupt=0),r==318767104&&(this.rgb|=47),r==385875968&&(this.rgb|=16256),r==352321536&&(this.rgb|=2047872),r==335544320&&(this.rgb|=7936),r==520093696&&(this.rgb=32768),r==150994944||r==402653184)this.datau32[m]=4279176975;else{let y=this.rgb;if(r==16777216){let b=this.sp&15;b>=8&&(b=16-b),Math.abs(this.lastpc)-n>16&&(b+=1),Math.abs(this.lastpc)-n>256&&(b+=1),y=this.rgb=526344*b+2105376,this.lastpc=n}this.interrupt&&(y|=8388672),this.datau32[m]==ar&&(this.datau32[m]=y|ar)}}},ra=class extends Yr{constructor(){super(...arguments);this.recreateOnResize=!0}createDiv(r){return this.vlist=new Xi(r),this.vlist.create(r,this.cyclesPerLine*this.totalScanlines,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(r){var n="",u="seg_data",d=this.dumplines&&this.dumplines[r];if(d!=null){var m=d.info.join(", ");n="("+gr(d.row,4)+", "+gr(d.col,4)+")  "+Yi(d.asm||"",20)+m,m.indexOf("Write ")>=0&&(u="seg_io")}return{text:n,clas:u}}refresh(){this.tick()}tick(){let r=k instanceof es||k instanceof Za;this.dumplines={},this.redraw((n,u,d,m,y,b)=>{r&&(y>>=2);var P=this.dumplines[y];switch(P==null&&(P={op:n,addr:u,row:m,col:d,asm:null,info:[]},this.dumplines[y]=P),n){case 16777216:if(k.disassemble){var W=k.disassemble(u,k.readAddress.bind(k));P.asm=W&&W.line}break;default:var K=this.opToString(n,u,b);K!=""&&P.info.push(K);break}}),this.vlist.refresh()}},ia=class extends Yr{constructor(){super(...arguments);this.recreateOnResize=!0}createDiv(r){return this.vlist=new Xi(r),this.vlist.create(r,this.totalScanlines,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(r){for(var n=gr(r+"",3)+" ",u="seg_code",d=this.dumplines&&this.dumplines[r]||[],m=Math.round(this.cyclesPerLine/3.3),y=0;y<this.cyclesPerLine;y++){var b=d[y];if(b!==void 0){var P=b&65535,W=W&ar;if(W==16777216)n+=",";else{var K=Ne(P);n+=K,y+=K.length-1}}else n+=y==m?"|":"."}return d[-1]&&(n+=" "+d[-1]),{text:n,clas:u}}refresh(){this.tick()}tick(){let r=k instanceof es||k instanceof Za;this.dumplines={},this.redraw((n,u,d,m,y,b)=>{var P=this.dumplines[m];switch(P==null&&(this.dumplines[m]=P=[]),n){case 16777216:var W=k.debugSymbols.addr2symbol[u];W&&(P[-1]=W);break;case 335544320:case 352321536:case 369098752:case 385875968:P[d]=n|u;break}}),this.vlist.refresh()}},na=class extends Yr{constructor(){super(...arguments);this.recreateOnResize=!0;this.cumulativeData=!0}createDiv(r){return k.debugSymbols&&k.debugSymbols.symbolmap?this.keys=Array.from(Object.keys(k.debugSymbols.symbolmap).filter(n=>!fo(n))):this.keys=["no symbols defined"],this.vlist=new Xi(r),this.vlist.create(r,this.keys.length+1,this.getMemoryLineAt.bind(this)),this.vlist.maindiv}getMemoryLineAt(r){if(r==0)return{text:gr("Symbol",35)+gr("Reads",8)+gr("Writes",8)};var n=this.keys[r-1],u=this.dumplines&&this.dumplines[n];function d(b){var P=u[b]|0;return gr(P?P.toString():"",8)}var m,y;return u!=null?(m=gr(n,35)+d(301989888)+d(318767104),u[16777216]?y="seg_code":u[335544320]||u[352321536]?y="seg_io":y="seg_data"):(m=gr(n,35),y="seg_unknown"),{text:m,clas:y}}refresh(){this.tick()}tick(){this.dumplines={},this.redraw((r,n,u,d,m,y)=>{var b=k.debugSymbols.addr2symbol[n];if(b!=null){var P=this.dumplines[b];P==null&&(P={},this.dumplines[b]=P),P[r]=(P[r]|0)+1}}),this.vlist.refresh(),this.probe&&this.probe.clear()}};var Wf=Zs(),aa=/([0#]?)([x$%]|\d'h)([0-9a-f]+)(?:[;].*)?|(\d'b|0b)([01]+)/gim;function Jl(l){return l.replace(/(\shex\s+)([0-9a-f]+)/ig,function(t,r,n){for(var u=r,d=0;d<n.length;d+=2)u+="0x"+n.substr(d,2)+",";return u})}function Kl(l){for(var t=[],r;r=aa.exec(l);){var n;typeof r[4]!="undefined"?n=parseInt(r[5],2):r[2].startsWith("%")||r[2].endsWith("b")?n=parseInt(r[3],2):r[2].startsWith("x")||r[2].startsWith("$")||r[2].endsWith("h")?n=parseInt(r[3],16):n=parseInt(r[3]),t.push(n)}return t}function Zl(l,t){for(var r="",n,u=0,d=0;n=aa.exec(l);)r+=l.slice(u,aa.lastIndex-n[0].length),u=aa.lastIndex,typeof n[4]!="undefined"?r+=n[4]+t[d++].toString(2):n[2].startsWith("%")?r+=n[1]+"%"+t[d++].toString(2):n[2].endsWith("b")?r+=n[1]+n[2]+t[d++].toString(2):n[2].endsWith("h")?r+=n[1]+n[2]+t[d++].toString(16):n[2].startsWith("x")?r+=n[1]+"x"+Ne(t[d++]):n[2].startsWith("$")?r+=n[1]+"$"+Ne(t[d++]):r+=n[1]+t[d++].toString();return r+=l.slice(u),r=r.replace(/(\shex\s+)([,x0-9a-f]+)/ig,(m,y,b)=>{var P=y+b;return P=P.replace(/0x/ig,"").replace(/,/ig,""),P}),r}function mo(l,t){if(!t)return l;for(var r=0,n=0;n<t.length;n++){var u=t[n];u<0&&(u=-u-1,r^=1<<u),l&1<<n&&(r^=1<<u)}return r}function go(l,t){var r=t[l%t.length];return[r>>3,r&7]}function eu(l,t){for(var r=t.w,n=t.h,u=t.count||1,d=t.bpp||1,m=t.np||1,y=t.bpw||8,b=t.sl||Math.ceil(r*d/y),P=(1<<d)-1,W=t.pofs||b*n*u,K=t.skip||0,H=t.wpimg||b*n,N=[],B=0;B<u;B++){for(var ue=[],Q=0;Q<n;Q++)for(var xe=t.flip?n-1-Q:Q,ke=H*B+xe*b,fe=0,de=0;de<r;de++){var He=0,s=mo(ke,t.remap);t.reindex&&([s,fe]=go(de,t.reindex),s+=ke);for(var le=0;le<m;le++){var J=l[s+le*W+K];He|=((t.brev?J>>y-fe-d:J>>fe)&P)<<le*d}ue.push(He),fe+=d,fe>=y&&!t.reindex&&(ke+=1,fe=0)}N.push(new Uint8Array(ue))}return N}function tu(l,t){t.destfmt&&(t=t.destfmt);var r=t.w,n=t.h,u=t.count||1,d=t.bpp||1,m=t.np||1,y=t.bpw||8,b=t.sl||Math.ceil(t.w*d/y),P=(1<<d)-1,W=t.pofs||b*n*u,K=t.skip||0,H=t.wpimg||b*n,N;m>0&&t.sl?N=new Uint8Array(H*u):y<=8?N=new Uint8Array(H*u*m):N=new Uint32Array(H*u*m);for(var B=0;B<u;B++)for(var ue=l[B],Q=0,xe=0;xe<n;xe++)for(var ke=t.flip?n-1-xe:xe,fe=B*H+ke*b,de=0,He=0;He<r;He++){var s=ue[Q++],le=mo(fe,t.remap);t.reindex&&([le,de]=go(He,t.reindex),le+=fe);for(var J=0;J<m;J++){var De=s>>J*d&P;N[le+J*W+K]|=t.brev?De<<y-de-d:De<<de}de+=d,de>=y&&!t.reindex&&(fe+=1,de=0)}return N}function ho(l,t,r,n,u,d,m){for(var y=[],b=0;b<l.length;b++){var P=l[b],W=4278190080;W|=(P>>t&(1<<r)-1)<<8-r,W|=(P>>n&(1<<u)-1)<<16-u,W|=(P>>d&(1<<m)-1)<<24-m,y.push(W)}return y}function ru(l){var t=l.pal;if(typeof t=="number"){var r=Math.floor(Math.abs(t/100)%10),n=Math.floor(Math.abs(t/10)%10),u=Math.floor(Math.abs(t)%10);return 1<<r+n+u}else{var d=vo[t];if(d)return d.length;throw new Error("No palette named "+t)}}function po(l,t){var r=t.pal,n;if(typeof r=="number"){var u=Math.floor(Math.abs(r/100)%10),d=Math.floor(Math.abs(r/10)%10),m=Math.floor(Math.abs(r)%10);r>=0?n=ho(l,0,u,u,d,u+d,m):n=ho(l,u+d,m,u,d,0,u)}else{var y=vo[r];if(y)n=new Uint32Array(l).map(b=>y[b&y.length-1]|4278190080);else throw new Error("No palette named "+r)}return n}var vo={nes:[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],ap2lores:[0,16711935,127,8323199,32512,8355711,191,255,12549888,16760576,12566463,16744319,65280,16776960,49023,16777215],vcs:[0,0,4210752,4210752,7105644,7105644,9474192,9474192,11579568,11579568,13158600,13158600,14474460,14474460,16053492,16053492,17476,17476,1074276,1074276,2393220,2393220,3448992,3448992,4241592,4241592,5296336,5296336,6088936,6088936,6880508,6880508,10352,10352,1328260,1328260,2645144,2645144,3963052,3963052,5016764,5016764,6070476,6070476,6862044,6862044,7915756,7915756,6276,6276,1586328,1586328,3166380,3166380,4745408,4745408,6062288,6062288,7378144,7378144,8431852,8431852,9747708,9747708,136,136,2105500,2105500,3947696,3947696,5789888,5789888,7368912,7368912,8947936,8947936,10526956,10526956,11842812,11842812,6029432,6029432,7610508,7610508,8928416,8928416,10246320,10246320,11563200,11563200,12616912,12616912,13671644,13671644,14725356,14725356,7864392,7864392,9445472,9445472,10763384,10763384,12081292,12081292,13398176,13398176,14451892,14451892,15506628,15506628,16560340,16560340,8650772,8650772,9969712,9969712,11287628,11287628,12605544,12605544,13660284,13660284,14715028,14715028,15507624,15507624,16561340,16561340,8912896,8912896,10231836,10231836,11550776,11550776,12606544,12606544,13661288,13661288,14716028,14716028,15508624,15508624,16562340,16562340,8132608,8132608,9451548,9451548,11031608,11031608,12349520,12349520,13404264,13404264,14457980,14457980,15512720,15512720,16566436,16566436,6040576,6040576,7883804,7883804,9463864,9463864,11306064,11306064,12622952,12622952,13939836,13939836,15256720,15256720,16572580,16572580,2898944,2898944,4742172,4742172,6585400,6585400,8428624,8428624,9745512,9745512,11325564,11325564,12641424,12641424,13958308,13958308,15360,15360,2120736,2120736,4226112,4226112,6069340,6069340,7648372,7648372,9228428,9228428,10806436,10806436,12123320,12123320,14356,14356,1858612,1858612,3701840,3701840,5281900,5281900,6861956,6861956,8178844,8178844,9495732,9495732,10812616,10812616,12332,12332,1855564,1855564,3436648,3436648,5016708,5016708,6596764,6596764,7913652,7913652,8967372,8967372,10284256,10284256,10308,10308,1591396,1591396,3172484,3172484,4490400,4490400,5807288,5807288,7124176,7124176,8178920,8178920,9232636,9232636],astrocade:[0,2368548,4737096,7171437,9539985,11974326,14342874,16777215,12255269,14680137,16716142,16725394,16734903,16744155,16753663,16762879,11534409,13959277,16318866,16721334,16730842,16740095,16749311,16758783,10420330,12779662,15138995,16718039,16727291,16736767,16745983,16755199,8847495,11206827,13631696,15994612,16724735,16733951,16743423,16752639,6946975,9306307,11731175,14092287,16461055,16732415,16741631,16751103,4784304,7143637,9568505,11929087,14297599,16731647,16741119,16750335,2425019,4784352,7209215,9570047,12004095,14372863,16741375,16750847,191,2359523,4718847,7146495,9515263,11949311,14318079,16752127,187,224,2294015,4658431,7092735,9461247,11895551,14264063,176,213,249,2367999,4736511,7105279,9539327,11908095,159,195,3303,209151,2577919,4946431,7380735,9749247,135,171,7888,17140,681983,3050495,5484543,7853311,106,3470,12723,22231,31483,1548031,3916799,6285311,73,8557,17810,27318,36570,373759,2742271,5176575,4389,13641,23150,32402,41911,51163,2026495,4456447,9472,18724,27976,37485,46737,56246,1834970,4194303,14080,23296,32803,42055,51564,60816,2031541,4456409,18176,27648,36864,46116,55624,392556,2752401,5177269,21760,30976,40192,49667,58919,1572683,3932016,6291348,24320,33536,43008,52224,716810,3079982,5504851,7864183,25856,35328,44544,250368,2619136,4980503,7405371,9764703,26624,35840,45312,2413824,4782336,7143173,9568041,11927374,26112,35584,2338560,4707328,7141376,9502464,11927326,14286659,24832,2393344,4762112,7196160,9564928,11992832,14352155,16711487,2447360,4815872,7250176,9618688,12052992,14417664,16776990,16777027,4803328,7172096,9606144,11974912,14343424,16776965,16777001,16777038,6962176,9330688,11764992,14133504,16502272,16773655,16777019,16777055,8858112,11226880,13660928,16029440,16759818,16769070,16777043,16777079,10426112,12794624,15163392,16745475,16754727,16764235,16773488,16777108,11534848,13969152,16337664,16740388,16749640,16759148,16768401,16777141,12255232,14684928,16725795,16735047,16744556,16753808,16763317,16772569],c64:[0,16777215,2832232,11707504,8797551,4427096,7940149,7325624,2445167,14659,5859226,4473924,7105644,8704666,11886188,9803157]},iu={nes:[["Screen Color",0,1],["Background 0",1,3],["Background 1",5,3],["Background 2",9,3],["Background 3",13,3],["Sprite 0",17,3],["Sprite 1",21,3],["Sprite 2",25,3],["Sprite 3",29,3]],astrocade:[["Left",0,-4],["Right",4,-4]]};function ln(l,t){if(l==null||t==null||l.length!==t.length)return!1;if(l===t)return!0;for(var r=0;r<l.length;r++)if(l[r]!==t[r])return!1;return!0}function ha(l,t){if(l==null||t==null||l.length!==t.length)return!1;if(l===t)return!0;for(var r=0;r<l.length;r++)if(!ln(l[r],t[r]))return!1;return!0}var br=class{refreshLeft(){for(var t=this;t;)t.updateLeft(),t=t.left}refreshRight(){for(var t=this;t;)t.updateRight(),t=t.right}addRight(t){return this.right=t,t.left=this,t}addLeft(t){return this.left=t,t.right=this,t}},sa=class extends br{},nn=class extends sa{constructor(t,r){super(),this.project=t,this.fileid=r,this.label=r}updateLeft(){return this.words=this.right.words,this.project&&this.project.updateFile(this.fileid,this.words),!0}updateRight(){return this.project&&(this.words=this.project.project.getFile(this.fileid)),!0}},oa=class extends sa{constructor(t,r,n,u,d){super(),this.project=t,this.fileid=r,this.label=n,this.start=u,this.end=d}updateLeft(){if(this.right.words.length!=this.words.length)throw Error("Cannot put "+this.right.words.length+" image bytes into array of "+this.words.length+" bytes");this.words=this.right.words;var t=this.text.substring(this.start,this.end);return t=Zl(t,this.words),this.text=this.text.substring(0,this.start)+t+this.text.substring(this.end),this.project&&this.project.updateFile(this.fileid,this.text),!0}updateRight(){this.project&&(this.text=this.project.project.getFile(this.fileid));var t=this.text.substring(this.start,this.end);t=Jl(t);var r=Kl(t);return this.words=r,!0}},la=class extends br{updateLeft(){return!1}updateRight(){return this.words=qs(new Uint8Array(this.left.words)),!0}},ua=class extends br{constructor(t){super(),this.fmt=t}updateLeft(){return this.images=this.right.images,this.words=tu(this.images,this.fmt),!0}updateRight(){return ln(this.words,this.left.words)?!1:(this.words=this.left.words,this.images=eu(this.words,this.fmt),!0)}},ls=class{constructor(t){this.palcols=t}indexOf(t){return this.palcols.indexOf(t)}},vi=class extends br{constructor(r,n){super();this.palindex=0;this.context=r,this.ncolors=1<<(n.bpp||1)*(n.np||1)}updateLeft(){this.right&&(this.rgbimgs=this.right.rgbimgs);var r=new ls(this.palette),n=this.rgbimgs.map(u=>{for(var d=new Uint8Array(u.length),m=0;m<u.length;m++)d[m]=r.indexOf(u[m]);return d});return this.images=n,!0}updateRight(){if(!this.updateRefs()&&ha(this.images,this.left.images))return!1;this.images=this.left.images;var r=this.palette.length-1;return this.rgbimgs=this.images.map(n=>{for(var u=new Uint32Array(n.length),d=0;d<n.length;d++)u[d]=this.palette[n[d]&r];return u}),!0}updateRefs(){var r;return this.context!=null&&(this.paloptions=this.context.getPalettes(this.ncolors),this.paloptions&&this.paloptions.length>0&&(r=this.paloptions[this.palindex].palette)),r==null&&(this.ncolors<=2?r=new Uint32Array([4278190080,4294967295]):r=new Uint32Array([4278190080,4294902015,4294967040,4294967295])),ln(this.palette,r)?!1:(this.palette=r,!0)}};function nu(l){for(var t=new Map,r=new Uint32Array(l.length),n=0,u=0;u<l.length;u++){for(var d=l[u];t[d];)d^=++n;r[u]=d,t[d]=1}return r}var an=class extends br{constructor(t){super(),this.palfmt=t}updateLeft(){return!0}updateRight(){return ln(this.words,this.left.words)?!1:(this.words=this.left.words,this.palette=nu(po(this.words,this.palfmt)),this.layout=iu[this.palfmt.layout],this.rgbimgs=[],this.palette.forEach(t=>{this.rgbimgs.push(new Uint32Array([t]))}),!0)}getAllColors(){for(var t=[],r=0;r<ru(this.palfmt);r++)t.push(r);return po(t,this.palfmt)}},us=class extends br{constructor(r){super();this.tileindex=0;this.context=r}updateRefs(){var r=this.tilemap;return this.context!=null&&(this.tileoptions=this.context.getTilemaps(256),this.tileoptions&&this.tileoptions.length>0&&(this.tilemap=this.tileoptions[this.tileindex].images)),!ha(r,this.tilemap)}};var ca=class extends us{constructor(t){super(t)}updateLeft(){return!1}updateRight(){if(!this.updateRefs()&&ln(this.words,this.left.words))return!1;this.words=this.left.words,this.cols=32,this.rows=30,this.width=this.cols*8,this.height=this.rows*8,this.baseofs=0;var t=new Uint8Array(this.width*this.height);this.images=[t];for(var r=0,n,u=0;u<this.rows;u++)for(var d=0;d<this.cols;d++){var m=this.words[this.baseofs+r];if(typeof m=="undefined")throw Error("No name for address "+this.baseofs+" + "+r);var y=this.tilemap[m];if(!y)throw Error("No tilemap found for tile index "+m);n=r&11264|960|r&3072|r>>4&56|r>>2&7;for(var b=this.words[n],P=m^b<<9^2147483648,W=u*this.cols*8*8+d*8,K=0,H=(d&2)+((r&64)>>4),N=(b>>H&3)<<2,B=0;B<8;B++){for(var ue=0;ue<8;ue++){var Q=y[K++];Q&&(Q+=N),t[W++]=Q}W+=this.cols*8-8}r++}return!0}},sn=class{recreate(t,r){var n=$('<div class="asset_grid"/>');t.empty().append(n);var u=Math.max(2,Math.ceil(16/this.width)),d=this.width<=8?16:8,m=null;this.rgbimgs.forEach((y,b)=>{var P=new on;P.width=this.width,P.height=this.height,P.recreate(),P.canvas.style.width=P.width*u+"px",P.canvas.title="$"+Ne(b),P.updateImage(y),$(P.canvas).addClass("asset_cell"),$(P.canvas).click(K=>{r(b,P)}),m||(m=$("<span/>"),n.append(m)),m.append(P.canvas);var W=b%d==d-1;W&&(n.append($("<br/>")),m=null)})}};function gi(l,t){var r=$(document.createElement("div"));return l&&r.appendTo(l),t&&r.addClass(t),r}var fa=class extends br{constructor(t,r,n){super(),this.context=t,this.parentdiv=r,this.fmt=n}updateLeft(){return!0}updateRight(){if(ha(this.rgbimgs,this.left.rgbimgs))return!1;this.rgbimgs=this.left.rgbimgs;var t=gi(this.parentdiv.empty(),"asset_dual"),r=gi(t),n=gi(t,"asset_editor").hide(),u=this.chooser=new sn;u.rgbimgs=this.rgbimgs,u.width=this.fmt.w||1,u.height=this.fmt.h||1,u.recreate(r,(y,b)=>{var P=Math.ceil(256/this.fmt.w),W=P*(this.fmt.aspect||1),K=this.createEditor(n,b,W,P);this.context.setCurrentEditor(n,$(b.canvas),this),this.rgbimgs[y]=b.rgbdata});var d=this.left;if(d instanceof vi&&d.paloptions.length>1){var m=$(document.createElement("select"));d.paloptions.forEach((y,b)=>{var P=$(document.createElement("option")).text(y.name).val(b).appendTo(m);b==d.palindex&&P.attr("selected","selected")}),m.appendTo(r).change(y=>{var b=$(y.target).val();d.palindex=b,d.refreshRight()})}return!0}createEditor(t,r,n,u){var d=new cs;d.createWith(r),d.updateImage();for(var m=r.width*n,y=r.height*u;m>500||y>500;)m/=2,y/=2;return d.canvas.style.width=m+"px",d.canvas.style.height=y+"px",d.makeEditable(this,t,this.left.palette),d}},da=class extends br{constructor(t,r,n){super(),this.context=t,this.parentdiv=r,this.fmt=n}updateLeft(){return!0}updateRight(){if(ha(this.rgbimgs,this.left.rgbimgs))return!1;this.rgbimgs=this.left.rgbimgs;var t=gi(this.parentdiv.empty(),"asset_dual"),r=gi(t),n=gi(t,"asset_editor").hide(),u=new on;return u.width=this.fmt.w,u.height=this.fmt.h,u.recreate(),u.updateImage(this.rgbimgs[0]),r.append(u.canvas),!0}},on=class{recreate(){this.canvas=this.newCanvas(),this.imagedata=this.ctx.createImageData(this.width,this.height),this.rgbdata=new Uint32Array(this.imagedata.data.buffer),this.peerviewers=[this]}createWith(t){this.width=t.width,this.height=t.height,this.imagedata=t.imagedata,this.rgbdata=t.rgbdata,this.canvas=this.newCanvas(),this.peerviewers=[this,t]}newCanvas(){var t=document.createElement("canvas");return t.width=this.width,t.height=this.height,t.classList.add("pixels"),t.classList.add("pixelated"),this.ctx=t.getContext("2d"),t}updateImage(t){t&&this.rgbdata.set(t);for(let r of this.peerviewers)r.ctx.putImageData(this.imagedata,0,0)}},cs=class extends on{constructor(){super(...arguments);this.curpalcol=-1;this.offscreen=new Map}getPositionFromEvent(r){var n=Math.floor(r.offsetX*this.width/$(this.canvas).width()),u=Math.floor(r.offsetY*this.height/$(this.canvas).height());return{x:n,y:u}}setPaletteColor(r){r&=this.palette.length-1,this.curpalcol!=r&&(this.curpalcol>=0&&this.palbtns[this.curpalcol].removeClass("selected"),this.curpalcol=r,this.currgba=this.palette[r&this.palette.length-1],this.palbtns[r].addClass("selected"))}makeEditable(r,n,u){this.left=r,this.palette=u;var d,m=!1,y=$(this.canvas);y.mousedown(b=>{var P=this.getPositionFromEvent(b);d=this.getPixel(P.x,P.y)==this.currgba?this.palette[0]:this.currgba,this.setPixel(P.x,P.y,this.currgba),m=!0,$(document).mouseup(W=>{$(document).off("mouseup");var K=this.getPositionFromEvent(W);this.setPixel(K.x,K.y,d),m=!1,this.commit()})}).mousemove(b=>{var P=this.getPositionFromEvent(b);m&&this.setPixel(P.x,P.y,d)}),n.empty(),this.createToolbarButtons(n[0]),n.append(this.canvas),n.append(this.createPaletteButtons()),this.setPaletteColor(1)}getPixel(r,n){if(r=Math.round(r),n=Math.round(n),r<0||r>=this.width||n<0||n>=this.height)return this.offscreen[r+","+n]|this.palette[0];var u=r+n*this.width;return this.rgbdata[u]}setPixel(r,n,u){if(r=Math.round(r),n=Math.round(n),r<0||r>=this.width||n<0||n>=this.height)this.offscreen[r+","+n]=u;else{var d=r+n*this.width,m=this.rgbdata[d];m!=u&&(this.rgbdata[d]=u,this.updateImage())}}createPaletteButtons(){this.palbtns=[];for(var r=gi(null,"asset_toolbar"),n=0;n<this.palette.length;n++){var u=$(document.createElement("button")).addClass("palbtn"),d=this.palette[n]&16777215,m="#"+Ne(On(d),6);u.click(this.setPaletteColor.bind(this,n)),u.css("backgroundColor",m).text(n.toString(16)),u.css("color",d&32768?"black":"white"),r.append(u),this.palbtns.push(u)}return r}createToolbarButtons(r){var n=new $n(r,null);n.add("ctrl+shift+h","Flip X","glyphicon-resize-horizontal",this.flipX.bind(this)),n.add("ctrl+shift+v","Flip Y","glyphicon-resize-vertical",this.flipY.bind(this)),n.add("ctrl+shift+9","Rotate","glyphicon-repeat",this.rotate90.bind(this)),n.add("ctrl+shift+left","Move Left","glyphicon-arrow-left",this.translate.bind(this,1,0)),n.add("ctrl+shift+right","Move Right","glyphicon-arrow-right",this.translate.bind(this,-1,0)),n.add("ctrl+shift+up","Move Up","glyphicon-arrow-up",this.translate.bind(this,0,1)),n.add("ctrl+shift+down","Move Down","glyphicon-arrow-down",this.translate.bind(this,0,-1))}commit(){this.updateImage();try{this.left.refreshLeft()}catch(r){console.log(r),alert(`Could not update source code. ${r}`)}}remapPixels(r){for(var n=0,u=new Uint32Array(this.rgbdata.length),d=0;d<this.height;d++)for(var m=0;m<this.width;m++)u[n]=r(m,d),n++;this.rgbdata.set(u),this.commit()}rotate(r){var n=Math.sin(r*Math.PI/180),u=Math.cos(r*Math.PI/180);this.remapPixels((d,m)=>{var y=d+.5-this.width/2,b=m+.5-this.height/2,P=y*u-b*n+this.width/2-.5,W=b*u+y*n+this.height/2-.5;return this.getPixel(P,W)})}rotate90(){this.rotate(90)}flipX(){this.remapPixels((r,n)=>this.getPixel(this.width-1-r,n))}flipY(){this.remapPixels((r,n)=>this.getPixel(r,this.height-1-n))}translate(r,n){this.remapPixels((u,d)=>this.getPixel(u+r,d+n))}};var pa=Zs(),ma=class{createDiv(t){return this.maindiv=Rr(t,"vertical-scroll"),this.maindiv[0]}clearAssets(){this.rootnodes=[],this.deferrednodes=[]}registerAsset(t,r,n){this.rootnodes.push(r),n?n>1?this.deferrednodes.push(r):this.deferrednodes.unshift(r):r.refreshRight()}getPalettes(t){var r=[];return this.rootnodes.forEach(n=>{for(;n!=null;){if(n instanceof an){var u=n.palette;t==u.length&&r.push({node:n,name:"Palette",palette:u}),n.layout&&n.layout.forEach(([d,m,y])=>{if(m<u.length){if(y==t){var b=u.slice(m,m+y);r.push({node:n,name:d,palette:b})}else if(-y==t){var b=u.slice(m,m-y);b.reverse(),r.push({node:n,name:d,palette:b})}else if(y+1==t){var b=new Uint32Array(t);b[0]=u[0],b.set(u.slice(m,m+y),1),r.push({node:n,name:d,palette:b})}}});break}n=n.right}}),r}getTilemaps(t){var r=[];return this.rootnodes.forEach(n=>{for(;n!=null;){if(n instanceof vi){var u=n.rgbimgs;u&&u.length>=t&&r.push({node:n,name:"Tilemap",images:n.images,rgbimgs:u})}n=n.right}}),r}isEditing(){return this.cureditordiv!=null}getCurrentEditNode(){return this.cureditnode}setCurrentEditor(t,r,n){for(this.cureditordiv!=t&&(this.cureditordiv&&(this.cureditordiv.hide(250),this.cureditordiv=null),t&&(this.cureditordiv=t,this.cureditordiv.show(),this.cureditordiv[0].scrollIntoView({behavior:"smooth",block:"center"}))),this.cureditelem&&(this.cureditelem.removeClass("selected"),this.cureditelem=null),r&&(this.cureditelem=r,this.cureditelem.addClass("selected"));n.left;)n=n.left;this.cureditnode=n}scanFileTextForAssets(t,r){for(var n=[],u=/[/;][*;]([{].+[}])[*;][/;]/g,d;d=u.exec(r);){var m=d.index+d[0].length,y;if(oe.includes("verilog")?y=r.indexOf("end",m):d[0].startsWith(";;")?y=r.indexOf(";;",m):y=r.indexOf(";",m),y>m)try{var b=d[1].replace(/([A-Za-z]+):/g,'"$1":'),P=JSON.parse(b);n.push({fileid:t,fmt:P,start:m,end:y})}catch(de){console.log(de)}}for(var W=/DEF_METASPRITE_(\d+)x(\d+)[(](\w+),\s*(\w+),\s*(\w+)/gi;d=W.exec(r);){for(var K=parseInt(d[1]),H=parseInt(d[2]),N=d[3],B=parseInt(d[4]),ue=parseInt(d[5]),Q=[],xe=0;xe<K;xe++)for(var ke=0;ke<H;ke++)Q.push({x:xe*8,y:ke*8,tile:B,attr:ue});var fe={defs:Q,width:K*8,height:H*8};n.push({fileid:t,label:N,meta:fe})}return n}addPaletteEditorViews(t,r,n){var u=$('<div class="asset_dual"/>').appendTo(t),d=$('<div class="asset_editor"/>').hide(),m=[];r.getAllColors().forEach(N=>{m.push(new Uint32Array([N]))});var y=$("<table/>").appendTo(u);d.appendTo(u);var b=r.layout;if(!b){var P=r.palette.length,W=P>32?8:4;b=[];for(var K=0;K<P;K+=W)b.push(["",K,Math.min(P-K,W)])}function H(N,B){var ue=r.words[B],Q=r.palette[B],xe="#"+Ne(On(Q),6),ke=Q&32768?"black":"white";N.text(Ne(ue,2)).css("background-color",xe).css("color",ke)}b.forEach(([N,B,ue])=>{if(B<r.palette.length){var Q=$("<tr/>").appendTo(y);$("<td/>").text(N).appendTo(Q);for(var xe=[],ke=B;ke<B+Math.abs(ue);ke++)xe.push(ke);ue<0&&xe.reverse(),xe.forEach(fe=>{var de=$("<td/>").addClass("asset_cell asset_editable").appendTo(Q);H(de,fe),de.click(He=>{var s=new sn;s.rgbimgs=m,s.width=1,s.height=1,s.recreate(d,(le,J)=>{n(fe,le),H(de,fe)}),this.setCurrentEditor(d,de,r)})})}})}addPixelEditor(t,r,n){n.xform="scale(2)";var u=new ua(n);r.addRight(u);var d=new vi(this,n);u.addRight(d),d.addRight(new fa(this,Rr(t),n))}addPaletteEditor(t,r,n){var u=new an(n);r.addRight(u),r.refreshRight(),this.addPaletteEditorViews(t,u,(d,m)=>{console.log("set entry",d,"=",m),r.words[d]=m,u.words=null,u.updateRight(),u.refreshLeft()})}ensureFileDiv(t){var r=this.getFileDivId(t),n=$(document.getElementById(r));if(n.length===0){var u=Rr(this.maindiv,"asset_file"),d=Rr(u,"asset_file_header").text(t);n=Rr(u).attr("id",r).addClass("disable-select")}return n}refreshAssetsInFile(t,r){let n=0;if(oe.startsWith("nes")&&t.endsWith(".chr")&&r instanceof Uint8Array){let u=new nn(pe,t),d={w:8,h:8,bpp:1,count:r.length>>4,brev:!0,np:2,pofs:8,remap:[0,1,2,4,5,6,7,8,9,10,11,12]};this.addPixelEditor(this.ensureFileDiv(t),u,d),this.registerAsset("charmap",u,1),n++}else if(oe.startsWith("nes")&&t.endsWith(".pal")&&r instanceof Uint8Array){let u=new nn(pe,t),d={pal:"nes",layout:"nes"};this.addPaletteEditor(this.ensureFileDiv(t),u,d),this.registerAsset("palette",u,0),n++}else if(typeof r=="string"){let u=this.scanFileTextForAssets(t,r);for(let d of u)if(d.fmt){let m=t,y=new oa(pe,t,m,d.start,d.end),b=y;if(d.fmt.comp=="rletag"&&(y=y.addRight(new la)),d.fmt.map=="nesnt"){y=y.addRight(new ca(this)),y=y.addRight(new vi(this,{w:8,h:8,bpp:4}));let P={w:8*(d.fmt.w||32),h:8*(d.fmt.h||30),count:1};y=y.addRight(new da(this,Rr(this.ensureFileDiv(t)),P)),this.registerAsset("nametable",b,2),n++}else d.fmt.w>0&&d.fmt.h>0?(this.addPixelEditor(this.ensureFileDiv(t),y,d.fmt),this.registerAsset("charmap",b,1),n++):d.fmt.pal&&(this.addPaletteEditor(this.ensureFileDiv(t),y,d.fmt),this.registerAsset("palette",b,0),n++)}}return n}getFileDivId(t){return"__asset__"+Vs(t)}refresh(t){if(t)this.maindiv.empty(),this.clearAssets(),be.iterateFiles((n,u)=>{try{var d=this.refreshAssetsInFile(n,u)}catch(m){console.log(m),this.ensureFileDiv(n).text(m+"")}}),console.log("Found "+this.rootnodes.length+" assets"),this.deferrednodes.forEach(n=>{try{n.refreshRight()}catch(u){console.log(u),alert(u+"")}}),this.deferrednodes=[];else for(var r of this.rootnodes)r!==this.getCurrentEditNode()&&r.refreshRight()}setVisible(t){t?pa.bind&&pa.bind("ctrl+z",pe.undoStep.bind(pe)):pa.unbind&&pa.unbind("ctrl+z")}};var un=256,bo=100,yo=!1,va=class l{constructor(t,r){this.expanded=!1;this.parent=t,this.name=r,this.children=new Map,this.level=t?t.level+1:-1,this.view=t?t.view:null}getDiv(){return this._div==null&&(this._div=document.createElement("div"),this._div.classList.add("vertical-scroll"),this._div.classList.add("tree-content"),this._header=document.createElement("div"),this._header.classList.add("tree-header"),this._header.classList.add("tree-level-"+this.level),this._header.append(this.name),this._inline=document.createElement("span"),this._inline.classList.add("tree-value"),this._header.append(this._inline),this._div.append(this._header),this.parent._content.append(this._div),this._header.onclick=t=>{this.toggleExpanded()}),this.expanded&&this._content==null?(this._content=document.createElement("div"),this._div.append(this._content)):!this.expanded&&this._content!=null&&(this._content.remove(),this._content=null,this.children.clear()),this._div}toggleExpanded(){this.expanded=!this.expanded,this.view.tick()}remove(){this._div.remove(),this._div=null}update(t){this.getDiv();var r="";if(t&&t.$$&&typeof t.$$=="function"&&this._content!=null&&(t=t.$$()),t==null)r=t+"";else if(typeof t=="number")t!=(t|0)?r=t.toString():r=t+"	($"+Ne(t)+")";else if(typeof t=="boolean")r=t.toString();else if(typeof t=="string")t.length<bo?r=t:r=t.substring(0,bo)+"...";else if(t.buffer&&t.length<=un)r=Xs(t,0,t.length);else if(typeof t=="object"||typeof t=="function")if(this._content!=null){if(t.slice&&t.length>un){let b={},P=t;for(var n=un;t.length/n>un;)n*=2;for(let W=0;W<P.length;W+=n)b["$"+Ne(W)]={$$:()=>P.slice(W,W+n)};t=b}if(t instanceof Map){let b={};for(let[P,W]of t.entries())b[P]=W;t=b}let m=t instanceof Array?Array.from(t.keys()):Object.getOwnPropertyNames(t);if(m.length>un){let b={},P=t;for(var n=100;m.length/n>100;)n*=2;for(let K=0;K<m.length;K+=n){for(var u={},d=K;d<K+n;d++)u[m[d]]=P[m[d]];b["["+K+"...]"]=u}t=b,m=Object.getOwnPropertyNames(t)}let y=new Set(this.children.keys());m.forEach(b=>{var P=!yo&&typeof b=="string"&&b.startsWith("$$");if(!P){let W=this.children.get(b);W==null&&(W=new l(this,b),this.children.set(b,W)),W.update(t[b])}y.delete(b)}),y.forEach(b=>{this.children.get(b).remove(),this.children.delete(b)}),this._header.classList.add("tree-expanded"),this._header.classList.remove("tree-collapsed")}else this._header.classList.add("tree-collapsed"),this._header.classList.remove("tree-expanded");else r=typeof t;this._inline.innerText!=r&&(this._inline.innerText=r)}};function xo(l,t){var r=new va(null,null);r.view=t,r._content=l;var n=new va(r,"/");return n.expanded=!0,n.getDiv(),n._div.style.padding="0px",n}var fs=class{createDiv(t){return this.root=xo(t,this),this.root.getDiv()}refresh(){this.tick()}tick(){this.root.update(this.getRootObject())}};var ba=class extends fs{getRootObject(){return k.getDebugTree()}},ya=class extends Yr{constructor(){super(...arguments);this.cumulativeData=!0}createDiv(r){return this.clear(),this.treeroot=xo(r,this),this.treeroot.getDiv()}refresh(){this.tick()}tick(){this.treeroot.update(this.getRootObject()),this.probe&&this.probe.clear()}clear(){this.graph=null,this.reset()}reset(){this.stack=[],this.lastsp=-1,this.lastpc=0,this.jsr=!1,this.rts=!1}newNode(r,n){return{$$SP:n,$$PC:r,count:0,startLine:null,endLine:null,calls:{}}}newRoot(r,n){this.stack.length==0?(this.graph=this.newNode(null,n),this.stack.unshift(this.graph)):n>this.stack[0].$$SP&&(this.graph=this.newNode(null,n),this.graph.calls[this.addr2str(r)]=this.stack[0],this.stack.unshift(this.graph))}getRootObject(){return this.redraw((r,n,u,d,m,y)=>{switch(r){case 184549376:this.newRoot(this.lastpc,this.lastsp);case 167772160:if(this.stack.length){let P=this.stack[this.stack.length-1];var b=this.lastsp-n;(b==2||b==3)&&n<P.$$SP&&(this.jsr=!0),(b==-2||b==-3)&&this.stack.length>1&&n>P.$$SP&&(this.rts=!0)}this.lastsp=n;break;case 16777216:if(Math.abs(n-this.lastpc)>=4){if(this.jsr&&this.stack.length){let P=this.stack[this.stack.length-1],W=this.addr2str(n),K=P.calls[W];K==null?K=P.calls[W]=this.newNode(n,this.lastsp):K.$$PC==null&&(K.$$PC=n),this.stack.push(K),K.count++,K.startLine=d}this.jsr=!1,this.rts&&this.stack.length&&(this.stack.pop().endLine=d),this.rts=!1}this.lastpc=n;break}}),this.graph&&(this.graph.$$Stack=this.stack),yo?this.graph:this.graph&&this.graph.calls}};function Be(l){l?(sr(0),$("#pleaseWaitModal").modal("show")):(sr(1),$("#pleaseWaitModal").modal("hide"))}function sr(l){$("#pleaseWaitProgressBar").css("width",l*100+"%").show()}function Ee(l){Be(!1),bootbox.alert({title:'<span class="glyphicon glyphicon-alert" aria-hidden="true"></span> Alert',message:Oi.sanitize(l)})}function Wt(l){Be(!1),bootbox.alert(Oi.sanitize(l))}function wo(l){throw Ee(l),new Error(l)}function bi(l,t,r,n){window.ga&&ga("send","event",l,t,r,n)}function Eo(l){window.ga&&ga("send","pageview",l)}var ds;async function yi(){if(!ds){await Gt("lib/octokat.js"),await Gt("https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"),await Gt("https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"),await Gt("https://8bitworkshop.com/config.js");var l=Un("__github_key");ds=new qn(Octokat,l,Xr(),Lr()),console.log("loaded github service")}return ds}function cn(){var l=(Ke||"").split("/");return l.length!=2?(Ee("You are not in a GitHub repository. Choose one from the pulldown, or Import or Publish one."),null):"https://github.com/"+l[0]+"/"+l[1]}async function xa(l,t){var r,n=Ji(l);if(!n){Ee("Could not parse Github URL.");return}var u=Ui()[n.repopath];if(!(u&&!confirm("You've already imported "+n.repopath+" -- do you want to replace all local files?"))){Be(!0);var d=zn(n.repopath);sr(.25);var m=await yi();return m.import(l).then(y=>(r=y,sr(.75),m.pull(l,d))).then(y=>{Be(!1),bi("sync","import",l),xi(t,{repo:n.repopath})}).catch(y=>{Be(!1),console.log(y),Ee("Could not import "+l+"."+y)})}}async function _o(l){var t=await yi();t.login().then(()=>{Wt("You are signed in to Github.")}).catch(r=>{Ee("Could not sign in."+r)})}async function To(l){var t=await yi();t.logout().then(()=>{Wt("You are logged out of Github.")})}function So(l){var t=$("#importGithubModal"),r=$("#importGithubButton");t.modal("show"),r.off("click").on("click",()=>{var n=$("#importGithubURL").val()+"";t.modal("hide"),xa(n,!1)})}function Ao(l){if(!(Ke&&!confirm("This project ("+Lr().mainPath+") is already bound to a Github repository. Do you want to re-publish to a new repository? (You can instead choose 'Push Changes' to update files in the existing repository.)"))){var t=$("#publishGithubModal"),r=$("#publishGithubButton");$("#githubRepoName").val(Et(It(Lr().mainPath))),t.modal("show"),r.off("click").on("click",async()=>{var n=$("#githubRepoName").val()+"",u=$("#githubRepoDesc").val()+"",d=$("#githubRepoPrivate").val()=="private",m=$("#githubRepoLicense").val()+"",y;if(!n){Ee("You did not enter a project name.");return}t.modal("hide"),Be(!0);var b=await yi();b.login().then(()=>(sr(.25),b.publish(n,u,m,d))).then(P=>(y=P,sr(.5),ko("initial import from 8bitworkshop.com"))).then(()=>{bi("sync","publish",d?"":n),xa(y.url,!1)}).catch(P=>{Be(!1),console.log(P),Ee("Could not publish GitHub repository: "+P)})})}}function Co(l){var t=cn();if(t){var r=$("#pushGithubModal"),n=$("#pushGithubButton");r.modal("show"),n.off("click").on("click",()=>{var u=$("#githubCommitMsg").val()+"";r.modal("hide"),ko(u)})}}function Po(l){var t=cn();t&&bootbox.confirm("Pull from repository and replace all local files? Any changes you've made will be overwritten.",async r=>{if(r){Be(!0);var n=await yi();n.pull(t).then(u=>{Be(!1),pe.updateAllOpenWindows(Xr())})}})}function su(l){return new Promise((t,r)=>{var n=l.commit.files;if(console.log(n),n.length==0){Be(!1),Wt("No files changed.");return}var u="";for(var d of n)u+=Oi.sanitize(d.filename)+": "+d.status,(d.additions||d.deletions||d.changes)&&(u+=" ("+d.additions+" additions, "+d.deletions+" deletions, "+d.changes+" changes)"),u+="<br/>";bootbox.confirm(u,m=>{m?t(l):Be(!1)})})}async function ko(l){var t=cn();if(t){var r=[];for(var n in Lr().filedata){var u=Lr().stripLocalPath(n),d=Lr().filedata[n];u&&d&&r.push({path:u,data:d})}if(At()instanceof Uint8Array){let y="bin/"+st()+".rom";r.push({path:y,data:At()})}Be(!0);var m=await yi();return m.login().then(()=>(sr(.5),m.commit(t,l,r))).then(y=>su(y)).then(y=>m.push(y)).then(y=>(Be(!1),Wt("Pushed files to "+t),y)).catch(y=>{Be(!1),console.log(y),Ee("Could not push GitHub repository: "+y)})}}function Do(){var l=cn();l&&bootbox.prompt("<p>Are you sure you want to delete this repository ("+Oi.sanitize(l)+") from browser storage?</p><p>All changes since last commit will be lost.</p><p>Type DELETE to proceed.<p>",t=>{t.trim().toUpperCase()=="DELETE"&&ou()})}async function ou(){var l=cn();Be(!0);let t=await yi(),r=await t.getGithubSession(l);t.bind(r,!1),await Xr().keys().then(n=>Promise.all(n.map(u=>Xr().removeItem(u)))),Be(!1),xi(!1,{repo:"/"})}var wa=class{constructor(t){this.options=t,this.sampleRate=44100,this.soundData=[],this.tapData=[67,54,52,45,84,65,80,69,45,82,65,87,1,0,0,0,0,0,0,0]}getWAVHeader(){let t=new Uint8Array(44),r=new DataView(t.buffer);return r.setUint32(0,1380533830,!1),r.setUint32(4,44+this.soundData.length,!0),r.setUint32(8,1463899717,!1),r.setUint32(12,1718449184,!1),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,1,!0),r.setUint32(24,this.sampleRate,!0),r.setUint32(28,this.sampleRate*2,!0),r.setUint16(32,1,!0),r.setUint16(34,8,!0),r.setUint32(36,1684108385,!1),r.setUint32(40,this.soundData.length,!0),t}addSilence(t){let r=Math.floor(this.sampleRate*t);for(let u=0;u<r;u++)this.soundData.push(0);let n=wi.CLOCK_RATE*t;this.tapData.push(0),this.tapData.push(n&255),this.tapData.push(n>>8&255),this.tapData.push(n>>16&255)}addCycle(t){this.tapData.push(t);let r=Math.floor(this.sampleRate*wi.TAP_LENGTH_IN_SECONDS*t);for(let n=0;n<r;n++){let u;this.options.sine_wave?u=-Math.sin(n/r*2*Math.PI):n<r/2?u=-1:u=1,this.options.invert_waveform&&(u=-u),this.soundData.push(Math.round(128+u*127))}}updateTAPHeader(){let t=this.tapData.length-20;this.tapData[16]=t&255,this.tapData[17]=t>>8&255,this.tapData[18]=t>>16&255,this.tapData[19]=t>>24&255}getTAPData(){return this.updateTAPHeader(),new Uint8Array(this.tapData)}getSoundData(){let t=this.getWAVHeader(),r=new Uint8Array(t.length+this.soundData.length);return r.set(t,0),r.set(new Uint8Array(this.soundData),t.length),r}},Se=class Se{constructor(t,r){this.options=r,this.checksum=0,this.data=new Uint8Array(0),this.filenameData=this.makeFilename(t),this.startAddress=0,this.endAddress=0,this.fileType=Se.FILE_TYPE_NONE,this.waveFile=null}makeFilename(t){let r=[];t=t.toUpperCase();for(let u=0;u<Se.FILENAME_BUFFER_SIZE;u++)if(t.length<=u)r.push(32);else{let d=t.charCodeAt(u);r.push(d)}return r}setContent(t){this.data=t.data,this.startAddress=t.startAddress,this.endAddress=t.startAddress+t.data.length,this.fileType=t.type}generateSound(t){this.waveFile=t,this.addHeader(!1),this.addHeader(!0),t.addSilence(.1),this.addFile()}addTapCycle(t){this.waveFile.addCycle(t)}addBit(t){t===0?(this.addTapCycle(Se.SHORT_PULSE),this.addTapCycle(Se.MEDIUM_PULSE)):(this.addTapCycle(Se.MEDIUM_PULSE),this.addTapCycle(Se.SHORT_PULSE))}addDataMarker(t){t?(this.addTapCycle(Se.LONG_PULSE),this.addTapCycle(Se.MEDIUM_PULSE)):(this.addTapCycle(Se.LONG_PULSE),this.addTapCycle(Se.SHORT_PULSE))}resetChecksum(){this.checksum=0}addByteFrame(t,r){let n=1;for(let u=0;u<8;u++){let d=(t&1<<u)!==0?1:0;this.addBit(d),n^=d}this.addBit(n),this.addDataMarker(r),this.checksum^=t}addLeader(t){let r;t===Se.LEADER_TYPE_HEADER?r=27136:t===Se.LEADER_TYPE_CONTENT?r=6656:r=79;for(let n=0;n<r;n++)this.addTapCycle(Se.SHORT_PULSE)}addSyncChain(t){let r;t?r=9:r=137;let n=9;for(;n>0;)this.addByteFrame(r,!0),r-=1,n-=1}addData(){for(let t=0;t<this.data.length;t++)this.addByteFrame(this.data[t],!0)}addFilename(){for(let t=0;t<this.filenameData.length;t++)this.addByteFrame(this.filenameData[t],!0)}addHeader(t){t?this.addLeader(Se.LEADER_TYPE_REPEATED):this.addLeader(Se.LEADER_TYPE_HEADER),this.addDataMarker(!0),this.addSyncChain(t),this.resetChecksum(),this.addByteFrame(this.fileType,!0),this.addByteFrame(this.startAddress&255,!0),this.addByteFrame((this.startAddress&65280)>>8,!0),this.addByteFrame(this.endAddress&255,!0),this.addByteFrame((this.endAddress&65280)>>8,!0),this.addFilename();for(let r=0;r<Se.NUMBER_OF_PADDING_BYTES;r++)this.addByteFrame(Se.PADDING_CHARACTER,!0);this.addByteFrame(this.checksum,!1)}addFile(){let t=!1;for(let r=0;r<2;r++)t?this.addLeader(Se.LEADER_TYPE_REPEATED):this.addLeader(Se.LEADER_TYPE_CONTENT),this.addDataMarker(!0),this.addSyncChain(t),this.resetChecksum(),this.addData(),this.addByteFrame(this.checksum,!1),t=!0;this.addLeader(1)}};Se.CLOCK_RATE=985248,Se.TAP_LENGTH_IN_SECONDS=8/Se.CLOCK_RATE,Se.FILENAME_BUFFER_SIZE=16,Se.FILE_TYPE_NONE=0,Se.FILE_TYPE_RELOCATABLE=1,Se.FILE_TYPE_SEQUENTIAL=2,Se.FILE_TYPE_NON_RELOCATABLE=3,Se.LEADER_TYPE_HEADER=0,Se.LEADER_TYPE_CONTENT=1,Se.LEADER_TYPE_REPEATED=2,Se.NUMBER_OF_PADDING_BYTES=171,Se.PADDING_CHARACTER=32,Se.SHORT_PULSE=48,Se.MEDIUM_PULSE=66,Se.LONG_PULSE=86;var wi=Se;var yr=Ya(ql());function Ro(l){return At()==null?(Ee("Please fix errors before sharing."),!0):At()instanceof Uint8Array?(lu(),Gt("lib/liblzg.js").then(()=>{var t=Gs(window.Module,Array.from(At()));window.Module=null;var r=btoa(In(t)),n={p:oe,r},u=$.param(n),d=uu(u,"player.html"),m='<iframe width=640 height=600 src="'+d+'">';$("#embedLinkTextarea").text(d),$("#embedIframeTextarea").text(m),$("#embedLinkModal").modal("show"),$("#embedAdviceWarnAll").hide(),$("#embedAdviceWarnIE").hide(),d.length>=65536?$("#embedAdviceWarnAll").show():d.length>=5120&&$("#embedAdviceWarnIE").show()}),!0):(Ee("Can't share a Verilog executable yet. (It's not actually a ROM...)"),!0)}function lu(){console.log("clipboard"),import("./clipboard-HVSSAXM3.js").then(l=>{let t=l.default;new t(".btn")})}function uu(l,t){console.log(l);var r=window.location,n=r.pathname.replace("index.html",""),u=r.host=="8bitworkshop.com"?"https:":r.protocol,d=u+"//"+r.host+n+t+"?"+l;return d}function cu(l){var r;var t=(r=rn())==null?void 0:r.code_start;Gt("lib/c2t.js").then(()=>{var n="",u=function(H){n+=H+`
`},d=window.c2t({noInitialRun:!0,print:u,printErr:u}),m=d.FS,y=st()+".bin",b=st()+".wav";m.writeFile(y,At(),{encoding:"binary"});var P=["-2bc",y+","+t.toString(16),b];d.callMain(P);var W=m.readFile(b,{encoding:"binary"});if(W){var K=new Blob([W],{type:"audio/wav"});(0,yr.saveAs)(K,b),n+="Then connect your audio output to the cassette input, turn up the volume, and play the audio file.",Wt(n)}})}function fu(l){Gt("lib/makewav.js").then(()=>{let t="",r=function(y){t+=y+`
`};var n=Et(st());let u=n+".bin",d=n+".wav";window.makewav({noInitialRun:!1,print:r,printErr:r,arguments:["-ts","-f0","-v10",u],preRun:y=>{y.FS.writeFile(u,At(),{encoding:"binary"})}}).ready.then(y=>{let b=[u];y.run(b),console.log(t);let W=y.FS.readFile(d,{encoding:"binary"});if(W){let K=new Blob([W],{type:"audio/wav"});(0,yr.saveAs)(K,d),t+=`
Connect your audio output to the SuperCharger input, turn up the volume, and play the audio file.`,Wt(t)}})})}function du(l){var t=Et(st());let r=t+".tap",n=new wi(t),u=new wa({sine_wave:!0}),d=At(),m=d[0]+d[1]*256;d=d.slice(2),n.setContent({data:d,startAddress:m,type:wi.FILE_TYPE_NON_RELOCATABLE}),n.generateSound(u);let y=u.getTAPData();if(y){let b=new Blob([y],{type:"application/octet-stream"});(0,yr.saveAs)(b,r)}}function ps(){switch(Mt(oe)){case"vcs":return fu;case"apple2":return cu;case"c64":return du}}function Lo(l){if(At()==null)return Ee("Please fix errors before exporting."),!0;var t=ps();if(t===void 0)return Ee("Cassette export is not supported on this platform."),!0;t(l)}function Fo(l){if(At()==null)return Ee("Please finish compiling with no errors before downloading ROM."),!0;var t=Et(st());if(k.getDownloadFile){var r=k.getDownloadFile(),t=Et(st());(0,yr.saveAs)(r.blob,t+r.extension)}else if(At()instanceof Uint8Array){var n=new Blob([At()],{type:"application/octet-stream"}),u=k.getROMExtension&&k.getROMExtension(At())||"-"+Mt(oe)+".bin";(0,yr.saveAs)(n,t+u)}else Ee(`The "${oe}" platform doesn't have downloadable ROMs.`)}function Io(l){var t=pe.getCurrentText();if(!t)return!1;var r=new Blob([t],{type:"text/plain;charset=utf-8"});(0,yr.saveAs)(r,$o(),{autoBom:!1})}async function Mo(){let l=(await import("./jszip.min-HOLYP7RC.js")).default;return new l}async function Oo(l){var t=await Mo();Lr().iterateFiles((r,n)=>{n&&t.file(It(r),n)}),t.generateAsync({type:"blob"}).then(r=>{(0,yr.saveAs)(r,st()+"-"+Mt(oe)+".zip")})}function No(l){let t=k.getDebugSymbolFile&&k.getDebugSymbolFile();if(!t){Ee("This project does not have debug information.");return}var r=Et(st());(0,yr.saveAs)(t.blob,r+t.extension,{autoBom:!1})}async function Uo(l){var t=await Mo(),r=await Xr().keys();Be(!0);try{var n=0;await Promise.all(r.map(d=>Xr().getItem(d).then(m=>{sr(n++/(r.length+1)),m&&t.file(d,m)})));var u=await t.generateAsync({type:"blob"});(0,yr.saveAs)(u,Mt(oe)+"-all.zip")}finally{Be(!1)}}var hs=!1;function Wo(){hs||Gt("lib/gif.js").then(()=>{var l=$("#emulator").find("canvas")[0];if(!l){Ee("Could not find canvas element to record video!");return}var t=0;l.style&&l.style.transform&&(l.style.transform.indexOf("rotate(-90deg)")>=0?t=-1:l.style.transform.indexOf("rotate(90deg)")>=0&&(t=1));var r=new GIF({workerScript:"lib/gif.worker.js",workers:4,quality:10,rotate:t}),n=$("#videoPreviewImage");r.on("progress",b=>{sr(b)}),r.on("finished",b=>{n.attr("src",URL.createObjectURL(b)),Be(!1),k.resume(),$("#videoPreviewModal").modal("show")});var u=20,d=300,m=0;console.log("Recording video",l),$("#emulator").css("backgroundColor","#cc3333");var y=()=>{m++>d?(console.log("Rendering video"),$("#emulator").css("backgroundColor","inherit"),Be(!0),k.pause(),r.render(),hs=!1):(r.addFrame(l,{delay:u,copy:!0}),setTimeout(y,u),hs=!0)};y()})}var Mu=Vl(),Si=rl(),re=Qa(window.location.search||"?"),oe,_i,Ke,k,be,pe,qr,sl,Es,bn=$("#controls_top"),nt,Dt,Ps,Ti,Sa,Yt,wn=Mi(re.electron),Rt=Mi(re.embed),vn,gn,Aa=!1,$i=!1,Pa=null,ol=null,ks=!1,ll="c.PC == 0x6000";function Xr(){return Yt}function Lr(){return be}function At(){return Ti}function rn(){return sl}var Ou={dasm:"6502",acme:"6502",cc65:"text/x-csrc",ca65:"6502",nesasm:"6502",z80asm:"z80",sdasz80:"z80",sdasgb:"z80",sdcc:"text/x-csrc",verilator:"verilog",jsasm:"z80",zmac:"z80",bataribasic:"bataribasic",markdown:"markdown",js:"javascript",xasm6809:"z80",cmoc:"text/x-csrc",yasm:"gas",smlrc:"text/x-csrc",inform6:"inform6",fastbasic:"fastbasic",basic:"basic",silice:"verilog",wiz:"text/x-wiz",vasmarm:"vasm",armips:"vasm",ecs:"ecs","remote:llvm-mos":"text/x-csrc",cc2600:"text/x-csrc",cc7800:"text/x-csrc",armtcc:"text/x-csrc",oscar64:"text/x-csrc"},Nu={dasm:"https://raw.githubusercontent.com/sehugg/dasm/master/doc/dasm.txt",cc65:"https://cc65.github.io/doc/cc65.html",ca65:"https://cc65.github.io/doc/ca65.html",sdcc:"http://sdcc.sourceforge.net/doc/sdccman.pdf",verilator:"https://www.veripool.org/ftp/verilator_doc.pdf",fastbasic:"https://github.com/dmsc/fastbasic/blob/master/manual.md",bataribasic:"help/bataribasic/manual.html",wiz:"https://github.com/wiz-lang/wiz/blob/master/readme.md#wiz",silice:"https://github.com/sylefeb/Silice",zmac:"https://raw.githubusercontent.com/sehugg/zmac/master/doc.txt",cmoc:"http://perso.b2b2c.ca/~sarrazip/dev/cmoc.html","remote:llvm-mos":"https://llvm-mos.org/wiki/Welcome",acme:"https://raw.githubusercontent.com/sehugg/acme/main/docs/QuickRef.txt"};function Uu(){return new Worker("./gen/worker/bundle.js")}var qt=(function(){try{let t="__some_random_key_you_are_not_going_to_use__";localStorage.setItem(t,t);var l=localStorage.getItem(t)==t;return localStorage.removeItem(t),l}catch(t){return!1}})(),_s=class{setLastPreset(t){qt&&!Rt&&(Ke&&oe&&!wn?localStorage.setItem("__lastrepo_"+oe,Ke):localStorage.removeItem("__lastrepo_"+oe),localStorage.setItem("__lastplatform",oe),localStorage.setItem("__lastid_"+_i,t))}unsetLastPreset(){qt&&!Rt&&(delete re.file,localStorage.removeItem("__lastid_"+_i))}getLastPreset(){return qt&&!Rt&&localStorage.getItem("__lastid_"+_i)}getLastPlatformID(){return qt&&!Rt&&localStorage.getItem("__lastplatform")}getLastRepoID(t){return qt&&!Rt&&t&&localStorage.getItem("__lastrepo_"+t)}shouldCompleteTour(){return qt&&!Rt&&!localStorage.getItem("8bitworkshop.hello")}completedTour(){qt&&!Rt&&localStorage.setItem("8bitworkshop.hello","true")}},Ai=new _s;function Ds(l,t){navigator.storage&&navigator.storage.persist?navigator.storage.persist().then(r=>{console.log("requestPersistPermission =",r),r?l&&!t&&Wt("Your browser says it will persist your local file edits, but you may want to back up your work anyway."):l&&Ee("Your browser refused to expand the peristent storage quota. Your edits may not be preserved after closing the page.")}):l&&Ee("Your browser may not persist edits after closing the page. Try a different browser.")}function Wu(){return Sa?Sa.title||Sa.name||be.mainPath||"ROM":be.mainPath||"ROM"}async function $u(){var l=new Hn(oe);return wn?(console.log("using electron with local filesystem",alternateLocalFilesystem),new Ni(l,alternateLocalFilesystem)):re.localfs!=null?new Ni(l,await Ju(re.localfs)):new Ni(l,new Bn(Yt))}async function Hu(){var l=await $u();be=new jn(Uu(),oe,k,l),be.remoteTool=re.tool||null,pe=new Vn($("#workspace")[0],be),be.callbackBuildResult=t=>{nc(t)},be.callbackBuildStatus=t=>{Bu(t)}}function Bu(l){l?bn.addClass("is-busy"):bn.removeClass("is-busy"),$("#compile_spinner").css("visibility",l?"visible":"hidden")}function Ts(l,t){var r=document.createElement("li"),n=document.createElement("a");return n.setAttribute("class","dropdown-item"),n.setAttribute("href","#"),n.setAttribute("data-wndid",l),l==pe.getActiveID()&&$(n).addClass("dropdown-item-checked"),n.appendChild(document.createTextNode(t)),r.appendChild(n),{li:r,a:n}}function yn(){var l=$("#windowMenuList").empty(),t=!1;function r(b,P,W){t&&(l.append(document.createElement("hr")),t=!1);let{li:K,a:H}=Ts(b,P);if(l.append(K),W){var N=(B,ue)=>{l.find("a").removeClass("dropdown-item-checked"),$(H).addClass("dropdown-item-checked")};pe.setCreateFunc(b,W),pe.setShowFunc(b,N),$(H).click(B=>{pe.createOrShow(b),Pa=b})}}function n(b){var P=k.getToolForFilename(b);P=="dasm"&&b.endsWith(".h")&&st().endsWith(".c")&&(P="cc65");var W=P&&Ou[P];return new Wi(b,W)}function u(b){r(b,It(b),()=>{var P=be.getFile(b);if(typeof P=="string")return n(b);if(P instanceof Uint8Array)return new Jn(b,P)})}u(be.mainPath),be.iterateFiles((b,P)=>{P&&b!=be.mainPath&&u(b)}),t=!0;var d=be.getListings();if(d)for(var m in d){var y=d[m];(y.assemblyfile&&y.assemblyfile.text||y.sourcefile&&y.sourcefile.text||y.text)&&r(m,It(m),b=>new Yn(b))}t=!0,k.disassemble&&k.saveState&&r("#disasm","Disassembly",()=>new Zi),k.readAddress&&r("#memory","Memory Browser",()=>new tn),be.segments&&be.segments.length&&r("#memmap","Memory Map",()=>new Kn),k.readVRAMAddress&&r("#memvram","VRAM Browser",()=>new Qn),k.startProbing&&(r("#memheatmap","Memory Probe",()=>new ea),r("#crtheatmap","CRT Probe",()=>new ta),r("#probelog","Probe Log",()=>new ra),r("#scanlineio","Scanline I/O",()=>new ia),r("#symbolprobe","Symbol Profiler",()=>new na),r("#callstack","Call Stack",()=>new ya)),k.getDebugTree&&r("#debugview","Debug Tree",()=>new ba),r("#asseteditor","Asset Editor",()=>new ma)}function ju(l,t){if(t){var r=re.highlight.split(","),n=parseInt(r[0])-1,u=parseInt(r[1])-1,d=pe.createOrShow(l);d.highlightLines(n,u)}}function il(l){yn(),pe.createOrShow(l),be.setMainFile(l),ju(l,re.highlight)}async function zu(l){be.mainPath=l,Ai.setLastPreset(l);var t=await be.loadFiles([l]);if(t&&t.length)il(l);else{var r=await Gu(l);be.filedata[l]=r||`
`,il(l),re.newfile?Ds(!0,!0):Wt('Could not find file "'+l+'". Loading default file.'),delete re.newfile,La()}}function Rs(l){if(l=="/")re={repo:"/"};else if(l.indexOf("://")>=0){var t=Ji(l);t&&(re={repo:t.repopath})}else re.platform=oe,re.file=l;xi()}async function Gu(l){var t=k.getToolForFilename(l);try{return await $.get("presets/"+Mt(oe)+"/skeleton."+t,"text")}catch(r){Ee("Could not load skeleton for "+oe+"/"+t+"; using blank file")}}function Ls(l){return l.indexOf(" ")>=0?(Ee("No spaces in filenames, please."),!1):!0}function Vu(l){return bootbox.prompt({title:"Enter the name of your new main source file.",placeholder:"newfile"+k.getDefaultExtension(),callback:t=>{if(t&&t.trim().length>0){if(!Ls(t))return;t.indexOf(".")<0&&(t+=k.getDefaultExtension());var r=t;bi("workspace","file","new"),re.newfile="1",Rs(r)}}}),!0}function qu(l){let t=$('<input type="file" multiple accept="*" style="display:none">'),r=t[0];t.change(n=>{Yu(r.files)}),t.click()}function Yu(l){console.log(l);var t=0;function r(){var n=l[t++];if(!n)console.log("Done uploading",t),t>2?(Wt("Files uploaded."),setTimeout(xn,1e3)):(re.file=l[0].name,bootbox.confirm({message:"Open '"+Si.sanitize(re.file)+"' as main project file?",buttons:{confirm:{label:"Open As New Project"},cancel:{label:"Include/Link With Project Later"}},callback:m=>{m?xi():setTimeout(xn,1e3)}})),bi("workspace","file","upload");else{var u=n.name,d=new FileReader;d.onload=function(m){var y=m.target.result,b=new Uint8Array(y);pi(u,b)||(b=Mn(b).replace(`\r
`,`
`)),pe.updateFile(u,b),console.log("Uploaded "+u+" "+b.length+" bytes"),r()},d.readAsArrayBuffer(n)}}l&&r()}async function Xu(l){var t=window.showDirectoryPicker;t||Ee("This browser can't open local files on your computer, yet. Try Chrome.");var r=await t(),n=r.name,u="__localfs__"+n,d={handle:r},m=Cs.createInstance({name:u,version:2});await m.setItem(u,d),re={localfs:n},xi(!0)}async function Qu(l){return new Promise((t,r)=>{bootbox.prompt(Si.sanitize(l),n=>{t(n)})})}async function Ju(l){let t={mode:"readwrite"};var r="__localfs__"+l,n=Cs.createInstance({name:r,version:2}),u=await n.getItem(r),d=u.handle;console.log(u,d);var m=await d.queryPermission(t);if(console.log(m),m!=="granted"&&(await Qu("Request permissions to access filesystem?"),m=await d.requestPermission(t)),m!=="granted"){Ee("Could not get permission to access filesystem.");return}return{getFileData:async y=>{console.log("getFileData",y);let b=await d.getFileHandle(y,{create:!1});console.log("getFileData",b);let P=await b.getFile();console.log("getFileData",P);let W=await(pi(y)?P.binary():P.text());return console.log(b,P,W),W},setFileData:async(y,b)=>{}}}function st(){return It(be.mainPath)}function $o(){return It(pe.getActiveID())}function Ku(l){var t=pe.getActive();if(t&&t.setText){var r=pe.getActiveID();$.get("presets/"+Mt(oe)+"/"+r,n=>{bootbox.confirm("Reset '"+Si.sanitize(r)+"' to default?",u=>{u&&t.setText(n)})},"text").fail(()=>{Ke?Ee("Can only revert built-in examples. If you want to revert all files, You can pull from the repository."):Ee("Can only revert built-in examples.")})}else Ee("Cannot revert the active window. Please choose a text file.")}function Zu(l){var t=pe.getActive();if(t&&t.getPath){var r=pe.getActiveID();bootbox.confirm("Delete '"+Si.sanitize(r)+"'?",n=>{n&&Yt.removeItem(r).then(()=>{re.file==r?(Ai.unsetLastPreset(),xi()):(xn(),Wt("Deleted "+r))})})}else Ee("Cannot delete the active window.")}function ec(l){var t=pe.getActive();if(t&&t.getPath&&be.getFile(t.getPath())){var r=pe.getActiveID();bootbox.prompt({title:"Rename '"+Si.sanitize(r)+"' to?",value:r,callback:n=>{var u=be.getFile(t.getPath());if(n&&n!=r&&u){if(!Ls(n))return;Yt.removeItem(r).then(()=>Yt.setItem(n,u)).then(()=>{xn(),alert("Renamed "+r+" to "+n),r==be.mainPath&&Rs(n)})}}})}else Ee("Cannot rename the active window.")}function tc(l){let t={},r,n=k.getPresets?k.getPresets():[];for(var u=0;u<n.length;u++){var d=n[u],m=d.chapter?d.chapter+". "+d.name:d.name,y=d.id==be.mainPath;d.category?r=$("<optgroup />").attr("label","Examples: "+d.category).appendTo(l):r||(r=$("<optgroup />").attr("label","Examples").appendTo(l)),r.append($("<option />").val(d.id).text(m).attr("selected",y?"selected":null)),y&&(Sa=d),t[d.id]=m}return t}function rc(l){if(qt&&!wn){var t=0,r=Ui();if(r){let u=$("<optgroup />").attr("label","Repositories").appendTo(l);for(let d in r){var n=r[d];n.platform_id&&Mt(n.platform_id)==Mt(oe)&&u.append($("<option />").val(n.url).text(n.url.substring(n.url.indexOf("/"))))}}}}async function nl(l,t,r,n){let u=await Yt.keys();u||(u=[]);let d;for(var m=0;m<u.length;m++){let y=u[m];if(y.startsWith(r)&&!n[y]){d||(d=$("<optgroup />").attr("label",t).appendTo(l));let b=y.substring(r.length);d.append($("<option />").val(y).text(b).attr("selected",y==be.mainPath?"selected":null))}}}function al(l){l.css("visibility","visible");var t=be.mainPath;l.val()!=t&&l.append($("<option />").val(t).text(t).attr("selected","selected"))}async function xn(){var l=$("#preset_select").empty();if(Ke)l.append($("<option />").val("/").text("Leave Repository")),$("#repo_name").text(It(Ke)+"/").show(),await nl(l,Ke,"",{}),al(l);else{rc(l);var t=tc(l);await nl(l,"Local Files","",t),al(l)}l.off("change").change(function(r){Rs($(this).val().toString())})}function ic(l){var t=$("<p/>");if(l.path!=null){var r=l.line?l.label?`(${l.path} @ ${l.label})`:`(${l.path}:${l.line})`:`(${l.path})`,n=$("<a/>").text(r),u=l.path;u==st()&&(u=be.mainPath),pe.isWindow(u)&&n.click(d=>{var m=pe.createOrShow(u);m instanceof Wi&&m.setCurrentLine(l,!0)}),t.append(n),t.append("&nbsp;")}return t.append($("<span/>").text(l.msg)),t}function ul(){$("#error_alert").hide(),ks=!1}function Fs(l,t){var r=$("#error_alert_msg").empty();for(var n of l.slice(0,10))r.append(ic(n));$("#error_alert").show(),ks=t}function cl(l,t){if(t!=null){var r={msg:t,line:0};l instanceof Ka&&l.$loc&&(r=Object.create(l.$loc),r.msg=t,console.log(r)),Fs([r],!0)}}async function nc(l){if("errors"in l&&l.errors.length>0)bn.addClass("has-errors"),pe.setErrors(l.errors),yn(),Fs(l.errors,!1);else{if(bn.removeClass("has-errors"),pe.setErrors(null),ul(),l==null||"unchanged"in l&&l.unchanged||!("output"in l))return;k.debugSymbols=new Js(l.symbolmap,l.debuginfo),sl=l.params;var t=l.output;if(t!=null)try{_n(),gl(),await k.loadROM(Wu(),t),Ti=t,Ps||Ir(),Yc()}catch(r){console.log(r),bn.addClass("has-errors"),cl(r,r+""),Ti=null,yn();return}yn(),pe.refresh(!1)}}async function ac(){if(k.loadBIOS){var l=oe+".rom",t=await Yt.getItem(l);t instanceof Uint8Array?(console.log("loading BIOS",l,t.length+" bytes"),k.loadBIOS(l,t)):console.log("BIOS file must be binary")}}function fl(){var l=$("#mem_info");l.hide(),vn=null}function En(l){if(Ks(k)){var t=$("#mem_info"),r=$("#mem_info_msg"),n=k.getDebugCategories();n&&!gn&&(gn=n[0]);var u=l&&k.getDebugInfo(gn,l);if(typeof u=="string"){var d=vn?zs(vn,u):u;t.show(),r.html(d);var m=$('<div class="mem_info_links">'),y=P=>{var W=$("<a>"+P+"</a>");P==gn&&W.addClass("selected"),W.click(K=>{gn=P,vn=null,En(qr)}),m.append(W),m.append("<span> </span>")};for(var b of n)y(b);r.append("<br>"),r.append(m),vn=u}else fl()}}function Da(l,t){$("#debug_bar, #run_bar").find("button").removeClass("btn_active").removeClass("btn_stopped"),$("#dbg_"+l).addClass("btn_"+t)}function Ss(){return k&&Ti!=null}function lr(){return Ss()?!0:(Ee("Can't do this until build successfully completes."),!1)}function sc(l){if(Pa&&Pa.startsWith("#")||["toline","restart","tovsync","stepover"].includes(ol)||!k.disassemble)return;let t=be.getListings(),r="#disasm",n=256;if(t){let u=l.c?l.c.EPC||l.c.PC:0;for(let d in t){let m=t[d],y=m.assemblyfile||m.sourcefile,b=be.filename2path[d]||d;if(y==m.sourcefile&&(b=pe.findWindowWithFilePrefix(d)),pe.isWindow(b)){let P=y&&y.findLineForOffset(u,Xn);if(P){let W=y.lines[P.line+1];if(!W||u<W.offset){let K=u-P.offset;K<n&&(r=b,n=K)}}}}}pe.createOrShow(r,!0)}function Ca(l){qr=l,En(l),sc(l),pe.refresh(!0),Aa=!0}function dl(l){k.setupDebug&&(k.setupDebug((t,r)=>{Ca(t),Da(l||"pause","stopped"),r&&Fs([{msg:"STOPPED: "+r,line:0}],!0)}),ol=l)}function vr(l){lr()&&(Is(),dl(l),l&&Da(l,"active"))}function Qr(){k&&k.isRunning()&&(k.pause(),console.log("Paused")),Da("pause","stopped")}function oc(){lr()&&(_n(),Qr(),Ps=!0)}function Ir(){k.isRunning()||(k.resume(),console.log("Resumed")),Da("go","active"),ks&&ul()}function hl(){lr()&&(_n(),k.isRunning()||pe.refresh(!1),Ir(),Ps=!1,Pa=null)}function lc(){lr()&&(vr("step"),k.step())}function uc(){lr()&&(vr("stepover"),k.stepOver())}function cc(){lr()&&(vr("tovsync"),k.runToVsync())}function pl(){var l=pe.getActive();return l&&l.getCursorPC&&l.getCursorPC()}function en(l){!lr()||!(l>=0)||(vr("toline"),console.log("Run to",l.toString(16)),k.runToPC?k.runToPC(l):k.runEval(t=>t.PC==l))}function fc(){k.restartAtPC(pl())?hl():Ee("Could not restart program at selected line.")}function dc(){en(pl())}function hc(){lr()&&(vr("stepout"),k.runUntilReturn())}function pc(){lr()&&(vr("stepback"),k.stepBack())}function _n(){qr=null,k.clearDebug&&k.clearDebug(),dl(),En()}function As(){k.reset(),gl()}function mc(){lr()&&(_n(),As(),Ir())}function gc(){if(lr()){var l=$i;Is(),k.setupDebug&&k.runEval?(_n(),Ir(),As(),vr("restart"),k.runEval(t=>!0)):(As(),Ir()),l&&vl()}}function vc(){var l=$("#debugExprModal"),t=$("#debugExprSubmit");$("#debugExprInput").val(ll),$("#debugExprExamples").text(bc()),l.modal("show"),t.off("click").on("click",()=>{var r=$("#debugExprInput").val()+"";l.modal("hide"),yc(r)})}function bc(){var l=k.saveState&&k.saveState(),t=l.c;console.log(t,l);var r="";return t.PC&&(r+="c.PC == 0x"+Ne(t.PC)+`
`),t.SP&&(r+="c.SP < 0x"+Ne(t.SP)+`
`),t.HL&&(r+=`c.HL == 0x4000
`),k.readAddress&&(r+=`this.readAddress(0x1234) == 0x0
`),k.readVRAMAddress&&(r+=`this.readVRAMAddress(0x1234) != 0x80
`),k.getRasterScanline&&(r+=`this.getRasterScanline() > 222
`),r}function yc(l){var t=new Function("c","return ("+l+");").bind(k);vr(),k.runEval(t),ll=l}function ml(){k.isRunning()?(pe.tick(),Aa=!1):Aa||(pe.tick(),Aa=!0),setTimeout(ml,100)}function Ra(l){k.setFrameRate(l),l>.01?$("#fps_label").text(l.toFixed(2)):$("#fps_label").text("1/"+Math.round(1/l))}function xc(){var l=k.getFrameRate();l=l/2,l>1e-5&&Ra(l)}function wc(){var l=k.getFrameRate();l=Math.min(60,l*2),Ra(l)}function Ec(){Ra(60/65536)}function _c(){Ir(),Ra(60)}function Tc(){pe.refresh(!1);var l=pe.getActive();if(l.getSourceFile&&l.setTimingResult){var t=k.newCodeAnalyzer();t.showLoopTimingForPC(0),l.setTimingResult(t)}}function Is(){$i&&(k.setRecorder(null),$("#dbg_record").removeClass("btn_recording"),$("#replaydiv").hide(),fl(),$i=!1)}function gl(){$i&&Dt.reset()}function vl(){Dt.reset(),k.setRecorder(Dt),$("#dbg_record").addClass("btn_recording"),$("#replaydiv").show(),$i=!0}function Sc(){$i?Is():vl()}function Fr(l,t,r){var n=pe.getActive();n&&n.insertText?bootbox.prompt({title:"Add "+Si.sanitize(l)+" File to Project",value:"filename"+Si.sanitize(t),callback:u=>{if(u&&u.trim().length>0){if(!Ls(u))return;var d=u,m=`
`+r(u)+`
`;be.loadFiles([d]).then(y=>{y&&y.length?Ee(u+" already exists; including anyway"):be.updateFile(d,`
`),n.insertText(m),yn()})}}}):Ee("Can't insert text in this window -- switch back to main file")}function Ac(){var l=st(),t=k.getToolForFilename(l);l.endsWith(".c")||t=="sdcc"||t=="cc65"||t=="cmoc"||t=="smlrc"?Fr("Header",".h",r=>'#include "'+r+'"'):t=="dasm"||t=="zmac"?Fr("Include",".inc",r=>'	include "'+r+'"'):t=="ca65"||t=="sdasz80"||t=="vasm"||t=="armips"?Fr("Include",".inc",r=>'	.include "'+r+'"'):t=="verilator"?Fr("Verilog",".v",r=>'`include "'+r+'"'):t=="wiz"?Fr("Include",".wiz",r=>'import "'+r+'";'):t=="ecs"?Fr("Include",".ecs",r=>'import "'+r+'"'):t=="acme"?Fr("Include",".acme",r=>'!src "'+r+'"'):Ee("Can't add include file to this project type ("+t+")")}function Cc(){var l=st(),t=k.getToolForFilename(l);l.endsWith(".c")||t=="sdcc"||t=="cc65"||t=="cmoc"||t=="smlrc"?Fr("Linked C (or .s)",".c",r=>'//#link "'+r+'"'):l.endsWith("asm")||l.endsWith(".s")||t=="ca65"||t=="lwasm"?Fr("Linked ASM",".inc",r=>';#link "'+r+'"'):Ee("Can't add linked file to this project type ("+t+")")}function Pc(){if(nt=new $n($("#toolbar")[0],null),nt.grp.prop("id","run_bar"),nt.add("ctrl+alt+r","Reset","glyphicon-refresh",mc).prop("id","dbg_reset"),nt.add("ctrl+alt+,","Pause","glyphicon-pause",oc).prop("id","dbg_pause"),nt.add("ctrl+alt+.","Resume","glyphicon-play",hl).prop("id","dbg_go"),k.restartAtPC&&nt.add("ctrl+alt+/","Restart at Cursor","glyphicon-play-circle",fc).prop("id","dbg_restartatline"),nt.newGroup(),nt.grp.prop("id","debug_bar"),k.runEval&&nt.add("ctrl+alt+e","Reset and Debug","glyphicon-fast-backward",gc).prop("id","dbg_restart"),k.stepBack&&nt.add("ctrl+alt+b","Step Backwards","glyphicon-step-backward",pc).prop("id","dbg_stepback"),k.step&&nt.add("ctrl+alt+s","Single Step","glyphicon-step-forward",lc).prop("id","dbg_step"),k.stepOver&&nt.add("ctrl+alt+t","Step Over","glyphicon-hand-right",uc).prop("id","dbg_stepover"),k.runUntilReturn&&nt.add("ctrl+alt+o","Step Out of Subroutine","glyphicon-hand-up",hc).prop("id","dbg_stepout"),k.runToVsync&&nt.add("ctrl+alt+n","Next Frame/Interrupt","glyphicon-forward",cc).prop("id","dbg_tovsync"),(k.runEval||k.runToPC)&&!oe.startsWith("verilog")&&nt.add("ctrl+alt+l","Run To Line","glyphicon-save",dc).prop("id","dbg_toline"),nt.newGroup(),nt.grp.prop("id","xtra_bar"),$(".dropdown-menu").collapse({toggle:!1}),$("#item_new_file").click(Vu),$("#item_upload_file").click(qu),$("#item_open_directory").click(Xu),$("#item_github_login").click(_o),$("#item_github_logout").click(To),$("#item_github_import").click(So),$("#item_github_publish").click(Ao),$("#item_github_push").click(Co),$("#item_github_pull").click(Po),$("#item_repo_delete").click(Do),$("#item_share_file").click(Ro),$("#item_reset_file").click(Ku),$("#item_rename_file").click(ec),$("#item_delete_file").click(Zu),k.runEval?$("#item_debug_expr").click(vc).show():$("#item_debug_expr").hide(),$("#item_download_rom").click(Fo),$("#item_download_file").click(Io),$("#item_download_zip").click(Oo),k.getDebugSymbolFile?$("#item_download_sym").click(No):$("#item_download_sym").hide(),$("#item_download_allzip").click(Uo),$("#item_record_video").click(Wo),ps()?$("#item_export_cassette").click(Lo):$("#item_export_cassette").hide(),k.setFrameRate&&k.getFrameRate&&($("#dbg_slower").click(xc),$("#dbg_faster").click(wc),$("#dbg_slowest").click(Ec),$("#dbg_fastest").click(_c)),$("#item_addfile_include").click(Ac),$("#item_addfile_link").click(Cc),$("#item_request_persist").click(()=>Ds(!0,!1)),ml(),k.newCodeAnalyzer&&nt.add(null,"Analyze CPU Timing","glyphicon-time",Tc),k.setRecorder&&k.advance&&kc(),k.showHelp){let{li:r,a:n}=Ts("help__"+oe,Es+" Help");$("#help_menu").append(r),$(n).click(()=>window.open(k.showHelp(),"_8bws_help"))}let l=k.getToolForFilename(st()),t=Nu[l];if(t){let{li:r,a:n}=Ts("help__"+l,l+" Help");$("#help_menu").append(r),$(n).click(()=>window.open(t,"_8bws_help"))}}function kc(){var l=$("#replayslider"),t=$("#clockslider"),r=$("#replay_frame"),n=$("#replay_clock");k.advanceFrameClock||$("#clockdiv").hide();var u=()=>{r.text(Dt.lastSeekFrame+""),n.text(Dt.lastSeekStep+"")},d=b=>{Qr();var P=parseInt(l.val().toString()),W=parseInt(t.val().toString());Dt.loadFrame(P,W)>=0&&(t.attr("min",0),t.attr("max",Dt.lastStepCount),u(),Ca(k.saveState()))},m=b=>{Qr(),Dt.loadFrame(b)>=0&&(l.val(b),u(),Ca(k.saveState()))},y=b=>{Qr();var P=parseInt(l.val().toString());Dt.loadFrame(P,b)>=0&&(t.val(b),u(),Ca(k.saveState()))};Dt.callbackStateChanged=()=>{l.attr("min",0),l.attr("max",Dt.numFrames()),l.val(Dt.currentFrame()),t.val(Dt.currentStep()),u(),En(k.saveState())},l.on("input",d),t.on("input",d),$("#replay_min").click(()=>{m(1)}),$("#replay_max").click(()=>{m(Dt.numFrames())}),$("#replay_back").click(()=>{m(parseInt(l.val().toString())-1)}),$("#replay_fwd").click(()=>{m(parseInt(l.val().toString())+1)}),$("#clock_back").click(()=>{y(parseInt(t.val().toString())-1)}),$("#clock_fwd").click(()=>{y(parseInt(t.val().toString())+1)}),$("#replay_bar").show(),nt.add("ctrl+alt+0","Start/Stop Replay Recording","glyphicon-record",Sc).prop("id","dbg_record")}function Dc(){try{var l=window.screen.orientation||window.screen.msOrientation||window.screen.mozOrientation||null;if(l){if(l.type.indexOf("landscape")!==-1)return!0;if(l.type.indexOf("portrait")!==-1)return!1}if("orientation"in window){var t=window.orientation;if(t===0||t===180)return!1;if(t===90||t===270)return!0}}catch(r){}return window.innerWidth>window.innerHeight}async function Rc(){if(Ai.shouldCompleteTour()){await Gt("lib/bootstrap-tourist.js");var l=oe.startsWith("vcs"),t=[{element:"#platformsMenuButton",placement:"right",title:"Platform Selector",content:`You're currently on the "<b>`+oe+'</b>" platform. You can choose a different one from the menu.'},{element:"#preset_select",title:"Project Selector",content:"You can choose different code examples, create your own files, or import projects from GitHub."},{element:"#workspace",title:"Code Editor",content:l?"Type your 6502 assembly code into the editor, and it'll be assembled in real-time.":"Type your source code into the editor, and it'll be compiled in real-time."},{element:"#emulator",placement:"left",title:"Emulator",content:"We'll load your compiled code into the emulator whenever you make changes."},{element:"#debug_bar",placement:"bottom",title:"Debug Tools",content:"Use these buttons to set breakpoints, single step through code, pause/resume, and use debugging tools."},{element:"#dropdownMenuButton",title:"Main Menu",content:"Click the menu to create new files, download your code, or share your work with others."},{element:"#sidebar",title:"Sidebar",content:"Pull right to expose the sidebar. It lets you switch between source files, view assembly listings, and use other tools like Disassembler, Memory Browser, and Asset Editor."}];Dc()||t.unshift({element:"#controls_top",placement:"bottom",title:"Portrait mode detected",content:"This site works best on desktop browsers. For best results, rotate your device to landscape orientation."}),window.location.host.endsWith("8bitworkshop.com")&&(t.unshift({element:"#dropdownMenuButton",placement:"right",title:"Cookie Consent",content:'Before we start, we should tell you that this website stores cookies and other data in your browser. You can review our <a href="/privacy.html" target="_new">privacy policy</a>.'}),t.push({element:"#booksMenuButton",placement:"left",title:"Books",content:"Get some books that explain how to program all of this stuff, and write some games!"})),wn&&(t.unshift({element:"#dropdownMenuButton",placement:"right",title:"Developer Analytics",content:"BTW, we send stack traces to sentry.io when exceptions are thrown. Hope that's ok."}),t.unshift({element:"#dropdownMenuButton",placement:"right",title:"Welcome to 8bitworkshop Desktop!",content:'The directory "~/8bitworkshop" contains all of your file edits and built ROM images. You can create new projects under the platform directories (e.g. "c64/myproject")'}));var r=new Tour({autoscroll:!1,steps:t,onEnd:()=>{Ai.completedTour()}});setTimeout(()=>{r.start()},2500)}}function ka(l){var t=(l.message||l.error||l)+"";if(t.indexOf("QuotaExceededError")>=0)Ds(!1,!1);else{var r=l.error||l.reason;r!=null&&r instanceof Ka&&Lc(r)}}function Lc(l){console.log("haltEmulation"),Qr(),qc(l)}function Fc(){window.addEventListener("error",ka),window.addEventListener("unhandledrejection",ka)}function bl(){window.removeEventListener("error",ka),window.removeEventListener("unhandledrejection",ka)}function xi(l,t){t&&(re=t),bl(),l?window.location.replace("?"+$.param(re)):window.location.href="?"+$.param(re)}function La(){oe&&(re.platform=oe),delete re[""],history.replaceState({},"","?"+$.param(re))}function Ic(){var l=!1;document.addEventListener("visibilitychange",()=>{document.visibilityState=="hidden"&&k&&k.isRunning()?(Qr(),l=!0):document.visibilityState=="visible"&&l&&(Ir(),l=!1)}),$(window).on("focus",()=>{l&&(Ir(),l=!1)}),$(window).on("blur",()=>{k&&k.isRunning()&&(Qr(),l=!0)}),$(window).on("orientationchange",()=>{k&&k.resize&&setTimeout(k.resize.bind(k),200)})}function Mc(){var l=$(document).find(".emucontrols-"+mi(oe));oe.endsWith(".mame")&&l.show();var t=$("#emulator").find("canvas");t&&(t.on("focus",()=>{k.isRunning()&&(l.fadeIn(200),k.pause(),k.resume())}),t.on("blur",()=>{l.fadeOut(200)}))}function Oc(){window.ga&&($(".dropdown-item").click(l=>{l.target&&l.target.id&&bi("menu",l.target.id)}),Eo(location.pathname+"?platform="+oe+(Ke?"&repo="+Ke:"&file="+re.file)))}async function Nc(){if(!Ja[oe])throw Error("Invalid platform '"+oe+"'.");let l=$("#emuscreen")[0],t=Qa(re.options||"");k=new Ja[oe](l,t),jc(),Dt=new eo(k);let r=k.getPresets?k.getPresets():[];if(!re.file){var n=Ai.getLastPreset(),u=n||(Ke?null:r[0].id);re.file=u||"DEFAULT",u||Ee("There is no default main file for this project. Try selecting one from the pulldown.")}oe=="vcs"&&re.file.startsWith("examples/")&&!re.file.endsWith(".a")&&(re.file+=".a"),La(),Fc(),Oc(),await k.start(),await ac(),await Hu(),await zu(re.file),k.sourceFileFetch=d=>be.filedata[d],Pc(),Ic(),Mc(),Rt?Uc():(xn(),Wc(),Rc()),yl()}function Uc(){$("#dropdownMenuButton").hide(),$("#platformsMenuButton").hide(),$("#booksMenuButton").hide()}function Wc(){mi(oe)=="nes"?$(".book-nes").addClass("book-active"):mi(oe)=="vcs"?$(".book-vcs").addClass("book-active"):mi(oe)=="verilog"?$(".book-verilog").addClass("book-active"):mi(oe)=="c64"?$(".book-c64").addClass("book-active"):k.getToolForFilename(st())=="sdcc"&&$(".book-arcade").addClass("book-active")}function yl(){setTimeout(()=>{$("#controls_dynamic").css("visibility","inherit")},250)}function $c(){var l="workspace-split3-"+oe;Rt&&(l="embed-"+l);var t;oe.startsWith("vcs")?t=[0,50,50]:Rt||Ki?t=[0,55,45]:t=[12,44,44];var r=qt&&localStorage.getItem(l);if(r)try{t=JSON.parse(r)}catch(u){console.log(u)}var n=Mu(["#sidebar","#workspace","#emulator"],{sizes:t,minSize:[0,250,250],onDrag:()=>{k&&k.resize&&k.resize()},onDragEnd:()=>{qt&&localStorage.setItem(l,JSON.stringify(n.getSizes())),pe&&pe.resize()}})}function Hc(l){let t=Mi(re.ignore)||Rt;Be(!0),Nn(l,async r=>{if(r){var n=It(l);console.log("Importing "+r.length+" bytes as "+n);try{var u=await Yt.getItem(n);Be(!1),u!=null&&t||(u==null||confirm("Replace existing file '"+n+"'?"))&&await Yt.setItem(n,r),delete re.importURL,re.file=n,La(),wl()}finally{Be(!1)}}else Ee("Could not load source code from URL: "+l),Be(!1)},"text")}async function Bc(){var l=Mi(re.ignore),t=Mi(re.force);Rt?l=!t:t=!1;for(var r=0;r<20;r++){let u=re["file"+r+"_name"],d=re["file"+r+"_data"];if(u==null||d==null)break;var n=await Yt.getItem(u);if(!(l&&n)){let m=d;re["file"+r+"_type"]=="binary"&&(m=Fn(atob(m))),(!n||t||confirm("Replace existing file '"+u+"'?"))&&await Yt.setItem(u,m)}r==0&&(re.file=u),delete re["file"+r+"_name"],delete re["file"+r+"_data"],delete re["file"+r+"_type"]}delete re.ignore,delete re.force,La()}function jc(){var l=k.getPlatformName&&k.getPlatformName(),t=$('a[href="?platform='+oe+'"]');t.length&&(t.addClass("dropdown-item-checked"),l=l||t.text()||l),Es=l||oe,$(".platform_name").text(Es)}function zc(){if(oe=re.platform||Ai.getLastPlatformID(),Ke=re.repo,!re.repo&&!re.file&&(Ke=Ai.getLastRepoID(oe)),qt&&Ke&&Ke!=="/"){var l=Ui()[Ke];l&&(console.log(oe,re,l),re.repo=Ke,l.platform_id&&!re.platform&&(re.platform=oe=l.platform_id),l.mainPath&&!re.file&&(re.file=l.mainPath))}else Ke="",delete re.repo;oe||(Rt&&wo("The 'platform' must be specified when embed=1"),oe=re.platform="vcs")}async function xl(){if(re.githubURL){xa(re.githubURL,!0);return}if(zc(),$c(),_i=Ke||Mt(oe),Rt&&(_i=(document.referrer||document.location.href)+_i),Yt=zn(_i),re.importURL){Hc(re.importURL);return}re.file0_name&&await Bc(),wl()}async function wl(){try{var l=await to(mi(oe));console.log("starting platform",oe),await Nc(),document.title=document.title+" ["+oe+"] - "+(Ke?"["+Ke+"] - ":"")+be.mainPath}catch(t){console.log(t),Ee('Platform "'+oe+'" failed to load.')}finally{yl()}}var Ms="__use_https";function El(l){document.cookie=Ms+"="+l+";domain=8bitworkshop.com;path=/;max-age=315360000"}function Gc(){var l=Un(Ms);if(typeof l=="string")return!!l;var t=qt&&!localStorage.getItem("__lastplatform")?1:0;return El(t),!!t}function Vc(){bootbox.confirm('<p>Do you want to force the browser to use HTTPS from now on?</p><p>WARNING: This will make all of your local files unavailable, so you should "Download All Changes" first for each platform where you have done work.</p><p>You can go back to HTTP by setting the "'+Ms+'" cookie to 0.</p>',l=>{l&&(El(1),_l())})}function _l(){window.location.protocol=="http:"&&window.location.host=="8bitworkshop.com"&&(Gc()?(bl(),window.location.replace(window.location.href.replace(/^http:/,"https:"))):$("#item_switch_https").click(Vc).show())}_l();function Bd(l,t){k.writeFile(l,t)}function jd(l){return k.readFile(l)}function zd(){return k.saveState()}function qc(l){var t=l&&l.message||t;cl(l,t),pe.refresh(!1),k.saveState&&En(k.saveState())}async function Gd(l){var t=be.filedata[l];t!=null&&(pe.updateFile(l,await alternateLocalFilesystem.getFileData(l)),console.log("updating file",l))}function Yc(){if(wn&&Ti instanceof Uint8Array){var l=Et(st()),t=k.getROMExtension&&k.getROMExtension(Ti)||"-"+Mt(oe)+".bin";alternateLocalFilesystem.setFileData(`bin/${l}${t}`,Ti)}}function Vd(l){var t=pe.getActive();if(t instanceof Wi){var r=t.editor.getSearchCursor(l);r.findNext()&&t.editor.setSelection(r.pos.to,r.pos.from)}}function Xc(){let l=!1;new IntersectionObserver((r,n)=>{for(var u of r)u.isIntersecting&&!l&&(xl(),l=!0),u.intersectionRatio==0&&Ss()&&k.isRunning()&&Qr(),u.intersectionRatio>0&&Ss()&&!k.isRunning()&&Ir()},{}).observe($("#emulator")[0])}typeof process=="undefined"&&(Rt&&typeof IntersectionObserver=="function"?Xc():xl());export{uo as a,re as b,oe as c,_i as d,Ke as e,k as f,be as g,pe as h,qr as i,Xr as j,Lr as k,At as l,rn as m,st as n,$o as o,vr as p,en as q,_n as r,Ra as s,Lc as t,xi as u,$c as v,zc as w,xl as x,Bd as y,jd as z,zd as A,qc as B,Gd as C,Vd as D};
/*! Bundled license information:

localforage/dist/localforage.js:
  (*!
      localForage -- Offline Storage, Improved
      Version 1.10.0
      https://localforage.github.io/localForage
      (c) 2013-2017 Mozilla, Apache License 2.0
  *)

jquery/dist/jquery.js:
  (*!
   * jQuery JavaScript Library v3.7.1
   * https://jquery.com/
   *
   * Copyright OpenJS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2023-08-28T13:37Z
   *)

dompurify/dist/purify.cjs.js:
  (*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE *)
*/
//# sourceMappingURL=chunk-TVC47FIG.js.map
