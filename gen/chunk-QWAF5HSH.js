function te(e,t){for(e+="";e.length<t;)e=" "+e;return e}function re(e,t){for(e+="";e.length<t;)e+=" ";return e}function ne(e){return e&=255,e<128?e:-(256-e)}function ie(e){var t=e.split("/");return t[t.length-1]}function ae(e){return e.substring(0,e.lastIndexOf("/"))}function se(e){var t=e.lastIndexOf(".");return t>0?e.substr(0,t):e}function E(e,t){return t||(t=2),t==8?E(e>>16&65535,4)+E(e&65535,4):P(e,t,16)}function oe(e,t){return t||(t=8),P(e,t,2)}function P(e,t,r){try{for(var n=e.toString(r).toUpperCase();n.length<t;)n="0"+n;return n}catch(i){return e+""}}function le(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function ue(e){var t={};if(e)for(var r in e)t[e[r]]=r;return t}function ce(e,t){for(var r=e.split(/(\S+\s+)/).filter(function(u){return u}),n=t.split(/(\S+\s+)/).filter(function(u){return u}),i=0,s=0,a="";i<r.length&&s<n.length;){var o=r[i],l=n[s];if(l&&l.indexOf(`
`)>=0)for(;i<e.length&&r[i].indexOf(`
`)<0;)i++;o!=l&&(l='<span class="hilite">'+l+"</span>"),a+=l,i++,s++}for(;s<n.length;)a+=n[s++];return a}function fe(){var e=16,t=0,r=1,n=[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,35,48,72,128],i=null,s=function(a){for(var o=1,l=0,u=e;u<a.length;)o=o+(a[u]&255)&65535,l=l+o&65535,u++;return l<<16|o};this.decode=function(a){if(i=null,a.length<e||a[0]!=76||a[1]!=90||a[2]!=71)return null;var o=a[6]|a[5]<<8|a[4]<<16|a[3]<<24,l=(a[11]&255)<<24|(a[12]&255)<<16|(a[13]&255)<<8|a[14]&255;if(s(a)!=l)return null;var u=new Array,c=a[15]&255;if(c==r)for(var p=a[16]&255,h=a[17]&255,m=a[18]&255,S=a[19]&255,g,v,L,D,A,K,y=0,x=e+4,w=a.length;x<=w;)if(g=a[x++]&255,g!=p&&g!=h&&g!=m&&g!=S)u[y++]=g;else if(v=a[x++]&255,v!=0)for(g==p?(A=n[v&31],L=a[x++]&255,D=a[x++]&255,K=((v&224)<<11|L<<8|D)+2056):g==h?(A=n[v&31],L=a[x++]&255,K=((v&224)<<3|L)+8):g==m?(A=(v>>6)+3,K=(v&63)+8):(A=n[v&31],K=(v>>5)+1),b=0;b<A;b++)u[y]=u[y-K],y++;else u[y++]=g;else if(c==t)for(var y=0,w=a.length,b=e;b<w;b++)u[y++]=a[b]&255;else return null;return u.length<o?null:(i=u.slice(0,o),i)},this.getByteArray=function(){return i},this.getStringLatin1=function(){return B(i)},this.getStringUTF8=function(){return G(i)}}function H(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function B(e){var t="";if(e!=null){for(var r=new Array,n=0;n<256;++n)r[n]=String.fromCharCode(n);for(var i=e.length,n=0;n<i;n++)t+=r[e[n]]}return t}function G(e){for(var t="",r=new Array,n=0;n<128;++n)r[n]=String.fromCharCode(n);for(var i,s=e.length,n=0;n<s;)if(i=e[n++],i<128)t+=r[i];else{if(i>=192&&i<224)i=(i&31)<<6|e[n++]&63;else if(i=(i&15)<<12|(e[n]&63)<<6|e[n+1]&63,n+=2,i==65279)continue;t+=String.fromCharCode(i)}return t}function he(e,t){var r=0;if(e){e=e.toUpperCase();let a=[".CHR",".BIN",".DAT",".PAL",".NAM",".RLE",".LZ4",".NSF"];for(var n of a)e.endsWith(n)&&r++}for(var i=0;i<(t?t.length:0);){let a=t[i++];if((a&128)==0){if(a<9||a>=14&&a<26||a==127){r++;break}}else{var s=0;for((a&224)==192?s=1:(a&240)==224?s=2:(a&248)==240?s=3:(a<160||a==255)&&r++;s--;)if(i>=t.length||(t[i++]&192)!=128){r++;break}}}return r>0}function pe(e,t,r){for(var n=r||9,i=t.length,s=e._malloc(i+1),a=0;a<i;a++)e.setValue(s+a,t[a],"i8");var o=e._LZG_MaxEncodedSize(i),l=e._malloc(o+1),u=e.ccall("compress_lzg","number",["number","number","number","number","number"],[n,s,i,o,l]);e._free(s);for(var c=new Uint8Array(u),a=0;a<u;a++)c[a]=e.getValue(l+a,"i8");return e._free(l),c}function me(e,t,r){for(var n in r){var i=r[n],s=typeof i;i===null||s=="undefined"?t[n]=i:s=="function"||(s=="object"?i.slice&&(t[n]=i.slice()):t[n]=i)}return t}function ge(e,t,r){for(var n="",i=0;i<t.length;i++)if(t[i]){var s=1<<(r?t.length-1-i:i);i>0&&(n+=" "),n+=e&s?t[i]:"-"}return n}function ve(e){return(e&255)<<16|e>>16&255|e&65280}function F(e,t,r){return e&255|(t&255)<<8|(r&255)<<16|4278190080}function _(e,t,r){return r<e?e:r>t?t:r}function de(e){return e.length==0?"":(e.match(/^[a-zA-Z_]/)||(e="_"+e),e.replace(/\W+/g,"_"))}function ye(e){for(var t=0,r=e[t++],n=[],i=r;t<e.length;){var s=e[t++];if(s==r){for(var a=e[t++],o=0;o<a;o++)n.push(i);if(a==0)break}else i=s,n.push(i)}return new Uint8Array(n)}function xe(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType=r,n.onload=function(i){if(n.status==200){var s=n.response;s instanceof ArrayBuffer&&(s=new Uint8Array(s)),t(s)}else if(n.status==404)t(null);else throw Error("Error "+n.status+" loading "+e)},n.onerror=function(i){t(null)},n.ontimeout=function(i){throw Error("Timeout loading "+e)},n.send(null)}function k(e){return e.split(".")[0]}function X(e){return e.split("-")[0]}function be(e){return X(k(e))}function _e(e){return e!=null&&(Array.isArray(e)||W(e))}function W(e){return e!=null&&e.BYTES_PER_ELEMENT}function Ae(e){return typeof e=="string"?H(e):e}function Ke(e){return e<32?String.fromCharCode(e+9216):String.fromCharCode(e)}function Ee(e){return new Promise((t,r)=>{var n=document.createElement("script");n.onload=t,n.onerror=r,n.src=e,document.getElementsByTagName("head")[0].appendChild(n)})}function Le(e){e.startsWith("?")&&(e=e.substr(1));var t=e.split("&");if(!t||t.length==0)return{};for(var r={},n=0;n<t.length;++n){var i=t[n].split("=",2);i.length==1?r[i[0]]="":r[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}return r}function Ve(e){return!e||e=="false"||e=="0"?!1:e=="true"||e=="1"?!0:!!e}function we(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null}function d(e){var t=e&&e.w+"px"||"100%",r=e&&e.h+"px"||"100%",n=this.itemHeight=e.itemHeight;this.items=e.items,this.generatorFn=e.generatorFn,this.totalRows=e.totalRows||e.items&&e.items.length;var i=d.createScroller(n*this.totalRows);this.container=d.createContainer(t,r),this.container.appendChild(i);var s=Math.ceil(e.h/n);this.cachedItemsLen=s*3,this._renderChunk(this.container,0);var a=this,o,l=s*n,u=0;this.rmNodeInterval=setInterval(function(){if(Date.now()-u>100)for(var p=document.querySelectorAll('[data-rm="1"]'),h=0,m=p.length;h<m;h++)try{a.container.removeChild(p[h])}catch(S){}},300);function c(p){var h=p.target.scrollTop;if(!o||Math.abs(h-o)>l){var m=Math.floor(h/n)-s;a._renderChunk(a.container,m<0?0:m),o=h}u=Date.now(),p.preventDefault&&p.preventDefault()}this.container.addEventListener("scroll",c)}d.prototype.createRow=function(e){var t;if(this.generatorFn)t=this.generatorFn(e);else if(this.items)if(typeof this.items[e]=="string"){var r=document.createTextNode(this.items[e]);t=document.createElement("div"),t.style.height=this.itemHeight+"px",t.appendChild(r)}else t=this.items[e];return t.classList.add("vrow"),t.setAttribute("data-index",""+e),t.style.position="absolute",t.style.top=e*this.itemHeight+"px",t};d.prototype._renderChunk=function(e,t){var r=t+this.cachedItemsLen;r>this.totalRows&&(r=this.totalRows);for(var n=document.createDocumentFragment(),i=t;i<r;i++)n.appendChild(this.createRow(i));for(var s=1,a=e.childNodes.length;s<a;s++)e.childNodes[s].style.display="none",e.childNodes[s].setAttribute("data-rm","1");e.appendChild(n)};d.createContainer=function(e,t){var r=document.createElement("div");return r.classList.add("vlist"),r.style.width=e,r.style.height=t,r.style.overflow="auto",r.style.position="relative",r.style.padding="0",r.style.border="1px solid black",r};d.createScroller=function(e){var t=document.createElement("div");return t.style.opacity="0",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="1px",t.style.height=e+"px",t};d.prototype.scrollToItem=function(e){this.container.scrollTop=this.itemHeight*e};var Pe={},V=1;function Fe(){let e=V;return e^=e<<13,e^=e>>17,e^=e<<5,(V=e)&255}function Ue(){return V}function Ne(e){V=e}function Y(e,t,r,n){var i=e.createElement("canvas");return i.width=r,i.height=n,i.classList.add("emuvideo"),i.tabIndex=-1,t.appendChild(i),i}function Z(e,t){e.onkeydown=r=>{let n=O(r);t(r.which,r.keyCode,1|n),n||r.preventDefault()},e.onkeyup=r=>{t(r.which,r.keyCode,64|O(r))}}var C=class{constructor(t,r,n,i){this.paddle_x=255;this.paddle_y=255;this.mainElement=t,this.width=r,this.height=n,this.options=i}setRotate(t){var r=this.canvas;t?(r.style.transform="rotate("+t+"deg)",r.width<r.height&&(r.style.paddingLeft=r.style.paddingRight="10%")):(r.style.transform=null,r.style.paddingLeft=r.style.paddingRight=null)}create(t){var r;this.canvas=r=Y(t||document,this.mainElement,this.width,this.height),this.vcanvas=$(r),this.options&&this.options.rotate&&this.setRotate(this.options.rotate),this.options&&this.options.overscan&&this.vcanvas.css("padding","0px"),this.options&&this.options.aspect&&(console.log(this.options),this.vcanvas.css("aspect-ratio",this.options.aspect+"")),this.ctx=r.getContext("2d"),this.imageData=this.ctx.createImageData(this.width,this.height),this.datau32=new Uint32Array(this.imageData.data.buffer)}setKeyboardEvents(t){Z(this.canvas,t)}getFrameData(){return this.datau32}getContext(){return this.ctx}updateFrame(t,r,n,i,s,a){s&&a?this.ctx.putImageData(this.imageData,t,r,n,i,s,a):this.ctx.putImageData(this.imageData,0,0)}clearRect(t,r,n,i){var s=this.ctx;s.fillStyle="#000000",s.fillRect(t,r,n,i)}setupMouseEvents(t){t||(t=this.canvas),$(t).mousemove(r=>{var n=j(t,r),i=Math.floor(n.x*255/this.canvas.width),s=Math.floor(n.y*255/this.canvas.height);this.paddle_x=_(0,255,i),this.paddle_y=_(0,255,s)})}},U=class extends C{constructor(){super(...arguments);this.persistenceAlpha=.5;this.jitter=1;this.gamma=.8;this.COLORS=["#111111","#1111ff","#11ff11","#11ffff","#ff1111","#ff11ff","#ffff11","#ffffff"]}create(){super.create(),this.sx=this.width/1024,this.sy=this.height/1024}clear(){var r=this.ctx;r.globalCompositeOperation="source-over",r.globalAlpha=this.persistenceAlpha,r.fillStyle="#000000",r.fillRect(0,0,this.width,this.height),r.globalAlpha=1,r.globalCompositeOperation="lighter"}drawLine(r,n,i,s,a,o){var l=this.ctx,u=this.sx,c=this.sy;if(a>0){var p=Math.pow(a/255,this.gamma);l.globalAlpha=p,l.lineWidth=3,l.beginPath();var h=this.jitter*(Math.random()-.5),m=this.jitter*(Math.random()-.5);r+=h,i+=h,n+=m,s+=m,l.moveTo(r*u,this.height-n*c),r==i&&n==s?l.lineTo(i*u+1,this.height-s*c):l.lineTo(i*u,this.height-s*c),l.strokeStyle=this.COLORS[o&7],l.stroke()}}};function Re(e,t,r,n){e!=null&&e.setLineDash&&(e.fillStyle="rgba(0,0,0,0.25)",e.fillRect(t-2,0,5,32767),e.fillRect(0,r-2,32767,5),e.lineWidth=n,e.strokeStyle="rgba(255,255,255,0.75)",e.setLineDash([n*2,n*2]),e.beginPath(),e.moveTo(t,0),e.lineTo(t,32767),e.moveTo(0,r),e.lineTo(32767,r),e.stroke())}var T=class{constructor(t){this.mem=new Uint8Array(new ArrayBuffer(t))}},N=class e extends Error{constructor(r,n){super(r);this.squelchError=!0;this.$loc=n,Object.setPrototypeOf(this,e.prototype)}},z=!1,R=class{constructor(t,r){this.running=!1;this.pulsing=!1;this.nextts=0;this.useReqAnimFrame=z&&typeof window.requestAnimationFrame=="function";this.frameRate=t,this.intervalMsec=1e3/t,this.callback=r}scheduleFrame(t){var r=n=>{try{this.nextFrame(this.useReqAnimFrame?n:Date.now())}catch(i){throw this.running=!1,this.pulsing=!1,i}};this.useReqAnimFrame?window.requestAnimationFrame(r):setTimeout(r,t)}nextFrame(t){t>this.nextts&&(this.running&&this.callback(),this.nframes==0&&(this.startts=t),this.nframes++==300&&console.log("Avg framerate: "+this.nframes*1e3/(t-this.startts)+" fps")),this.nextts+=this.intervalMsec,t-this.nextts>1e3&&(this.nextts=t),this.running?this.scheduleFrame(this.nextts-t):this.pulsing=!1}isRunning(){return this.running}start(){this.running||(this.running=!0,this.nextts=0,this.nframes=0,this.pulsing||(this.scheduleFrame(0),this.pulsing=!0))}stop(){this.running=!1}};function Oe(e,t,r){for(var n="",i=e.BYTES_PER_ELEMENT||1,s=Math.ceil(16/i),a=e instanceof Float32Array||e instanceof Float64Array,o=0;o<r;o+=s){n+="$"+E(o+t)+":";for(var l=0;l<s;l++)o+l<e.length&&(l==s/2&&(n+=" "),a?n+=" "+e[o+l].toPrecision(i*2):n+=" "+E(e[o+l],i*2));n+=`
`}return n}var f={ANYKEY:{c:0,n:"?"},UP:{c:38,n:"Up",plyr:0,button:12,yaxis:-1},DOWN:{c:40,n:"Down",plyr:0,button:13,yaxis:1},LEFT:{c:37,n:"Left",plyr:0,button:14,xaxis:-1},RIGHT:{c:39,n:"Right",plyr:0,button:15,xaxis:1},A:{c:32,n:"Space",plyr:0,button:0},B:{c:16,n:"Shift",plyr:0,button:1},GP_A:{c:88,n:"X",plyr:0,button:0},GP_B:{c:90,n:"Z",plyr:0,button:1},GP_C:{c:86,n:"V",plyr:0,button:2},GP_D:{c:67,n:"C",plyr:0,button:3},SELECT:{c:220,n:"\\",plyr:0,button:8},START:{c:13,n:"Enter",plyr:0,button:9},OPTION:{c:8,n:"Bcksp",plyr:0,button:10},P2_UP:{c:87,n:"W",plyr:1,button:12,yaxis:-1},P2_DOWN:{c:83,n:"S",plyr:1,button:13,yaxis:1},P2_LEFT:{c:65,n:"A",plyr:1,button:14,xaxis:-1},P2_RIGHT:{c:68,n:"D",plyr:1,button:15,xaxis:1},P2_A:{c:84,n:"T",plyr:1,button:0},P2_B:{c:82,n:"R",plyr:1,button:1},P2_GP_A:{c:69,n:"E",plyr:1,button:0},P2_GP_B:{c:82,n:"R",plyr:1,button:1},P2_GP_C:{c:84,n:"T",plyr:1,button:2},P2_GP_D:{c:89,n:"Y",plyr:1,button:3},P2_SELECT:{c:70,n:"F",plyr:1,button:8},P2_START:{c:71,n:"G",plyr:1,button:9},VK_ESCAPE:{c:27,n:"Esc"},VK_F1:{c:112,n:"F1"},VK_F2:{c:113,n:"F2"},VK_F3:{c:114,n:"F3"},VK_F4:{c:115,n:"F4"},VK_F5:{c:116,n:"F5"},VK_F6:{c:117,n:"F6"},VK_F7:{c:118,n:"F7"},VK_F8:{c:119,n:"F8"},VK_F9:{c:120,n:"F9"},VK_F10:{c:121,n:"F10"},VK_F11:{c:122,n:"F11"},VK_F12:{c:123,n:"F12"},VK_SCROLL_LOCK:{c:145,n:"ScrLck"},VK_PAUSE:{c:19,n:"Pause"},VK_QUOTE:{c:222,n:"'"},VK_1:{c:49,n:"1"},VK_2:{c:50,n:"2"},VK_3:{c:51,n:"3"},VK_4:{c:52,n:"4"},VK_5:{c:53,n:"5"},VK_6:{c:54,n:"6"},VK_7:{c:55,n:"7"},VK_8:{c:56,n:"8"},VK_9:{c:57,n:"9"},VK_0:{c:48,n:"0"},VK_MINUS:{c:189,n:"-"},VK_MINUS2:{c:173,n:"-"},VK_EQUALS:{c:187,n:"="},VK_EQUALS2:{c:61,n:"="},VK_BACK_SPACE:{c:8,n:"Bkspc"},VK_TAB:{c:9,n:"Tab"},VK_Q:{c:81,n:"Q"},VK_W:{c:87,n:"W"},VK_E:{c:69,n:"E"},VK_R:{c:82,n:"R"},VK_T:{c:84,n:"T"},VK_Y:{c:89,n:"Y"},VK_U:{c:85,n:"U"},VK_I:{c:73,n:"I"},VK_O:{c:79,n:"O"},VK_P:{c:80,n:"P"},VK_ACUTE:{c:219,n:"\xB4"},VK_OPEN_BRACKET:{c:219,n:"["},VK_CLOSE_BRACKET:{c:221,n:"]"},VK_CAPS_LOCK:{c:20,n:"CpsLck"},VK_A:{c:65,n:"A"},VK_S:{c:83,n:"S"},VK_D:{c:68,n:"D"},VK_F:{c:70,n:"F"},VK_G:{c:71,n:"G"},VK_H:{c:72,n:"H"},VK_J:{c:74,n:"J"},VK_K:{c:75,n:"K"},VK_L:{c:76,n:"L"},VK_CEDILLA:{c:186,n:"\xC7"},VK_TILDE:{c:222,n:"~"},VK_ENTER:{c:13,n:"Enter"},VK_SHIFT:{c:16,n:"Shift"},VK_BACK_SLASH:{c:220,n:"\\"},VK_Z:{c:90,n:"Z"},VK_X:{c:88,n:"X"},VK_C:{c:67,n:"C"},VK_V:{c:86,n:"V"},VK_B:{c:66,n:"B"},VK_N:{c:78,n:"N"},VK_M:{c:77,n:"M"},VK_COMMA:{c:188,n:"] ="},VK_PERIOD:{c:190,n:"."},VK_SEMICOLON:{c:59,n:";"},VK_SLASH:{c:191,n:"/"},VK_CONTROL:{c:17,n:"Ctrl"},VK_ALT:{c:18,n:"Alt"},VK_COMMAND:{c:224,n:"Cmd"},VK_SPACE:{c:32,n:"Space"},VK_INSERT:{c:45,n:"Ins"},VK_DELETE:{c:46,n:"Del"},VK_HOME:{c:36,n:"Home"},VK_END:{c:35,n:"End"},VK_PAGE_UP:{c:33,n:"PgUp"},VK_PAGE_DOWN:{c:34,n:"PgDown"},VK_UP:{c:38,n:"Up"},VK_DOWN:{c:40,n:"Down"},VK_LEFT:{c:37,n:"Left"},VK_RIGHT:{c:39,n:"Right"},VK_NUM_LOCK:{c:144,n:"Num"},VK_DIVIDE:{c:111,n:"Num /"},VK_MULTIPLY:{c:106,n:"Num *"},VK_SUBTRACT:{c:109,n:"Num -"},VK_ADD:{c:107,n:"Num +"},VK_DECIMAL:{c:194,n:"Num ."},VK_NUMPAD0:{c:96,n:"Num 0"},VK_NUMPAD1:{c:97,n:"Num 1"},VK_NUMPAD2:{c:98,n:"Num 2"},VK_NUMPAD3:{c:99,n:"Num 3"},VK_NUMPAD4:{c:100,n:"Num 4"},VK_NUMPAD5:{c:101,n:"Num 5"},VK_NUMPAD6:{c:102,n:"Num 6"},VK_NUMPAD7:{c:103,n:"Num 7"},VK_NUMPAD8:{c:104,n:"Num 8"},VK_NUMPAD9:{c:105,n:"Num 9"},VK_NUMPAD_CENTER:{c:12,n:"Num Cntr"}};function O(e){return(e.shiftKey?2:0)|(e.ctrlKey?4:0)|(e.altKey?8:0)|(e.metaKey?16:0)}function q(e,t,r,n){return(i,s,a)=>{if(!t){r(null,i,s,a);return}var o=t[i];if(o||(o=t[0]),r&&(o||n)&&r(o,i,s,a),o){var l=o.mask;l<0&&(l=-l,a&65&&(a^=65)),a&1?e[o.index]|=l:a&64&&(e[o.index]&=~l)}}}function Ie(e,t,r,n,i){var s=q(t,r,n,i);return e.setKeyboardEvents(s),new M(s)}function He(e){for(var t=new Map,r=0;r<e.length;r++){var n=e[r],i={index:n[1],mask:n[2],def:n[0]};t[n[0].c]=i}return t}var Q=[f.UP,f.DOWN,f.LEFT,f.RIGHT,f.A,f.B,f.SELECT,f.START,f.P2_UP,f.P2_DOWN,f.P2_LEFT,f.P2_RIGHT,f.P2_A,f.P2_B,f.P2_SELECT,f.P2_START],M=class{constructor(t){this.active=!1;this.AXIS0=24;this.handler=t,window.addEventListener("gamepadconnected",r=>{console.log("Gamepad connected:",r),this.reset()}),window.addEventListener("gamepaddisconnected",r=>{console.log("Gamepad disconnected:",r),this.reset()})}reset(){if(this.active=typeof navigator.getGamepads=="function",this.active){let r=navigator.getGamepads().length;this.state=new Array(r),this.lastState=new Array(r);for(var t=0;t<r;t++)this.state[t]=new Int32Array(64),this.lastState[t]=new Int32Array(64);console.log(this)}}poll(){if(this.active)for(var t=navigator.getGamepads(),r=0;r<t.length;r++){let a=this.state[r],o=this.lastState[r];var n=t[r];if(n){for(var i=0;i<n.axes.length;i++){var s=i+this.AXIS0;a[s]=Math.round(n.axes[i]),a[s]!=o[s]&&this.handleStateChange(r,s)}for(var i=0;i<n.buttons.length;i++)a[i]=n.buttons[i].pressed?1:0,a[i]!=o[i]&&this.handleStateChange(r,i);o.set(a)}}}handleStateChange(t,r){var n=r-this.AXIS0;for(var i of Q)if(i&&i.plyr==t){var s=i.c,a=this.state[t][r],o=this.lastState[t][r];if(r==i.button||n==0&&i.xaxis==a||n==1&&i.yaxis==a){a!=0?this.handler(s,0,1):this.handler(s,0,64);break}else if(a==0&&n==0&&i.xaxis==o||n==1&&i.yaxis==o){this.handler(s,0,64);break}}}};function Be(e,t,r){if(e.length>t)throw Error("Data too long, "+e.length+" > "+t);var n=new T(t);return r?n.mem.set(e,t-e.length):n.mem.set(e),n.mem}function J(e,t){var r=this;function n(){var i="";t&&t.gmask&&(i+="a&="+t.gmask+";");for(var s=0;s<e.length;s++){var a=e[s],o=a[0]|0,l=a[1]|0,u=a[2]|0,c=a[3];r["__fn"+s]=c,i+="if (a>="+o+" && a<="+l+"){",u&&(i+="a&="+u+";"),i+="return this.__fn"+s+`(a,v)&0xff;}
`}return i+="return "+((t==null?void 0:t.defaultval)|0)+";",new Function("a","v",i)}return n().bind(r)}function Ge(e,t){return new J(e,t)}function j(e,t){var r=e.getBoundingClientRect(),n=e.width/r.width,i=e.height/r.height;return{x:(t.clientX-r.left)*n,y:(t.clientY-r.top)*i}}function ee(){return $("#booksMenuButton").first().height()}var I=class{constructor(t){var r=document.createElement("div");r.setAttribute("class","memdump"),t.appendChild(r),this.maindiv=r}create(t,r,n){this.getLineAt=n,this.memorylist=new d({w:$(t).width(),h:$(t).height(),itemHeight:ee(),totalRows:r,generatorFn:i=>{var s=n(i),a=document.createElement("div");return a.appendChild(document.createTextNode(s.text)),s.clas!=null&&(a.className=s.clas),a}}),$(this.maindiv).append(this.memorylist.container)}refresh(){this.memorylist&&$(this.maindiv).find("[data-index]").each((t,r)=>{var n=r,i=parseInt(n.getAttribute("data-index")),s=n.innerText,a=this.getLineAt(i),o=a.text;if(s!=o&&(n.innerText=o,a.clas!=null&&!n.classList.contains(a.clas))){var l=Array.from(n.classList);l.forEach(u=>n.classList.remove(u)),n.classList.add("vrow"),n.classList.add(a.clas)}})}};function ke(e){let i=e>>4&15,s=e&15,a=i?60:0;i&&(s+=1);let o=((i-1)*25-25)*(2*Math.PI/360),l=256*1.1*Math.pow(s/16,.9),u=a*Math.cos(o),c=a*Math.sin(o);var p=l+.956*u+.621*c,h=l-.272*u-.647*c,m=l-1.107*u+1.704*c;return F(_(0,255,p),_(0,255,h),_(0,255,m))}export{te as a,re as b,ne as c,ie as d,ae as e,se as f,E as g,oe as h,le as i,ue as j,ce as k,fe as l,H as m,B as n,G as o,he as p,pe as q,me as r,ge as s,ve as t,F as u,_ as v,de as w,ye as x,xe as y,k as z,be as A,_e as B,Ae as C,Ke as D,Ee as E,Le as F,Ve as G,we as H,d as I,Pe as J,Fe as K,Ue as L,Ne as M,Y as N,C as O,U as P,Re as Q,T as R,N as S,R as T,Oe as U,f as V,q as W,Ie as X,He as Y,M as Z,Be as _,Ge as $,j as aa,ee as ba,I as ca,ke as da};
//# sourceMappingURL=chunk-QWAF5HSH.js.map
