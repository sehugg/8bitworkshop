<!DOCTYPE html>
<html lang="en">

<head>
<title>8bitworkshop IDE</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=yes">
<style type="text/css" media="screen">
body {
  overflow: hidden;
  font-size: 11px;
}
</style>
<link rel="stylesheet" href="css/ui.css">
</head>
<body>

<!-- for file upload -->
<input type="file" id="uploadFileElem" multiple accept="*" style="display:none" onchange="handleFileUpload(this.files)">

<div id="controls_top" class="disable-select">
 <div id="controls_dynamic" style="visibility:hidden">
  <!-- main menu -->
  <span class="dropdown">
    <a class="btn dropdown-toggle toolbarMenuButton" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Menu">
      <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-left" aria-labelledby="dropdownMenuButton" style="left:auto">
      <li><a class="dropdown-item" href="#" id="item_new_file">New Project...</a></li>
      <li><a class="dropdown-item" href="#" id="item_upload_file">Upload...</a></li>
      <hr>
      <li class="dropdown dropdown-submenu">
        <a tabindex="-1" href="#">File</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" id="item_reset_file">Revert to Original...</a></li>
          <li><a class="dropdown-item" href="#" id="item_rename_file">Rename File...</a></li>
          <li><a class="dropdown-item" href="#" id="item_delete_file">Delete File...</a></li>
          <hr>
          <li><a class="dropdown-item" href="#" id="item_addfile_include">Add Include File...</a></li>
          <li><a class="dropdown-item" href="#" id="item_addfile_link">Add Linked File...</a></li>
        </ul>
      </li>
      <li class="dropdown dropdown-submenu">
        <a tabindex="-1" href="#">Download</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" id="item_download_file">Download Source File</a></li>
          <li><a class="dropdown-item" href="#" id="item_download_rom">Download ROM Image</a></li>
          <li><a class="dropdown-item" href="#" id="item_download_zip">Download Project as ZIP</a></li>
          <li><a class="dropdown-item" href="#" id="item_download_allzip">Download All Changes as ZIP</a></li>
        </ul>
      </li>
      <li class="dropdown dropdown-submenu">
        <a tabindex="-1" href="#">Share</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" id="item_share_file">Share Playable Link...</a></li>
          <li><a class="dropdown-item" href="#" id="item_record_video">Record Video...</a></li>
          <li><a class="dropdown-item" href="#" id="item_export_cassette">Make Cassette Audio...</a></li>
        </ul>
      </li>
      <li class="dropdown dropdown-submenu">
        <a tabindex="-1" href="#">Debug</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#" id="item_debug_expr">Break Expression...</a></li>
        </ul>
      </li>
    </ul>
  </span>

  <!-- PLATFORMS menu -->
  <span class="dropdown">
    <a class="btn dropdown-toggle toolbarMenuButton" id="platformsMenuButton" style="min-width:90px" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="platform_name">PLATFORMS</span> <span class="caret"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="platformsMenuButton">
          <li class="dropdown dropdown-submenu">
             <a tabindex="-1" href="#">Game Consoles</a>
             <ul class="dropdown-menu">
               <li><a class="dropdown-item" href="?platform=vcs">Atari 2600</a></li>
               <li><a class="dropdown-item" href="?platform=nes">NES</a></li>
               <hr>
               <li><a class="dropdown-item" href="?platform=astrocade">Bally Astrocade</a></li>
               <li><a class="dropdown-item" href="?platform=coleco">ColecoVision</a></li>
               <li><a class="dropdown-item" href="?platform=sms-sg1000-libcv">Sega SG-1000</a></li>
               <li><a class="dropdown-item" href="?platform=sms-sms-libcv">Sega Master System</a></li>
               <li><a class="dropdown-item" href="?platform=atari7800">Atari 7800</a></li>
               <!--
               <li><a class="dropdown-item" href="?platform=vectrex">Vectrex</a></li>
               -->
             </ul>
          </li>
          <li class="dropdown dropdown-submenu">
             <a tabindex="-1" href="#">Computers</a>
             <ul class="dropdown-menu">
               <li><a class="dropdown-item" href="?platform=c64">Commodore 64</a></li>
               <li><a class="dropdown-item" href="?platform=msx">MSX (BIOS)</a></li>
               <li><a class="dropdown-item" href="?platform=msx-libcv">MSX (libCV)</a></li>
               <li><a class="dropdown-item" href="?platform=apple2">Apple ][+</a></li>
               <li><a class="dropdown-item" href="?platform=zx">ZX Spectrum</a></li>
               <li><a class="dropdown-item" href="?platform=x86">x86 (FreeDOS)</a></li>
              </ul>
          </li>
          <li class="dropdown dropdown-submenu">
             <a tabindex="-1" href="#">Arcade Systems</a>
             <ul class="dropdown-menu">
               <li><a class="dropdown-item" href="?platform=vicdual">VIC Dual</a></li>
               <li><a class="dropdown-item" href="?platform=mw8080bw">Midway 8080</a></li>
               <li><a class="dropdown-item" href="?platform=galaxian-scramble">Galaxian/Scramble</a></li>
               <li><a class="dropdown-item" href="?platform=vector-z80color">Atari Color Vector (Z80)</a></li>
               <li><a class="dropdown-item" href="?platform=vector-ataricolor">Atari Color Vector (6502)</a></li>
               <li><a class="dropdown-item" href="?platform=williams-z80">Williams (Z80)</a></li>
               <li><a class="dropdown-item" href="?platform=sound_williams-z80">Williams Sound (Z80)</a></li>
             </ul>
          </li>
          <li class="dropdown dropdown-submenu">
             <a tabindex="-1" href="#">Hardware</a>
             <ul class="dropdown-menu">
               <li><a class="dropdown-item" href="?platform=verilog">Verilog</a></li>
               <li><a class="dropdown-item" href="?platform=verilog-vga">Verilog (VGA @ 25 Mhz)</a></li>
             </ul>
          </li>
         <li class="dropdown dropdown-submenu">
          <a tabindex="-1" href="#">Interpreters</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="?platform=basic">BASIC</a></li>
            <li><a class="dropdown-item" href="?platform=zmachine">Z-Machine</a></li>
            <li><a class="dropdown-item" href="?platform=markdown">Markdown Text Editor</a></li>
          </ul>
        </li>
        <li class="dropdown dropdown-submenu">
          <a tabindex="-1" href="#">MAME Emulators</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="?platform=atari8-800xl.mame">Atari 800XL (MAME)</a></li>
            <li><a class="dropdown-item" href="?platform=atari8-5200.mame">Atari 5200 (MAME)</a></li>
            <hr>
            <li><a class="dropdown-item" href="?platform=vcs.mame">Atari 2600 (MAME)</a></li>
            <li><a class="dropdown-item" href="?platform=coleco.mame">ColecoVision (MAME)</a></li>
            <li><a class="dropdown-item" href="?platform=nes.mame">NES (MAME)</a></li>
          </ul>
       </li>
    </ul>
  </span>

  <!-- project selector -->
  <span id="repo_name" class="hidden-sm" style="color:#eee; font-size: small"></span>
  <select id="preset_select" name="" title="Project Select" style="max-width:20em;visibility:hidden;height:2.3em">
  </select>

  <img id="compile_spinner" src="images/spinner.gif" style="visibility:hidden;margin-left:8px;margin-right:8px;height:2em">
  <span id="toolbar" class="hidden-xs"></span>
  <span class="btn_group view_group hidden-sm hidden-xs" id="speed_bar" style="display:none">
    <button id="dbg_slowest" class="btn" title="Slowest"><span class="glyphicon glyphicon-fast-backward" aria-hidden="true"></span></button>
    <button id="dbg_slower" class="btn" title="Slower"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
    <span class="label"><span id="fps_label">60.00</span> fps</span>
    <button id="dbg_faster" class="btn" title="Faster"><span class="glyphicon glyphicon-forward" aria-hidden="true"></span></button>
    <button id="dbg_fastest" class="btn" title="Faster"><span class="glyphicon glyphicon-fast-forward" aria-hidden="true"></span></button>
  </span>
  <span id="verilog_bar" style="display:none">
    <span class="label"><span id="settle_label"></span> evals/clk</span>
  </span>

  <!-- 8bitworkshop logo -->
  <span class="logo-gradient hidden-xs hidden-sm hidden-md pull-right" style="margin-left:auto" onclick="window.open('/','_8bitws');">8bitworkshop</span>

 </div><!-- controls_dynamic -->
</div><!-- controls_top -->

<div id="notebook">
  <div id="sidebar">
    <ul id="windowMenuList">
    </ul>
  </div>
  <div id="workspace">
  </div>
  <div class="emulator disable-select" id="emulator">
    <!-- replay slider -->
    <div id="replaydiv" class="replaydiv" style="display:none;color:#ccc;text-align:left">
     <div style="display:grid; grid-template-columns: 3em 3em auto 3em; grid-gap: 1em">
      <button id="replay_back" class="btn" title="Back one frame"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
      <div>
        Frame<br>
        <span id="replay_frame" style="width:3em">-</span>
      </div>
      <input type="range" min="0" max="0" value="0" class="slider" id="replayslider">
      <button id="replay_fwd" class="btn" title="Ahead one frame"><span class="glyphicon glyphicon-forward" aria-hidden="true"></span></button>

      <button id="clock_back" class="btn" title="Back one step"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></button>
      <div>
        Step<br>
        <span id="replay_clock" style="width:3em">-</span>
      </div>
      <input type="range" min="0" max="0" value="0" class="slider" id="clockslider">
      <button id="clock_fwd" class="btn" title="Forward one step"><span class="glyphicon glyphicon-forward" aria-hidden="true"></span></button>
     </div>
    </div>
    <!-- emulator video -->
    <div id="emuscreen">
    </div>
    <!-- for Javatari only -->
    <div id="javatari-div" style="float:center;margin:10px;display:none">
      <div id="javatari-screen" style="margin: 0 auto; box-shadow: 2px 2px 10px rgb(60, 60, 60);"></div>
      <div id="javatari-console-panel" style="margin: 0 auto; box-shadow: 2px 2px 10px rgb(60, 60, 60);"></div>
    </div>
    <!-- control instructions -->
    <div class="emucontrols-vcs emucontrols-c64 text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key small">Space</span> Button</span>
    </div>
    <div class="emucontrols-nes emucontrols-atari7800 text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joypad</span>
      <span class="control-def"><span class="control-key small">Space</span> Button A</span>
      <span class="control-def"><span class="control-key small">Shift</span> Button B</span>
      <span class="control-def"><span class="control-key small">\</span> Select</span>
      <span class="control-def"><span class="control-key small">Enter</span> Start</span>
    </div>
    <div class="emucontrols-msx emucontrols-coleco emucontrols-sms text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joypad</span>
      <span class="control-def"><span class="control-key small">Space</span> Button A</span>
      <span class="control-def"><span class="control-key small">Shift</span> Button B</span>
    </div>
    <div class="emucontrols-vicdual emucontrols-galaxian emucontrols-vector text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key small">Space</span> Button 1</span>
      <span class="control-def"><span class="control-key small">Shift</span> Button 2</span>
      <span class="control-def"><span class="control-key">\</span> Coin</span>
      <span class="control-def"><span class="control-key small">Enter</span> Start</span>
    </div>
    <div class="emucontrols-mw8080bw text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&nbsp;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key small">Space</span> Fire</span>
    </div>
    <div class="emucontrols-williams text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">A W S D</span> Move</span>
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Fire</span>
      <span class="control-def"><span class="control-key">\</span> Coin</span>
      <span class="control-def"><span class="control-key small">Enter</span> Start</span>
      <span class="control-def"><span class="control-key small">6 7 8 9</span> Extra</span>
    </div>
    <div class="emucontrols-astrocade text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key small">Space</span> Trigger</span>
      <span class="control-def"><span class="control-key small">Mouse X</span> Knob</span>
      <span class="control-def"><span class="control-key small" style="display:inline-block;font-family:monospace">
        U I O P<br>
        J K L /<br>
        7 8 9 X<br>
        4 5 6 -<br>
        1 2 3 ,<br>
        \ 0 . =</span> Keypad</span>
    </div>
    <div class="emucontrols-vectrex text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key">Z X C V</span> Buttons</span>
    </div>
    <div class="emucontrols-atari8 text-center small control-insns" style="display:none">
      <span class="control-def"><span class="control-key">&#x2190;&#x2191;&#x2193;&#x2192;</span> Joystick</span>
      <span class="control-def"><span class="control-key">Z</span> Button 1</span>
      <span class="control-def"><span class="control-key">X</span> Button 2</span>
      <span class="control-def"><span class="control-key">1</span> Start</span>
    </div>
    <!-- -->
    <div id="emuoverlay" class="emuoverlay" style="display:none">
    </div>
  </div>
  <div id="mem_info" class="mem_info" style="display:none">
  </div>
  <div id="error_alert" class="alert alert-danger alert-dismissable" style="position:absolute;right:0;top:0;display:none">
    <button type="button" class="close" onclick="$('.alert').hide()" aria-hidden="true">&times;</button>
    <div id="error_alert_msg"></div>
  </div>
</div>
<!--
<div class="twitbtn">
  <a target="_new" href="https://twitter.com/8bitworkshop" class="twitter-follow-button" data-show-count="false">Follow @8bitworkshop</a>-->
  <!--<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>-->
<!--</div>-->
<div id="pleaseWaitModal" class="modal fade">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-body">
        Please wait...
        <div class="progress">
          <div class="progress-bar progress-bar-striped active" role="progressbar" id="pleaseWaitProgressBar">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="videoPreviewModal" class="modal fade">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Video Preview - Right-click to save</h3>
      </div>
      <div class="modal-body">
        <img id="videoPreviewImage">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<div id="embedLinkModal" class="modal fade">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Share Playable Link</h3>
      </div>
      <div class="modal-body">
        <p>Here's a direct link to a playable version of your game:</p>
        <textarea rows="4" cols="80" id="embedLinkTextarea" class="cliptext"></textarea>
        <button type="button" class="btn btn-primary" data-clipboard-target="#embedLinkTextarea">Copy Direct Link</button>
        <p>You can also embed it into an IFRAME:</p>
        <textarea rows="4" cols="80" id="embedIframeTextarea" class="cliptext"></textarea>
        <button type="button" class="btn btn-primary" data-clipboard-target="#embedIframeTextarea">Copy IFRAME Tag</button>
        <p id="embedAdviceWarnIE">Note: These links may be too long for IE/Edge browsers.</p>
        <p id="embedAdviceWarnAll">Note: These links may be too long for some browsers.</p>
      </div>
      <div class="modal-footer">
        Choose one (or none) then
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<div id="debugExprModal" class="modal fade">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Break Expression</h3>
      </div>
      <div class="modal-body">
        <p>Enter a break expression:</p>
        <p><input id="debugExprInput" size="60"></input></p>
        <p>Examples:</p>
        <pre id="debugExprExamples"></pre>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="debugExprSubmit">Debug</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<script src="jquery/jquery.min.js"></script>

<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="bootstrap/js/bootbox.all.min.js"></script>

<script src="src/codemirror/codemirror.js"></script>
<script src="codemirror/mode/clike/clike.js"></script>
<script src="codemirror/mode/z80/z80.js"></script>
<script src="codemirror/mode/verilog/verilog.js"></script>
<script src="codemirror/mode/markdown/markdown.js"></script>
<script src="codemirror/mode/javascript/javascript.js"></script>
<script src="codemirror/mode/gas/gas.js"></script>
<script src="src/codemirror/6502.js"></script>
<script src="src/codemirror/bataribasic.js"></script>
<script src="src/codemirror/inform6.js"></script>
<script src="src/codemirror/fastbasic.js"></script>
<script src="src/codemirror/basic.js"></script>
<link rel="stylesheet" href="css/codemirror.css">
<script src="codemirror/addon/edit/matchbrackets.js"></script>
<script src="codemirror/addon/search/search.js"></script>
<script src="codemirror/addon/search/searchcursor.js"></script>
<script src="codemirror/addon/search/jump-to-line.js"></script>
<script src="codemirror/addon/dialog/dialog.js"></script>
<script src="codemirror/addon/selection/active-line.js"></script>
<link rel="stylesheet" href="codemirror/addon/dialog/dialog.css">
<script src="javatari.js/release/javatari/javatari.js"></script>
<script src="jsnes/dist/jsnes.min.js"></script>
<script src="src/common/cpu/6809.js"></script>
<script src="lib/mousetrap.min.js"></script>
<script src="lib/mousetrap-global-bind.min.js"></script>
<!-- UI-only stuff -->
<link rel="stylesheet" href="lib/bootstrap-tourist.css">
<script src="lib/bootstrap-tourist.js"></script>
<script src="lib/FileSaver.min.js"></script>
<script src="lib/localforage.min.js"></script>
<script src="lib/split.min.js"></script>

<script>
var exports = {};
function require(modname) {
  if (modname == 'jquery') return $;
  else if (modname.startsWith('.')) return exports;
  else { console.log("Unknown require()", modname); return exports; }
}
</script>

<script src="lib/octokat.js"></script>
<script src="tss/js/tss/PsgDeviceChannel.js"></script>
<script src="tss/js/tss/MasterChannel.js"></script>
<script src="tss/js/tss/AudioLooper.js"></script>
<script src="tss/js/Log.js"></script>

<script src="gen/ide/vlist.js"></script>
<script src="gen/common/video/tms9918a.js"></script>
<script src="gen/common/util.js"></script>
<script src="gen/ide/store.js"></script>
<script src="gen/common/emu.js"></script>
<script src="gen/common/baseplatform.js"></script>
<script src="gen/common/analysis.js"></script>
<script src="gen/common/audio.js"></script>
<script src="gen/common/cpu/disasm6502.js"></script>
<script src="gen/common/cpu/disasmz80.js"></script>
<script src="gen/common/workertypes.js"></script>
<script src="gen/ide/project.js"></script>
<script src="gen/ide/windows.js"></script>
<script src="gen/ide/views.js"></script>
<script src="gen/common/recorder.js"></script>
<script src="gen/ide/waveform.js"></script>
<script src="gen/ide/pixeleditor.js"></script>
<script src="gen/ide/services.js"></script>
<script src="gen/ide/ui.js"></script>
<script src="gen/common/devices.js"></script>
<script src="gen/common/cpu/MOS6502.js"></script>
<script src="gen/common/cpu/ZilogZ80.js"></script>
<script src="gen/machine/vdp_z80.js"></script>

<script>
// submenus open on click + hover
$( ".dropdown-submenu" ).click(function(event) {
    event.stopPropagation();
    $(this).parent().siblings().removeClass('open');
    $(this).parent().toggleClass('open');
});
</script>

<script>
  startUI();
</script>

<!-- Sentry error reporting -->
<script
  src="https://browser.sentry-cdn.com/5.29.0/bundle.min.js"
  integrity="sha384-/dYT/04VSU9ItKRPTkWeVZ0kqRsVh/T/5rNCjzBwpx7sYeeueKgJzGMNXSal3xoo"
  crossorigin="anonymous"
></script>
<script>
Sentry.init({
    dsn: 'https://bf329df3d1b34afa9f5b5e8ecd80ad11@o320878.ingest.sentry.io/1813925',
    beforeBreadcrumb(breadcrumb, hint) {
      if (breadcrumb.category === 'xhr' && typeof breadcrumb.data.url === 'string') {
        if (breadcrumb.data.url.startsWith('http')) return null; // discard external scripts
      }
      return breadcrumb;
    },
    beforeSend(event, hint) {
      const error = hint.originalException;
      if (error instanceof EmuHalt) return null; // ignore EmuHalt
      return event;
    },
});
</script>

</body>
</html>
